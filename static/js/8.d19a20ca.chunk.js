(this["webpackJsonpderi-client"]=this["webpackJsonpderi-client"]||[]).push([[8],{1656:function(e,t,n){"use strict";t.a=n.p+"static/media/staked.46571832.svg"},1746:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a,s=n(247),r=n(362),c=n(9),i=n(174),o=n(22),u={};function l(e,t,n){var a=Object(i.b)(),l=function(e){return u[e]}(e),d=l.address,b=l.abi,p=a.ethereum;return d&&(n=d),Object(c.useMemo)((function(){var e=Object(o.x)(t);return p&&p.networkVersion===String(t)&&(e=new r.a(p,"any")),e?new s.b(n,b,function(e,t){return t?function(e,t){return e.getSigner(t).connectUnchecked()}(e,t):e}(e,a.account),{pollingInterval:500}):null}),[n,b,a])}(a=n(1657)).keys().forEach((function(e){var t=e.split("/"),n=t[t.length-1];u[n.substring(0,n.indexOf("."))]=a(e)}))},1891:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var a,s,r=n(80),c=n(2),i=n(12),o=n(0),u=n.n(o),l=n(9),d=n(75),b=n(1469),p=n(217),m=n(562),j=n(563),f=n(564),x=n(561),v=n(568),O=n(1656),h=n(566),k=(n(2225),n(65)),g=n(1746),w=n(32),y=n(22),S=n(99),N=n.n(S),T=n(6),_="0x96C3966534b4377691e11e163A0409Ad01667343";function E(e){var t=e.lang,n=e.pool,a=e.wallet,s=Object(d.g)(),r=["311860","311904"],o=Object(l.useState)({}),k=Object(i.a)(o,2),S=k[0],E=k[1],C=Object(l.useState)(n.address),I=Object(i.a)(C,2),q=I[0],X=I[1],D=Object(l.useState)(!1),L=Object(i.a)(D,2),B=L[0],P=L[1],U=Object(l.useState)(),z=Object(i.a)(U,2),A=z[0],H=z[1],M=Object(l.useState)(!0),R=Object(i.a)(M,2),V=(R[0],R[1]),J=Object(l.useState)([]),Z=Object(i.a)(J,2),G=Z[0],K=Z[1],Y=Object(l.useState)([]),Q=Object(i.a)(Y,2),W=Q[0],$=Q[1],ee=Object(l.useState)(0),te=Object(i.a)(ee,2),ne=te[0],ae=te[1],se=Object(l.useState)(0),re=Object(i.a)(se,2),ce=re[0],ie=re[1],oe=Object(l.useState)(),ue=Object(i.a)(oe,2),le=ue[0],de=ue[1],be=Object(l.useState)(0),pe=Object(i.a)(be,2),me=pe[0],je=pe[1],fe=Object(g.a)("ERC20",42161,"0x21E60EE73F17AC0A411ae5D690f908c3ED66Fe12"),xe=Object(g.a)("ERC20",42161,"0x82af49447d8a07e3bd95bd0d56f35241523fbab1"),ve=Object(g.a)("arbitrumLp",42161),Oe=Object(g.a)("LpTokenId",42161),he=Object(g.a)("PairAbi",42161),ke=Object(l.useCallback)(Object(c.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E({}),e.next=3,n.getPoolInfo(n.address,n.chainId,n.version);case 3:t=e.sent,X(n.address),E(t);case 6:case"end":return e.stop()}}),e)}))),[n]),ge=Object(l.useCallback)(Object(c.a)(u.a.mark((function e(){var t,n,a,s,r,c,i,o,l,d,b,p,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E({}),e.next=3,fe.balanceOf(_);case 3:return t=e.sent,e.next=6,xe.balanceOf(_);case 6:return n=e.sent,a="".concat("https://infoapi.deri.io","/stats_for_token"),e.next=10,fetch(a);case 10:return s=e.sent,e.next=13,s.json();case 13:return r=e.sent,"https://sig.oraclum.io/unsigned?symbols=ETHUSD",e.next=17,N.a.get("https://sig.oraclum.io/unsigned?symbols=ETHUSD");case 17:c=e.sent,i=c.data.ETHUSD,o=r.data.price,l=w.a.from(t._hex).toString()/Math.pow(10,18),d=w.a.from(n._hex).toString()/Math.pow(10,18),b=Object(y.a)(l).times(o).toNumber(),p=Object(y.a)(d).times(i).toNumber(),m=b+p,console.log("getLiquidity",m),E({liquidity:m});case 27:case"end":return e.stop()}}),e)}))),[fe,xe]),we=function(){var e=Object(c.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||"v3"!==n.version&&"v3_lite"!==n.version){e.next=5;break}return e.next=3,n.getVenusEarned(a,n.address);case 3:t=e.sent,H(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=Object(l.useCallback)(Object(c.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getIsStaked(a,n);case 2:(t=e.sent)&&(P(t.isStaked),X(t.poolAddress));case 4:case"end":return e.stop()}}),e)}))),[a,n]),Se=Object(l.useCallback)(function(){var e=Object(c.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,setTimeout(Object(c.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(y.x)(42161),e.next=3,ve.connect(t);case 3:return n=e.sent,console.log("bTime",n),a=r.map(function(){var e=Object(c.a)(u.a.mark((function e(t){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,n.getSecondsPerLiquidityInsideX128(t);case 3:return(s=e.sent)&&(a.id=t,a.timestamp=w.a.from(s.timestamp._hex).toString(),a.secondsPerLiquidityInsideX128=w.a.from(s.secondsPerLiquidityInsideX128._hex).toString()),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=8,Promise.all(a);case 8:a=e.sent,$(a);case 10:case"end":return e.stop()}}),e)}))),1e3);case 2:return e.abrupt("return",undefined);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[ve]),Ne=Object(l.useCallback)(Object(c.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.map(function(){var e=Object(c.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,ve.getSecondsPerLiquidityInsideX128(t);case 3:return(a=e.sent)&&(n.id=t,n.timestamp=w.a.from(a.timestamp._hex).toString(),n.secondsPerLiquidityInsideX128=w.a.from(a.secondsPerLiquidityInsideX128._hex).toString()),console.log("aTime res",a),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:t=e.sent,Se(),K(t);case 6:case"end":return e.stop()}}),e)}))),[ve]),Te=Object(l.useCallback)(Object(c.a)(u.a.mark((function e(){var t,n,a,s,o,l,d,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.map(function(){var e=Object(c.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,Oe.positions(t);case 3:return a=e.sent,n={tickLower:a.tickLower,tickUpper:a.tickUpper,liquidity:w.a.from(a.liquidity._hex).toString()},e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:return t=e.sent,e.next=6,he.slot0();case 6:return n=(n=e.sent).tick,a=t.map((function(e){var t=Object(y.p)(n,e.tickLower,e.tickUpper,e.liquidity),a=Object(i.a)(t,2),s=a[0],r=a[1];return{deri:s/Math.pow(10,18),eth:r/Math.pow(10,18)}})),s=a.reduce((function(e,t){return e+t.deri}),0),o=a.reduce((function(e,t){return e+t.eth}),0),"https://sig.oraclum.io/unsigned?symbols=ETHUSD",e.next=14,N.a.get("https://sig.oraclum.io/unsigned?symbols=ETHUSD");case 14:l=e.sent,console.log("ETHUSD",l.data),d=l.data.ETHUSD,b=Object(y.a)(o).times(d).toNumber(),ie(b),je(s);case 20:case"end":return e.stop()}}),e)}))),[Oe,r,he]),_e=Object(l.useCallback)(Object(c.a)(u.a.mark((function e(){var t,n,a,s,r,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ne&&me&&ce)){e.next=14;break}return t="".concat("https://infoapi.deri.io","/stats_for_token"),e.next=4,fetch(t);case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,s=a.data.price,r=Object(y.a)(me).times(s).toNumber(),c=r+ce,i=Object(y.a)(ne).times(s).toNumber(),de(i/c*100);case 14:case"end":return e.stop()}}),e)}))),[ne,me,ce]),Ee=Object(l.useCallback)(Object(c.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getTimeRewardInfo",G,W),t=W.map(function(){var e=Object(c.a)(u.a.mark((function e(t){var n,a,s,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=G.find((function(e){return e.id===t.id})),a=n.secondsPerLiquidityInsideX128,e.next=4,ve.getRewardInBetween(t.id,t.timestamp,a,t.secondsPerLiquidityInsideX128);case 4:if(!(s=e.sent)){e.next=8;break}return r={reward:w.a.from(s._hex).toString()/Math.pow(10,18),id:t.id,timestamp:Math.abs(t.timestamp-n.timestamp)},e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.all(t);case 4:t=e.sent,console.log("getTimeRewardInfo",t),0!==t[0].timestamp&&(n=t.reduce((function(e,t){return e+t.reward}),0),31536e6,a=n/(1e3*t[0].timestamp)*31536e6,ae(a));case 7:case"end":return e.stop()}}),e)}))),[G,W,ve]),Ce=function(e){e.target.src=h.default};Object(l.useEffect)((function(){"ulp"===n.version&&fe?ge():ke(),a.isConnected()&&(ye(),we())}),[n,a.detail.account,fe,xe]),Object(l.useEffect)((function(){var e=sessionStorage.getItem(n.address);null!==e&&e&&V(!1)}),[n]);Object(l.useEffect)((function(){"ulp"===n.version&&ve&&(K([]),$([]),de(),Ne())}),[n.version,ve]),Object(l.useEffect)((function(){"ulp"===n.version&&Oe&&he&&Te()}),[Oe,n.version,he]),Object(l.useEffect)((function(){ne&&me&&ce&&_e()}),[ne,me,ce]),Object(l.useEffect)((function(){G.length&&ve&&W.length&&Ee()}),[G,W,ve]);var Ie={BSC:"BNB Chain",ZKSYNC:"zkSync Era"},Fe="ulp"===n.version?"/lppool/".concat(n.chainId,"/").concat(n.address):"/pool/".concat(n.version||"v1","/").concat(n.chainId,"/").concat(n.type,"/").concat(n.address);return Object(T.jsx)("div",{className:"".concat("0x243681B8Cd79E3823fF574e07B2378B8Ab292c1E"===n.address?"showGuide":""," card-box"),children:Object(T.jsxs)("div",{className:"v2_lite_open"===n.version?"card-list open-list":"card-list",onClick:function(){!function(e){"v2_lite_open"!==n.version&&s.push(e)}(Fe)},children:[Object(T.jsxs)("div",{className:"card-header ".concat(n.retired?"".concat(n.version):""," ").concat(n.new?"new":""),children:[Object(T.jsxs)("div",{className:"pool-network-type",children:[Object(T.jsx)("div",{className:"network-logo",children:Object(T.jsx)("img",{alt:"",src:function(e){var t;return"56"===e||"97"===e?t=m.default:"137"===e?t=f.default:"1"===e?t=x.default:"42161"===e||"421611"===e||"421613"===e?t=j.default:"324"===e&&(t=v.default),t}(n.chainId)})}),Object(T.jsxs)("div",{className:"pool-type-network-text",children:[Object(T.jsxs)("div",{className:"pool-type-text",children:["0xD2D950e338478eF7FeB092F840920B3482FcaC40"!==n.address&&Object(T.jsxs)(T.Fragment,{children:[t[n.type]," ",t[n.zone]]}),"0x1eF92eDA3CFeefb8Dae0DB4507f860d3b73f29BA"===n.address&&Object(T.jsx)(T.Fragment,{children:"DERI-based"}),"0xD2D950e338478eF7FeB092F840920B3482FcaC40"===n.address&&Object(T.jsx)(T.Fragment,{children:t[n.zone]})]}),Object(T.jsx)("div",{className:"pool-network-text",children:Ie[n.chain.toUpperCase()]?Ie[n.chain.toUpperCase()]:n.chain.toUpperCase()})]})]}),Object(T.jsxs)("div",{className:"base-token-logo",children:[n.isLp&&Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)("div",{className:"lp-base-token-bg",children:[Object(T.jsx)("div",{className:"base-token-bg ".concat(n.bTokens[0].bTokenSymbol)}),Object(T.jsx)("span",{className:"lp-con",children:"+"}),Object(T.jsx)("div",{className:"base-token-bg ".concat(n.bTokens[1].bTokenSymbol)})]})}),!n.isLp&&"v3"!==n.version&&"v3_lite"!==n.version&&Object(T.jsx)(T.Fragment,{children:n.bTokens.map((function(e,t){return Object(T.jsx)("div",{className:"base-token-box-bg no-animation-tokens",children:Object(T.jsx)("div",{className:"base-token-bg ".concat(e.bTokenSymbol),children:"v2_lite_open"===n.version&&Object(T.jsx)(T.Fragment,{children:Object(T.jsx)("img",{alt:"",onError:Ce,src:"https://raw.githubusercontent.com/deri-finance/deri-open-zone/main/img/".concat(e.bTokenSymbol,".png")})})})},t)}))}),("v3"===n.version||"v3_lite"===n.version)&&!n.singleBtoken&&Object(T.jsx)(F,{bTokens:n.bTokens}),("v3"===n.version||"v3_lite"===n.version)&&n.singleBtoken&&Object(T.jsx)("div",{className:"base-token-box-bg no-animation-tokens",children:Object(T.jsx)("div",{className:"base-token-bg ".concat(n.bTokens[0].bTokenSymbol)})})]})]}),Object(T.jsxs)("div",{className:"card-content",children:[Object(T.jsx)("div",{className:"max-apy",children:"v2_lite_open"!==n.version&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"max-apy-title",children:"v2"===n.version||"v3_lite"===n.version||"v3"===n.version?t["max-apy"]:t.apy}),Object(T.jsx)("div",{className:"max-apy-num",children:Object(T.jsx)(b.a,{value:"ulp"===n.version?le:S.apy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2})})]})}),Object(T.jsxs)("div",{className:"total-pool-liquidity",children:[Object(T.jsx)("div",{className:"total-liquidity-title",children:t["total-pool-liquidity"]}),Object(T.jsx)("div",{className:"total-liquidity-num",children:Object(T.jsx)(b.a,{value:S.liquidity,displayType:"text",thousandSeparator:!0,decimalScale:"lp"===n.type?"ulp"===n.version?0:7:0})})]}),Object(T.jsxs)("div",{className:"your-deri-epoch",children:[B&&q===n.address&&Object(T.jsxs)("div",{className:"staked-box",children:[Object(T.jsx)("img",{src:O.a,alt:""}),t.staked]}),+A>0&&("v3"===n.version||"v3_lite"===n.version)&&Object(T.jsx)("span",{className:"xvs-collectable",children:Object(T.jsxs)("div",{className:"staked-box",children:[Object(T.jsx)(b.a,{width:"50px",value:A,displayType:"text",thousandSeparator:!0,decimalScale:2})," \xa0 XVS  ",t.collectable]})})]}),Object(T.jsx)("div",{className:"stake-button",children:Object(T.jsx)(p.a,{disabled:"v2_lite_open"===n.version,className:"button",outline:!0,label:"v2_lite_open"===n.version?t.operating:t.stake})})]})]})})}var C=k.a.div(a||(a=Object(r.a)(["\n  @-webkit-keyframes explode {\n    0% {\n        transform: translateX(0px);\n        -moz-transform : translateX(0px);\n    }\n    100% {\n        transform: translateX(100px);\n        -moz-transform : translateX(100px);\n    }\n  }\n\n  @keyframes explode {\n    0% {\n        transform: translateX(0px);\n        -moz-transform : translateX(0px);\n    }\n    100% {\n        transform: translateX(100px) ;\n        -moz-transform : translateX(100px) ;\n    }\n  }\n  .base-token{\n    margin-left: 0px !important;\n    z-index : -2;\n    visibility: hidden;\n    background-color: #111e34;\n    border : 1px solid #fff;\n  }\n  @media only screen and (max-width: 760px) {\n    .base-token{\n      display:none;\n    }\n  }\n  .base-token-box-bg.explode:hover .move  {\n    -webkit-animation : explode .4s .0s linear;\n    -moz-animation :  explode .4s .0s linear;\n    animation: explode .4s .0s linear;\n    visibility: visible;    \n  }\n  \n  .base-token-box-bg.explode:hover .base-token {\n    z-index : 2 !important;\n  } \n\n"]))),I=k.a.div(s||(s=Object(r.a)(["\n  position: absolute;\n  transform : ",";\n  width: 48px;\n  height: 48px;\n  display: inline-block;\n  border-radius: 50%;\n  .move {\n    transform : translateX(100px) ",";\n  }\n"])),(function(e){return"rotate(".concat(-e.rotate,"deg)")}),(function(e){return"rotate(".concat(e.rotate,"deg)")})),F=function(e){var t=e.bTokens,n=void 0===t?[]:t,a=360/n.length;return Object(T.jsxs)(C,{className:"v3-tokens",children:[Object(T.jsx)("div",{className:"tokens",children:n.filter((function(e,t){return t<3})).map((function(e,t){return Object(T.jsx)("div",{className:"base-token-box-bg",children:Object(T.jsx)("div",{className:"base-token-bg ".concat(e.bTokenSymbol)})},t)}))}),Object(T.jsxs)("div",{className:"base-token-box-bg explode",children:[Object(T.jsxs)("div",{className:"base-token-bg num-token",children:[n.length-3," +"]}),n.map((function(e,t){var n=a*t;return Object(T.jsx)(I,{className:"base-token",rotate:n,width:"100",children:Object(T.jsx)("div",{width:"100",rotate:n,className:"base-token-bg move ".concat(e.bTokenSymbol)})},t)}))]})]})}},1892:function(e,t,n){},2225:function(e,t,n){}}]);
//# sourceMappingURL=8.d19a20ca.chunk.js.map