/*! For license information please see 6.a4d165b6.chunk.js.LICENSE.txt */
(this["webpackJsonpapp.deri.finance"]=this["webpackJsonpapp.deri.finance"]||[]).push([[6],{999:function(t,i,n){"use strict";n.d(i,"a",(function(){return U})),n.d(i,"b",(function(){return ie}));var e={allowDownsampling:!0};var s,r,h,o=function(){function t(t,i){var n=this;this._resolutionMediaQueryList=null,this._resolutionListener=function(t){return n._onResolutionChanged()},this._canvasConfiguredListeners=[],this.canvas=t,this._canvasSize={width:this.canvas.clientWidth,height:this.canvas.clientHeight},this._options=i,this._configureCanvas(),this._installResolutionListener()}return t.prototype.destroy=function(){this._canvasConfiguredListeners.length=0,this._uninstallResolutionListener(),this.canvas=null},Object.defineProperty(t.prototype,"canvasSize",{get:function(){return{width:this._canvasSize.width,height:this._canvasSize.height}},enumerable:!0,configurable:!0}),t.prototype.resizeCanvas=function(t){this._canvasSize={width:t.width,height:t.height},this._configureCanvas()},Object.defineProperty(t.prototype,"pixelRatio",{get:function(){var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");return t.devicePixelRatio>1||this._options.allowDownsampling?t.devicePixelRatio:1},enumerable:!0,configurable:!0}),t.prototype.subscribeCanvasConfigured=function(t){this._canvasConfiguredListeners.push(t)},t.prototype.unsubscribeCanvasConfigured=function(t){this._canvasConfiguredListeners=this._canvasConfiguredListeners.filter((function(i){return i!=t}))},t.prototype._configureCanvas=function(){var t=this.pixelRatio;this.canvas.style.width=this._canvasSize.width+"px",this.canvas.style.height=this._canvasSize.height+"px",this.canvas.width=this._canvasSize.width*t,this.canvas.height=this._canvasSize.height*t,this._emitCanvasConfigured()},t.prototype._emitCanvasConfigured=function(){var t=this;this._canvasConfiguredListeners.forEach((function(i){return i.call(t)}))},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this.canvas.ownerDocument.defaultView;if(null==t)throw new Error("No window is associated with the canvas");var i=t.devicePixelRatio;this._resolutionMediaQueryList=t.matchMedia("all and (resolution: "+i+"dppx)"),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){this._configureCanvas(),this._reinstallResolutionListener()},t}();function u(t,i){var n,e=((n={})[0]=[],n[1]=[t.lineWidth,t.lineWidth],n[2]=[2*t.lineWidth,2*t.lineWidth],n[3]=[6*t.lineWidth,6*t.lineWidth],n[4]=[t.lineWidth,4*t.lineWidth],n)[i];t.setLineDash(e)}function l(t,i,n,e){t.beginPath();var s=t.lineWidth%2?.5:0;t.moveTo(n,i+s),t.lineTo(e,i+s),t.stroke()}(h=s||(s={}))[h.Simple=0]="Simple",h[h.WithSteps=1]="WithSteps",function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(r||(r={}));var a=function(t,i){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)};function c(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}a(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var f=function(){return(f=Object.assign||function(t){for(var i,n=1,e=arguments.length;n<e;n++)for(var s in i=arguments[n])Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s]);return t}).apply(this,arguments)};function p(t,i){for(var n=0,e=i.length,s=t.length;n<e;n++,s++)t[s]=i[n];return t}function v(t,i){if(!t)throw new Error("Assertion failed"+(i?": "+i:""))}function y(t){if(void 0===t)throw new Error("Value is undefined");return t}function d(t){if(null===t)throw new Error("Value is null");return t}function g(t){return d(y(t))}function m(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var e=0,s=i;e<s.length;e++){var r=s[e];for(var h in r)void 0!==r[h]&&("object"!=typeof r[h]||void 0===t[h]?t[h]=r[h]:m(t[h],r[h]))}return t}function M(t){return"number"==typeof t&&isFinite(t)}function w(t){return"number"==typeof t&&t%1==0}function b(t){return"string"==typeof t}function _(t){return"boolean"==typeof t}function x(t){var i,n,e,s=t;if(!s||"object"!=typeof s)return s;for(n in i=Array.isArray(s)?[]:{},s)s.hasOwnProperty(n)&&(e=s[n],i[n]=e&&"object"==typeof e?x(e):e);return i}function C(t){return null!==t}function P(t){return null===t?void 0:t}var S=function(){function t(){this.t=[]}return t.prototype.i=function(t){this.t=t},t.prototype.h=function(t,i,n,e){this.t.forEach((function(s){t.save(),s.h(t,i,n,e),t.restore()}))},t}(),k=function(){function t(){}return t.prototype.h=function(t,i,n,e){t.save(),t.scale(i,i),this.u(t,n,e),t.restore()},t.prototype.o=function(t,i,n,e){t.save(),t.scale(i,i),this.l(t,n,e),t.restore()},t.prototype.l=function(t,i,n){},t}(),A=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.v=null,i}return c(i,t),i.prototype._=function(t){this.v=t},i.prototype.u=function(t){if(null!==this.v&&null!==this.v.M){var i=this.v.M,n=this.v,e=function(e){t.beginPath();for(var s=i.to-1;s>=i.from;--s){var r=n.m[s];t.moveTo(r.g,r.p),t.arc(r.g,r.p,e,0,2*Math.PI)}t.fill()};t.fillStyle=n.k,e(n.N+2),t.fillStyle=n.S,e(n.N)}},i}(k),T={from:0,to:1},E=function(){function t(t,i){this.C=new S,this.D=[],this.T=[],this.B=!0,this.L=t,this.A=i,this.C.i(this.D)}return t.prototype.V=function(t){var i=this,n=this.L.O();n.length!==this.D.length&&(this.T=n.map((function(){return{m:[{g:0,p:0,P:0,F:0}],S:"",k:i.L.I().layout.backgroundColor,N:0,M:null}})),this.D=this.T.map((function(t){var i=new A;return i._(t),i})),this.C.i(this.D)),this.B=!0},t.prototype.W=function(t,i,n){return this.B&&(this.R(),this.B=!1),this.C},t.prototype.R=function(){var t=this,i=this.L.O(),n=this.A.j(),e=this.L.U();i.forEach((function(i,s){var r=t.T[s],h=i.q(n);if(null!==h&&i.H()){var o=d(i.Y());r.S=h.K,r.k=h.$,r.N=h.N,r.m[0].F=h.F,r.m[0].p=i.Z().X(h.F,o.J),r.m[0].P=n,r.m[0].g=e.G(n),r.M=T}else r.M=null}))},t}(),L=function(){function t(t){this.tt=t}return t.prototype.h=function(t,i,n,e){if(null!==this.tt){var s=this.tt.it.H,r=this.tt.nt.H;if(s||r){t.save();var h=Math.round(this.tt.g*i),o=Math.round(this.tt.p*i),a=Math.ceil(this.tt.ht*i),c=Math.ceil(this.tt.st*i);t.lineCap="butt",s&&h>=0&&(t.lineWidth=Math.floor(this.tt.it.rt*i),t.strokeStyle=this.tt.it.et,t.fillStyle=this.tt.it.et,u(t,this.tt.it.ut),function(t,i,n,e){t.beginPath();var s=t.lineWidth%2?.5:0;t.moveTo(i+s,0),t.lineTo(i+s,e),t.stroke()}(t,h,0,c)),r&&o>=0&&(t.lineWidth=Math.floor(this.tt.nt.rt*i),t.strokeStyle=this.tt.nt.et,t.fillStyle=this.tt.nt.et,u(t,this.tt.nt.ut),l(t,o,0,a)),t.restore()}}},t}(),B=function(){function t(t){this.B=!0,this.at={it:{rt:1,ut:0,et:"",H:!1},nt:{rt:1,ut:0,et:"",H:!1},ht:0,st:0,g:0,p:0},this.ot=new L(this.at),this.lt=t}return t.prototype.V=function(){this.B=!0},t.prototype.W=function(t,i){return this.B&&(this.R(),this.B=!1),this.ot},t.prototype.R=function(){var t=this.lt.H(),i=d(this.lt.ft()),n=i.ct().I().crosshair,e=this.at;e.nt.H=t&&this.lt.vt(i),e.it.H=t&&this.lt._t(),e.nt.rt=n.horzLine.width,e.nt.ut=n.horzLine.style,e.nt.et=n.horzLine.color,e.it.rt=n.vertLine.width,e.it.ut=n.vertLine.style,e.it.et=n.vertLine.color,e.ht=i.dt(),e.st=i.wt(),e.g=this.lt.Mt(),e.p=this.lt.bt()},t}(),V={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function I(t){return t<0?0:t>255?255:Math.round(t)||0}var F=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,z=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,J=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,D=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function N(t){var i,n=function(t){var i;if((t=t.toLowerCase())in V&&(t=V[t]),i=D.exec(t)||J.exec(t))return[I(parseInt(i[1],10)),I(parseInt(i[2],10)),I(parseInt(i[3],10))];if(i=z.exec(t))return[I(parseInt(i[1],16)),I(parseInt(i[2],16)),I(parseInt(i[3],16))];if(i=F.exec(t))return[I(17*parseInt(i[1],16)),I(17*parseInt(i[2],16)),I(17*parseInt(i[3],16))];throw new Error("Cannot parse color: "+t)}(t);return{gt:"rgb("+n[0]+", "+n[1]+", "+n[2]+")",yt:(i=n,.199*i[0]+.687*i[1]+.114*i[2]>160?"black":"white")}}function O(t,i,n,e,s,r){t.fillRect(i+r,n,e-2*r,r),t.fillRect(i+r,n+s-r,e-2*r,r),t.fillRect(i,n,r,s),t.fillRect(i+e-r,n,r,s)}function R(t,i,n){t.save(),t.scale(i,i),n(),t.restore()}function Y(t,i,n,e,s,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(i,n,e,s),t.restore()}var U,H=function(){function t(t,i){this._(t,i)}return t.prototype._=function(t,i){this.tt=t,this.kt=i},t.prototype.h=function(t,i,n,e,s,r){if(this.tt.H){t.font=i.xt;var h=this.tt.Nt||!this.tt.St?i.Ct:0,o=i.Dt,u=i.Tt,l=i.Bt,a=i.Et,c=i.Lt,f=this.tt.At,p=Math.ceil(n.Vt(t,f)),v=i.Ot,y=i.zt+u+l,d=Math.ceil(.5*y),g=o+p+a+c+h,m=this.kt.Pt;this.kt.Ft&&(m=this.kt.Ft);var M,w,b=(m=Math.round(m))-d,_=b+y,x="right"===s,C=x?e:0,P=Math.ceil(e*r),S=C;if(t.fillStyle=this.kt.gt,t.lineWidth=1,t.lineCap="butt",f){x?(M=C-h,w=(S=C-g)+c):(S=C+g,M=C+h,w=C+o+h+a);var k=Math.max(1,Math.floor(r)),A=Math.max(1,Math.floor(o*r)),T=x?P:0,E=Math.round(b*r),L=Math.round(S*r),B=Math.round(m*r)-Math.floor(.5*r),V=B+k+(B-E),I=Math.round(M*r);t.save(),t.beginPath(),t.moveTo(T,E),t.lineTo(L,E),t.lineTo(L,V),t.lineTo(T,V),t.fill(),t.fillStyle=this.tt.$,t.fillRect(x?P-A:0,E,A,V-E),this.tt.Nt&&(t.fillStyle=this.kt.et,t.fillRect(T,B,I-T,k)),t.textAlign="left",t.fillStyle=this.kt.et,R(t,r,(function(){t.fillText(f,w,_-l-v)})),t.restore()}}},t.prototype.wt=function(t,i){return this.tt.H?t.zt+t.Tt+t.Bt:0},t}(),Q=function(){function t(t){this.It={Pt:0,et:"#FFF",gt:"#000"},this.Wt={At:"",H:!1,Nt:!0,St:!1,$:""},this.Rt={At:"",H:!1,Nt:!1,St:!0,$:""},this.B=!0,this.jt=new(t||H)(this.Wt,this.It),this.Ut=new(t||H)(this.Rt,this.It)}return t.prototype.At=function(){return this.Wt.At},t.prototype.Pt=function(){return this.qt(),this.It.Pt},t.prototype.V=function(){this.B=!0},t.prototype.wt=function(t,i){return void 0===i&&(i=!1),Math.max(this.jt.wt(t,i),this.Ut.wt(t,i))},t.prototype.Ht=function(){return this.It.Ft||0},t.prototype.Yt=function(t){this.It.Ft=t},t.prototype.Kt=function(){return this.qt(),this.Wt.H||this.Rt.H},t.prototype.$t=function(){return this.qt(),this.Wt.H},t.prototype.W=function(t){return this.qt(),this.Wt.Nt=this.Wt.Nt&&t.I().drawTicks,this.Rt.Nt=this.Rt.Nt&&t.I().drawTicks,this.jt._(this.Wt,this.It),this.Ut._(this.Rt,this.It),this.jt},t.prototype.Xt=function(){return this.qt(),this.jt._(this.Wt,this.It),this.Ut._(this.Rt,this.It),this.Ut},t.prototype.qt=function(){this.B&&(this.Wt.Nt=!0,this.Rt.Nt=!1,this.Zt(this.Wt,this.Rt,this.It))},t}(),q=function(t){function i(i,n,e){var s=t.call(this)||this;return s.lt=i,s.Jt=n,s.Gt=e,s}return c(i,t),i.prototype.Zt=function(t,i,n){t.H=!1;var e=this.lt.I().horzLine;if(e.labelVisible){var s=this.Jt.Y();if(this.lt.H()&&!this.Jt.Qt()&&null!==s){var r=N(e.labelBackgroundColor);n.gt=r.gt,n.et=r.yt;var h=this.Gt(this.Jt);n.Pt=h.Pt,t.At=this.Jt.ti(h.F,s),t.H=!0}}},i}(Q),W=/[1-9]/g,Z=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n){var e=this;if(null!==this.tt&&!1!==this.tt.H&&0!==this.tt.At.length){t.font=i.xt;var s=Math.round(i.ii.Vt(t,this.tt.At,W));if(!(s<=0)){t.save();var r=i.ni,h=s+2*r,o=h/2,u=this.tt.dt,l=this.tt.Pt,a=Math.floor(l-o)+.5;a<0?(l+=Math.abs(0-a),a=Math.floor(l-o)+.5):a+h>u&&(l-=Math.abs(u-(a+h)),a=Math.floor(l-o)+.5);var c=a+h,f=0+i.Dt+i.Tt+i.zt+i.Bt;t.fillStyle=this.tt.gt;var p=Math.round(a*n),v=Math.round(0*n),y=Math.round(c*n),g=Math.round(f*n);t.fillRect(p,v,y-p,g-v);var m=Math.round(this.tt.Pt*n),M=v,w=Math.round((M+i.Dt+i.Ct)*n);t.fillStyle=this.tt.et;var b=Math.max(1,Math.floor(n)),_=Math.floor(.5*n);t.fillRect(m-_,M,b,w-M);var x=f-i.Ot-i.Bt;t.textAlign="left",t.fillStyle=this.tt.et,R(t,n,(function(){t.fillText(d(e.tt).At,a+r,x)})),t.restore()}}},t}(),$=function(){function t(t,i,n){this.B=!0,this.ot=new Z,this.at={H:!1,gt:"#4c525e",et:"white",At:"",dt:0,Pt:NaN},this.A=t,this.hi=i,this.Gt=n}return t.prototype.V=function(){this.B=!0},t.prototype.W=function(){return this.B&&(this.R(),this.B=!1),this.ot._(this.at),this.ot},t.prototype.R=function(){var t=this.at;t.H=!1;var i=this.A.I().vertLine;if(i.labelVisible){var n=this.hi.U();if(!n.Qt()){var e=n.si(this.A.j());t.dt=n.dt();var s=this.Gt();if(s.P){t.Pt=s.Pt,t.At=n.ri(d(e)),t.H=!0;var r=N(i.labelBackgroundColor);t.gt=r.gt,t.et=r.yt}}}},t}(),X=function(){function t(){this.ei=null,this.ui=0}return t.prototype.ai=function(){return this.ui},t.prototype.oi=function(t){this.ui=t},t.prototype.Z=function(){return this.ei},t.prototype.li=function(t){this.ei=t},t.prototype.fi=function(t,i){return[]},t.prototype.ci=function(t){return[]},t.prototype.vi=function(){return[]},t.prototype.H=function(){return!0},t}();!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet"}(U||(U={}));var j=function(t){function i(i,n){var e,s,r=t.call(this)||this;r._i=null,r.di=NaN,r.wi=0,r.Mi=!0,r.bi=new Map,r.mi=!1,r.gi=NaN,r.pi=NaN,r.yi=NaN,r.ki=NaN,r.hi=i,r.xi=n,r.Ni=new E(i,r),r.Si=(e=function(){return r.di},s=function(){return r.pi},function(t){var i=s(),n=e();if(t===d(r._i).Ci())return{F:n,Pt:i};var h=d(t.Y());return{F:t.Di(i,h),Pt:i}});var h=function(){return{P:r.hi.U().si(r.wi),Pt:r.Mt()}};return r.Ti=new $(r,i,h),r.Bi=new B(r),r}return c(i,t),i.prototype.I=function(){return this.xi},i.prototype.Ei=function(t,i){this.yi=t,this.ki=i},i.prototype.Li=function(){this.yi=NaN,this.ki=NaN},i.prototype.Ai=function(){return this.yi},i.prototype.Vi=function(){return this.ki},i.prototype.Oi=function(t,i,n){this.mi||(this.mi=!0),this.Mi=!0,this.zi(t,i,n)},i.prototype.j=function(){return this.wi},i.prototype.Mt=function(){return this.gi},i.prototype.bt=function(){return this.pi},i.prototype.H=function(){return this.Mi},i.prototype.Pi=function(){this.Mi=!1,this.Fi(),this.di=NaN,this.gi=NaN,this.pi=NaN,this._i=null,this.Li()},i.prototype.ci=function(t){return null!==this._i?[this.Bi,this.Ni]:[]},i.prototype.vt=function(t){return t===this._i&&this.xi.horzLine.visible},i.prototype._t=function(){return this.xi.vertLine.visible},i.prototype.fi=function(t,i){this.Mi&&this._i===t||this.bi.clear();var n=[];return this._i===t&&n.push(this.Ii(this.bi,i,this.Si)),n},i.prototype.vi=function(){return this.Mi?[this.Ti]:[]},i.prototype.ft=function(){return this._i},i.prototype.Wi=function(){this.Bi.V(),this.bi.forEach((function(t){return t.V()})),this.Ti.V(),this.Ni.V()},i.prototype.Ri=function(t){return t&&!t.Ci().Qt()?t.Ci():null},i.prototype.zi=function(t,i,n){this.ji(t,i,n)&&this.Wi()},i.prototype.ji=function(t,i,n){var e=this.gi,s=this.pi,r=this.di,h=this.wi,o=this._i,u=this.Ri(n);this.wi=t,this.gi=isNaN(t)?NaN:this.hi.U().G(t),this._i=n;var l=null!==u?u.Y():null;return null!==u&&null!==l?(this.di=i,this.pi=u.X(i,l)):(this.di=NaN,this.pi=NaN),e!==this.gi||s!==this.pi||h!==this.wi||r!==this.di||o!==this._i},i.prototype.Fi=function(){var t=this.hi.O().map((function(t){return t.qi().Ui()})).filter(C),i=0===t.length?null:Math.max.apply(Math,t);this.wi=null!==i?i:NaN},i.prototype.Ii=function(t,i,n){var e=t.get(i);return void 0===e&&(e=new q(this,i,n),t.set(i,e)),e},i}(X);function G(t,i){if(!M(t))return"n/a";if(!w(i))throw new TypeError("invalid length");if(i<0||i>16)throw new TypeError("invalid length");return 0===i?t.toString():("0000000000000000"+t.toString()).slice(-i)}var K=function(){function t(t,i){if(i||(i=1),M(t)&&w(t)||(t=100),t<0)throw new TypeError("invalid base");this.Jt=t,this.Hi=i,this.Yi()}return t.prototype.format=function(t){var i=t<0?"\u2212":"";return t=Math.abs(t),i+this.Ki(t)},t.prototype.Yi=function(){if(this.$i=0,this.Jt>0&&this.Hi>0)for(var t=this.Jt;t>1;)t/=10,this.$i++},t.prototype.Ki=function(t){var i=this.Jt/this.Hi,n=Math.floor(t),e="",s=void 0!==this.$i?this.$i:NaN;if(i>1){var r=+(Math.round(t*i)-n*i).toFixed(this.$i);r>=i&&(r-=i,n+=1),e="."+G(+r.toFixed(this.$i)*this.Hi,s)}else n=Math.round(n*i)/i,s>0&&(e="."+G(0,s));return n.toFixed(0)+e},t}(),tt=function(t){function i(i){return void 0===i&&(i=100),t.call(this,i)||this}return c(i,t),i.prototype.format=function(i){return t.prototype.format.call(this,i)+"%"},i}(K),it=function(){function t(){this.Xi=[]}return t.prototype.Zi=function(t,i,n){var e={Ji:t,Gi:i,Qi:!0===n};this.Xi.push(e)},t.prototype.tn=function(t){var i=this.Xi.findIndex((function(i){return t===i.Ji}));i>-1&&this.Xi.splice(i,1)},t.prototype.nn=function(t){this.Xi=this.Xi.filter((function(i){return i.Gi===t}))},t.prototype.hn=function(t,i){var n=p([],this.Xi);this.Xi=this.Xi.filter((function(t){return!t.Qi})),n.forEach((function(n){return n.Ji(t,i)}))},t.prototype.sn=function(){return this.Xi.length>0},t.prototype.rn=function(){this.Xi=[]},t}(),nt=function(){function t(t,i){this.en=t,this.un=i}return t.prototype.an=function(t){return null!==t&&this.en===t.en&&this.un===t.un},t.prototype.on=function(){return new t(this.en,this.un)},t.prototype.ln=function(){return this.en},t.prototype.fn=function(){return this.un},t.prototype.cn=function(){return this.un-this.en},t.prototype.Qt=function(){return this.un===this.en||Number.isNaN(this.un)||Number.isNaN(this.en)},t.prototype.vn=function(i){return null===i?this:new t(Math.min(this.ln(),i.ln()),Math.max(this.fn(),i.fn()))},t.prototype._n=function(t){if(M(t)&&0!==this.un-this.en){var i=.5*(this.un+this.en),n=this.un-i,e=this.en-i;n*=t,e*=t,this.un=i+n,this.en=i+e}},t.prototype.dn=function(t){M(t)&&(this.un+=t,this.en+=t)},t.prototype.wn=function(){return{minValue:this.en,maxValue:this.un}},t.Mn=function(i){return null===i?null:new t(i.minValue,i.maxValue)},t}();function et(t,i,n){return Math.min(Math.max(t,i),n)}function st(t,i,n){return i-t<=n}function rt(t){return t<=0?NaN:Math.log(t)/Math.log(10)}function ht(t){var i=Math.ceil(t);return i%2!=0?i-1:i}function ot(t){var i=Math.ceil(t);return i%2==0?i-1:i}function ut(t,i){var n=100*(t-i)/i;return i<0?-n:n}function lt(t,i){var n=ut(t.ln(),i),e=ut(t.fn(),i);return new nt(n,e)}function at(t,i){var n=100*(t-i)/i+100;return i<0?-n:n}function ct(t,i){var n=at(t.ln(),i),e=at(t.fn(),i);return new nt(n,e)}function ft(t){var i=Math.abs(t);if(i<1e-8)return 0;var n=rt(i+1e-4)+4;return t<0?-n:n}function pt(t){var i=Math.abs(t);if(i<1e-8)return 0;var n=Math.pow(10,i-4)-1e-4;return t<0?-n:n}function vt(t){if(null===t)return null;var i=ft(t.ln()),n=ft(t.fn());return new nt(i,n)}var yt,dt=function(){function t(t,i){if(this.bn=t,this.mn=i,function(t){if(t<0)return!1;for(var i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.bn))this.gn=[2,2.5,2];else{this.gn=[];for(var n=this.bn;1!==n;){if(n%2==0)this.gn.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.gn.push(2,2.5),n/=5}if(this.gn.length>100)throw new Error("something wrong with base")}}}return t.prototype.pn=function(t,i,n){for(var e,s=0===this.bn?0:1/this.bn,r=1e-9,h=Math.pow(10,Math.max(0,Math.ceil(rt(t-i)))),o=0,u=this.mn[0];;){var l=st(h,s,r)&&h>s+r,a=st(h,n*u,r),c=st(h,1,r);if(!(l&&a&&c))break;h/=u,u=this.mn[++o%this.mn.length]}if(h<=s+r&&(h=s),h=Math.max(1,h),this.gn.length>0&&(e=h,1,r,Math.abs(e-1)<1e-9))for(o=0,u=this.gn[0];st(h,n*u,r)&&h>s+r;)h/=u,u=this.gn[++o%this.gn.length];return h},t}(),gt=function(){function t(t,i,n,e){this.yn=[],this.Jt=t,this.bn=i,this.kn=n,this.xn=e}return t.prototype.pn=function(t,i){if(t<i)throw new Error("high < low");var n=this.Jt.wt(),e=(t-i)*this.Nn()/n,s=new dt(this.bn,[2,2.5,2]),r=new dt(this.bn,[2,2,2.5]),h=new dt(this.bn,[2.5,2,2]),o=[];return o.push(s.pn(t,i,e),r.pn(t,i,e),h.pn(t,i,e)),function(t){if(t.length<1)throw Error("array is empty");for(var i=t[0],n=1;n<t.length;++n)t[n]<i&&(i=t[n]);return i}(o)},t.prototype.Sn=function(){var t=this.Jt,i=t.Y();if(null!==i){var n=t.wt(),e=this.kn(n-1,i),s=this.kn(0,i),r=this.Jt.I().entireTextOnly?this.Cn()/2:0,h=r,o=n-1-r,u=Math.max(e,s),l=Math.min(e,s);if(u!==l){for(var a=this.pn(u,l),c=u%a,f=u>=l?1:-1,p=null,v=0,y=u-(c+=c<0?a:0);y>l;y-=a){var d=this.xn(y,i,!0);null!==p&&Math.abs(d-p)<this.Nn()||d<h||d>o||(v<this.yn.length?(this.yn[v].Dn=d,this.yn[v].Tn=t.Bn(y)):this.yn.push({Dn:d,Tn:t.Bn(y)}),v++,p=d,t.En()&&(a=this.pn(y*f,l)))}this.yn.length=v}else this.yn=[]}else this.yn=[]},t.prototype.Ln=function(){return this.yn},t.prototype.Cn=function(){return this.Jt.zt()},t.prototype.Nn=function(){return Math.ceil(2.5*this.Cn())},t}();function mt(t){return t.slice().sort((function(t,i){return d(t.ai())-d(i.ai())}))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(yt||(yt={}));var Mt,wt=new tt,bt=new K(100,1),_t=function(){function t(t,i,n,e){this.An=0,this.Vn=null,this.On=null,this.zn=null,this.Pn={Fn:!1,In:null},this.Wn=0,this.Rn=0,this.jn=new it,this.Un=new it,this.qn=[],this.Hn=null,this.Yn=null,this.Kn=null,this.$n=null,this.Xn=bt,this.Zn=t,this.xi=i,this.Jn=n,this.Gn=e,this.Qn=new gt(this,100,this.th.bind(this),this.ih.bind(this))}return t.prototype.nh=function(){return this.Zn},t.prototype.I=function(){return this.xi},t.prototype.hh=function(t){if(m(this.xi,t),this.sh(),void 0!==t.mode&&this.rh({eh:t.mode}),void 0!==t.scaleMargins){var i=y(t.scaleMargins.top),n=y(t.scaleMargins.bottom);if(i<0||i>1)throw new Error("Invalid top margin - expect value between 0 and 1, given="+i);if(n<0||n>1||i+n>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given="+n);if(i+n>1)throw new Error("Invalid margins - sum of margins must be less than 1, given="+(i+n));this.uh(),this.Yn=null}},t.prototype.ah=function(){return this.xi.autoScale},t.prototype.En=function(){return 1===this.xi.mode},t.prototype.oh=function(){return 2===this.xi.mode},t.prototype.lh=function(){return 3===this.xi.mode},t.prototype.eh=function(){return{fh:this.xi.autoScale,_h:this.xi.invertScale,eh:this.xi.mode}},t.prototype.rh=function(t){var i=this.eh(),n=null;void 0!==t.fh&&(this.xi.autoScale=t.fh),void 0!==t.eh&&(this.xi.mode=t.eh,2!==t.eh&&3!==t.eh||(this.xi.autoScale=!0),this.Pn.Fn=!1),1===i.eh&&t.eh!==i.eh&&(function(t){if(null===t)return!1;var i=pt(t.ln()),n=pt(t.fn());return isFinite(i)&&isFinite(n)}(this.On)?null!==(n=function(t){if(null===t)return null;var i=pt(t.ln()),n=pt(t.fn());return new nt(i,n)}(this.On))&&this.dh(n):this.xi.autoScale=!0),1===t.eh&&t.eh!==i.eh&&null!==(n=vt(this.On))&&this.dh(n);var e=i.eh!==this.xi.mode;e&&(2===i.eh||this.oh())&&this.sh(),e&&(3===i.eh||this.lh())&&this.sh(),void 0!==t._h&&i._h!==t._h&&(this.xi.invertScale=t._h,this.wh()),this.Un.hn(i,this.eh())},t.prototype.Mh=function(){return this.Un},t.prototype.zt=function(){return this.Jn.fontSize},t.prototype.wt=function(){return this.An},t.prototype.bh=function(t){this.An!==t&&(this.An=t,this.uh(),this.Yn=null)},t.prototype.mh=function(){if(this.Vn)return this.Vn;var t=this.wt()-this.gh()-this.ph();return this.Vn=t,t},t.prototype.yh=function(){return this.kh(),this.On},t.prototype.dh=function(t,i){var n=this.On;(i||null===n&&null!==t||null!==n&&!n.an(t))&&(this.Yn=null,this.On=t)},t.prototype.Qt=function(){return this.kh(),0===this.An||!this.On||this.On.Qt()},t.prototype.xh=function(t){return this._h()?t:this.wt()-1-t},t.prototype.X=function(t,i){return this.oh()?t=ut(t,i):this.lh()&&(t=at(t,i)),this.ih(t,i)},t.prototype.Nh=function(t,i,n){this.kh();for(var e=this.ph(),s=d(this.yh()),r=s.ln(),h=s.fn(),o=this.mh()-1,u=this._h(),l=o/(h-r),a=void 0===n?0:n.from,c=void 0===n?t.length:n.to,f=this.Sh(),p=a;p<c;p++){var v=t[p],y=v.F;if(!isNaN(y)){var g=y;null!==f&&(g=f(v.F,i));var m=e+l*(g-r),M=u?m:this.An-1-m;v.p=M}}},t.prototype.Ch=function(t,i,n){this.kh();for(var e=this.ph(),s=d(this.yh()),r=s.ln(),h=s.fn(),o=this.mh()-1,u=this._h(),l=o/(h-r),a=void 0===n?0:n.from,c=void 0===n?t.length:n.to,f=this.Sh(),p=a;p<c;p++){var v=t[p],y=v.open,g=v.high,m=v.low,M=v.close;null!==f&&(y=f(v.open,i),g=f(v.high,i),m=f(v.low,i),M=f(v.close,i));var w=e+l*(y-r),b=u?w:this.An-1-w;v.Dh=b,w=e+l*(g-r),b=u?w:this.An-1-w,v.Th=b,w=e+l*(m-r),b=u?w:this.An-1-w,v.Bh=b,w=e+l*(M-r),b=u?w:this.An-1-w,v.Eh=b}},t.prototype.Di=function(t,i){var n=this.th(t,i);return this.Lh(n,i)},t.prototype.Lh=function(t,i){var n=t;return this.oh()?n=function(t,i){return i<0&&(t=-t),t/100*i+i}(n,i):this.lh()&&(n=function(t,i){return t-=100,i<0&&(t=-t),t/100*i+i}(n,i)),n},t.prototype.Ah=function(){return this.qn},t.prototype.Vh=function(){if(this.Hn)return this.Hn;for(var t=[],i=0;i<this.qn.length;i++){var n=this.qn[i];null===n.ai()&&n.oi(i+1),t.push(n)}return t=mt(t),this.Hn=t,this.Hn},t.prototype.Oh=function(t){-1===this.qn.indexOf(t)&&(this.qn.push(t),this.sh(),this.zh())},t.prototype.Ph=function(t){var i=this.qn.indexOf(t);if(-1===i)throw new Error("source is not attached to scale");this.qn.splice(i,1),0===this.qn.length&&(this.rh({fh:!0}),this.dh(null)),this.sh(),this.zh()},t.prototype.Y=function(){for(var t=null,i=0,n=this.qn;i<n.length;i++){var e=n[i].Y();null!==e&&(null===t||e.Fh<t.Fh)&&(t=e)}return null===t?null:t.J},t.prototype._h=function(){return this.xi.invertScale},t.prototype.Ln=function(){return this.Yn||(this.Qn.Sn(),this.Yn=this.Qn.Ln(),this.jn.hn()),this.Yn},t.prototype.Ih=function(){return this.jn},t.prototype.Wh=function(t){this.oh()||this.lh()||null===this.Kn&&null===this.zn&&(this.Qt()||(this.Kn=this.An-t,this.zn=d(this.yh()).on()))},t.prototype.Rh=function(t){if(!this.oh()&&!this.lh()&&null!==this.Kn){this.rh({fh:!1}),(t=this.An-t)<0&&(t=0);var i=(this.Kn+.2*(this.An-1))/(t+.2*(this.An-1)),n=d(this.zn).on();i=Math.max(i,.1),n._n(i),this.dh(n)}},t.prototype.jh=function(){this.oh()||this.lh()||(this.Kn=null,this.zn=null)},t.prototype.Uh=function(t){this.ah()||null===this.$n&&null===this.zn&&(this.Qt()||(this.$n=t,this.zn=d(this.yh()).on()))},t.prototype.qh=function(t){if(!this.ah()&&null!==this.$n){var i=d(this.yh()).cn()/(this.mh()-1),n=t-this.$n;this._h()&&(n*=-1);var e=n*i,s=d(this.zn).on();s.dn(e),this.dh(s,!0),this.Yn=null}},t.prototype.Hh=function(){this.ah()||null!==this.$n&&(this.$n=null,this.zn=null)},t.prototype.Yh=function(){return this.Xn||this.sh(),this.Xn},t.prototype.ti=function(t,i){switch(this.xi.mode){case 2:return this.Yh().format(ut(t,i));case 3:return this.Yh().format(at(t,i));default:return this.Kh(t)}},t.prototype.Bn=function(t){switch(this.xi.mode){case 2:case 3:return this.Yh().format(t);default:return this.Kh(t)}},t.prototype.$h=function(t){return this.Kh(t,d(this.Xh()).Yh())},t.prototype.Zh=function(t,i){return t=ut(t,i),wt.format(t)},t.prototype.Jh=function(){return this.qn},t.prototype.Gh=function(t){this.Pn={In:t,Fn:!1}},t.prototype.Wi=function(){this.qn.forEach((function(t){return t.Wi()}))},t.prototype.sh=function(){this.Yn=null;var t=this.Xh(),i=100;null!==t&&(i=Math.round(1/t.Qh())),this.Xn=bt,this.oh()?(this.Xn=wt,i=100):this.lh()?(this.Xn=new K(100,1),i=100):null!==t&&(this.Xn=t.Yh()),this.Qn=new gt(this,i,this.th.bind(this),this.ih.bind(this)),this.Qn.Sn()},t.prototype.zh=function(){this.Hn=null},t.prototype.Xh=function(){return this.qn[0]||null},t.prototype.gh=function(){return this._h()?this.xi.scaleMargins.bottom*this.wt()+this.Rn:this.xi.scaleMargins.top*this.wt()+this.Wn},t.prototype.ph=function(){return this._h()?this.xi.scaleMargins.top*this.wt()+this.Wn:this.xi.scaleMargins.bottom*this.wt()+this.Rn},t.prototype.kh=function(){this.Pn.Fn||(this.Pn.Fn=!0,this.ts())},t.prototype.uh=function(){this.Vn=null},t.prototype.ih=function(t,i){if(this.kh(),this.Qt())return 0;t=this.En()&&t?ft(t):t;var n=d(this.yh()),e=this.ph()+(this.mh()-1)*(t-n.ln())/n.cn();return this.xh(e)},t.prototype.th=function(t,i){if(this.kh(),this.Qt())return 0;var n=this.xh(t),e=d(this.yh()),s=e.ln()+e.cn()*((n-this.ph())/(this.mh()-1));return this.En()?pt(s):s},t.prototype.wh=function(){this.Yn=null,this.Qn.Sn()},t.prototype.ts=function(){var t=this.Pn.In;if(null!==t){for(var i=null,n=0,e=0,s=0,r=this.Jh();s<r.length;s++){var h=r[s];if(h.H()){var o=h.Y();if(null!==o){var u=h.ns(t.hs(),t.ss()),l=u&&u.yh();if(null!==l){switch(this.xi.mode){case 1:l=vt(l);break;case 2:l=lt(l,o.J);break;case 3:l=ct(l,o.J)}if(i=null===i?l:i.vn(d(l)),null!==u){var a=u.rs();null!==a&&(n=Math.max(n,a.above),e=Math.max(n,a.below))}}}}}if(n===this.Wn&&e===this.Rn||(this.Wn=n,this.Rn=e,this.Yn=null,this.uh()),null!==i){if(i.ln()===i.fn()){var c=this.Xh(),f=5*(null===c||this.oh()||this.lh()?1:c.Qh());i=new nt(i.ln()-f,i.fn()+f)}this.dh(i)}else null===this.On&&this.dh(new nt(-.5,.5));this.Pn.Fn=!0}},t.prototype.Sh=function(){return this.oh()?ut:this.lh()?at:this.En()?ft:null},t.prototype.Kh=function(t,i){return void 0===this.Gn.priceFormatter?(void 0===i&&(i=this.Yh()),i.format(t)):this.Gn.priceFormatter(t)},t}();function xt(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}!function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Mt||(Mt={}));var Ct=function(t){return t.getUTCFullYear()};var Pt=function(){function t(t,i){void 0===t&&(t="yyyy-MM-dd"),void 0===i&&(i="default"),this.es=t,this.us=i}return t.prototype.os=function(t){return function(t,i,n){return i.replace(/yyyy/g,function(t){return G(Ct(t),4)}(t)).replace(/yy/g,function(t){return G(Ct(t)%100,2)}(t)).replace(/MMMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})}(t,n)).replace(/MMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})}(t,n)).replace(/MM/g,function(t){return G(function(t){return t.getUTCMonth()+1}(t),2)}(t)).replace(/dd/g,function(t){return G(function(t){return t.getUTCDate()}(t),2)}(t))}(t,this.es,this.us)},t}(),St=function(){function t(t){this.ls=t||"%h:%m:%s"}return t.prototype.os=function(t){return this.ls.replace("%h",G(t.getUTCHours(),2)).replace("%m",G(t.getUTCMinutes(),2)).replace("%s",G(t.getUTCSeconds(),2))},t}(),kt={fs:"yyyy-MM-dd",cs:"%h:%m:%s",vs:" ",_s:"default"},At=function(){function t(t){void 0===t&&(t={});var i=f(f({},kt),t);this.ds=new Pt(i.fs,i._s),this.ws=new St(i.cs),this.Ms=i.vs}return t.prototype.os=function(t){return""+this.ds.os(t)+this.Ms+this.ws.os(t)},t}(),Tt=function(){function t(t,i){void 0===i&&(i=50),this.bs=0,this.gs=1,this.ps=1,this.ys=new Map,this.ks=new Map,this.xs=t,this.Ns=i}return t.prototype.os=function(t){var i=void 0===t.Ss?new Date(1e3*t.Cs).getTime():new Date(Date.UTC(t.Ss.year,t.Ss.month-1,t.Ss.day)).getTime(),n=this.ys.get(i);if(void 0!==n)return n.Ds;if(this.bs===this.Ns){var e=this.ks.get(this.ps);this.ks.delete(this.ps),this.ys.delete(y(e)),this.ps++,this.bs--}var s=this.xs(t);return this.ys.set(i,{Ds:s,Ts:this.gs}),this.ks.set(this.gs,i),this.bs++,this.gs++,s},t}(),Et=function(){function t(t,i){v(t<=i,"right should be >= left"),this.Bs=t,this.Es=i}return t.prototype.hs=function(){return this.Bs},t.prototype.ss=function(){return this.Es},t.prototype.Ls=function(){return this.Es-this.Bs+1},t.prototype.As=function(t){return this.Bs<=t&&t<=this.Es},t.prototype.an=function(t){return this.Bs===t.hs()&&this.Es===t.ss()},t}();function Lt(t,i){return null===t||null===i?t===i:t.an(i)}var Bt,Vt=function(){function t(){this.Vs=new Map,this.ys=null}return t.prototype.Os=function(t){var i=this;this.ys=null,this.Vs.clear(),t.forEach((function(t,n){var e=i.Vs.get(t.zs);void 0===e&&(e=[],i.Vs.set(t.zs,e)),e.push({Ps:n,P:t.P,Fs:t.zs})}))},t.prototype.Is=function(t,i){var n=Math.ceil(i/t);return null!==this.ys&&this.ys.Ws===n||(this.ys={Ln:this.Rs(n),Ws:n}),this.ys.Ln},t.prototype.Rs=function(t){for(var i=[],n=0,e=Array.from(this.Vs.keys()).sort((function(t,i){return i-t}));n<e.length;n++){var s=e[n];if(this.Vs.get(s)){var r=i;i=[];for(var h=r.length,o=0,u=y(this.Vs.get(s)),l=u.length,a=1/0,c=-1/0,f=0;f<l;f++){for(var p=u[f],v=p.Ps;o<h;){var d=r[o],g=d.Ps;if(!(g<v)){a=g;break}o++,i.push(d),c=g,a=1/0}a-v>=t&&v-c>=t&&(i.push(p),c=v)}for(;o<h;o++)i.push(r[o])}}return i},t}(),It=function(){function t(t){this.js=t}return t.prototype.Us=function(){return null===this.js?null:new Et(Math.floor(this.js.hs()),Math.ceil(this.js.ss()))},t.prototype.qs=function(){return this.js},t.Hs=function(){return new t(null)},t}();!function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Bt||(Bt={}));var Ft=function(){function t(t,i,n){this.Ys=0,this.Ks=null,this.$s=[],this.$n=null,this.Kn=null,this.Xs=new Vt,this.Zs=new Map,this.Js=It.Hs(),this.Gs=!0,this.Qs=new it,this.tr=new it,this.ir=new it,this.nr=null,this.hr=null,this.sr=[],this.xi=i,this.Gn=n,this.rr=i.rightOffset,this.er=i.barSpacing,this.hi=t,this.ur()}return t.prototype.I=function(){return this.xi},t.prototype.ar=function(t){m(this.Gn,t),this.lr(),this.ur()},t.prototype.hh=function(t,i){var n;m(this.xi,t),this.xi.fixLeftEdge&&this.cr(),this.xi.fixRightEdge&&this.vr(),void 0!==t.barSpacing&&this.hi._r(t.barSpacing),void 0!==t.rightOffset&&this.hi.dr(t.rightOffset),void 0!==t.minBarSpacing&&this.hi._r(null!==(n=t.barSpacing)&&void 0!==n?n:this.er),this.lr(),this.ur(),this.ir.hn()},t.prototype.si=function(t){var i;return(null===(i=this.$s[t])||void 0===i?void 0:i.P)||null},t.prototype.wr=function(t,i){if(this.$s.length<1)return null;if(t.Cs>this.$s[this.$s.length-1].P.Cs)return i?this.$s.length-1:null;for(var n=0;n<this.$s.length;++n){if(t.Cs===this.$s[n].P.Cs)return n;if(t.Cs<this.$s[n].P.Cs)return i?n:null}return null},t.prototype.Qt=function(){return 0===this.Ys||0===this.$s.length},t.prototype.Mr=function(){return this.br(),this.Js.Us()},t.prototype.mr=function(){return this.br(),this.Js.qs()},t.prototype.gr=function(){var t=this.Mr();if(null===t)return null;var i={from:t.hs(),to:t.ss()};return this.pr(i)},t.prototype.pr=function(t){var i=Math.round(t.from),n=Math.round(t.to),e=d(this.yr()),s=d(this.kr());return{from:d(this.si(Math.max(e,i))),to:d(this.si(Math.min(s,n)))}},t.prototype.Nr=function(t){return{from:d(this.wr(t.from,!0)),to:d(this.wr(t.to,!0))}},t.prototype.Sr=function(){return this.Xs},t.prototype.dt=function(){return this.Ys},t.prototype.Cr=function(t){if(isFinite(t)&&!(t<=0)&&this.Ys!==t){if(this.xi.lockVisibleTimeRangeOnResize&&this.Ys){var i=this.er*t/this.Ys;this.Dr(i)}if(this.xi.fixLeftEdge){var n=this.Mr();if(null!==n&&n.hs()<=0){var e=this.Ys-t;this.rr-=Math.round(e/this.er)+1}}this.Ys=t,this.Gs=!0,this.Tr(),this.Br()}},t.prototype.G=function(t){if(this.Qt()||!w(t))return 0;var i=this.Er()+this.rr-t;return this.Ys-(i+.5)*this.er-1},t.prototype.Lr=function(t,i){for(var n=this.Er(),e=void 0===i?0:i.from,s=void 0===i?t.length:i.to,r=e;r<s;r++){var h=t[r].P,o=n+this.rr-h,u=this.Ys-(o+.5)*this.er-1;t[r].g=u}},t.prototype.Ar=function(t){return Math.ceil(this.Vr(t))},t.prototype.dr=function(t){this.Gs=!0,this.rr=t,this.Br(),this.hi.Or(),this.hi.zr()},t.prototype.Pr=function(){return this.er},t.prototype._r=function(t){this.Dr(t),this.Br(),this.hi.Or(),this.hi.zr()},t.prototype.Fr=function(){return this.rr},t.prototype.Ln=function(){if(this.Qt())return null;if(null!==this.hr)return this.hr;for(var t=this.er,i=5*(this.hi.I().layout.fontSize+4),n=Math.round(i/t),e=d(this.Mr()),s=Math.max(e.hs(),e.hs()-n),r=Math.max(e.ss(),e.ss()-n),h=0,o=0,u=this.Xs.Is(t,i);o<u.length;o++){var l=u[o];if(s<=l.Ps&&l.Ps<=r){var a=this.si(l.Ps);if(null!==a){if(h<this.sr.length){var c=this.sr[h];c.Dn=this.G(l.Ps),c.Tn=this.Ir(a,l.Fs),c.Fs=l.Fs}else this.sr.push({Dn:this.G(l.Ps),Tn:this.Ir(a,l.Fs),Fs:l.Fs});h++}}}return this.sr.length=h,this.hr=this.sr,this.sr},t.prototype.Wr=function(){this.Gs=!0,this._r(this.xi.barSpacing),this.dr(this.xi.rightOffset)},t.prototype.Rr=function(t){this.Gs=!0,this.Ks=t,this.Br(),this.cr()},t.prototype.jr=function(t,i){var n=this.Vr(t),e=this.Pr(),s=e+i*(e/10);this._r(s),this.xi.rightBarStaysOnScroll||this.dr(this.Fr()+(n-this.Vr(t)))},t.prototype.Wh=function(t){this.$n&&this.Hh(),null===this.Kn&&null===this.nr&&(this.Qt()||(this.Kn=t,this.Ur()))},t.prototype.Rh=function(t){if(null!==this.nr){var i=et(this.Ys-t,0,this.Ys),n=et(this.Ys-d(this.Kn),0,this.Ys);0!==i&&0!==n&&this._r(this.nr.Pr*i/n)}},t.prototype.jh=function(){null!==this.Kn&&(this.Kn=null,this.qr())},t.prototype.Uh=function(t){null===this.$n&&null===this.nr&&(this.Qt()||(this.$n=t,this.Ur()))},t.prototype.qh=function(t){if(null!==this.$n){var i=(this.$n-t)/this.Pr();this.rr=d(this.nr).Fr+i,this.Gs=!0,this.Br()}},t.prototype.Hh=function(){null!==this.$n&&(this.$n=null,this.qr())},t.prototype.Hr=function(){this.Yr(this.xi.rightOffset)},t.prototype.Yr=function(t,i){var n=this;if(void 0===i&&(i=400),!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var e=this.rr,s=Date.now(),r=function(){var h=(Date.now()-s)/i,o=h>=1,u=o?t:e+(t-e)*h;n.dr(u),o||setTimeout(r,20)};r()},t.prototype.V=function(t){this.Gs=!0,this.$s=t,this.Xs.Os(t),this.Br()},t.prototype.Kr=function(){return this.Qs},t.prototype.$r=function(){return this.tr},t.prototype.Xr=function(){return this.ir},t.prototype.Er=function(){return this.Ks||0},t.prototype.Zr=function(t){var i=t.Ls();this.Dr(this.Ys/i),this.rr=t.ss()-this.Er(),this.Br(),this.Gs=!0,this.hi.Or(),this.hi.zr()},t.prototype.Jr=function(){var t=this.yr(),i=this.kr();null!==t&&null!==i&&this.Zr(new Et(t,i+this.xi.rightOffset))},t.prototype.Gr=function(t){var i=new Et(t.from,t.to);this.Zr(i)},t.prototype.ri=function(t){return void 0!==this.Gn.timeFormatter?this.Gn.timeFormatter(t.Ss||t.Cs):this.Qr.os(new Date(1e3*t.Cs))},t.prototype.yr=function(){return 0===this.$s.length?null:0},t.prototype.kr=function(){return 0===this.$s.length?null:this.$s.length-1},t.prototype.te=function(t){return(this.Ys-1-t)/this.er},t.prototype.Vr=function(t){var i=this.te(t),n=this.Er()+this.rr-i;return Math.round(1e6*n)/1e6},t.prototype.Dr=function(t){var i=this.er;this.er=t,this.Tr(),i!==this.er&&(this.Gs=!0,this.ie())},t.prototype.br=function(){if(this.Gs)if(this.Gs=!1,this.Qt())this.ne(It.Hs());else{var t=this.Er(),i=this.Ys/this.er,n=this.rr+t,e=new Et(n-i+1,n);this.ne(new It(e))}},t.prototype.Tr=function(){var t=this.he();if(this.er<t&&(this.er=t,this.Gs=!0),0!==this.Ys){var i=.5*this.Ys;this.er>i&&(this.er=i,this.Gs=!0)}},t.prototype.he=function(){return this.xi.fixLeftEdge&&this.xi.fixRightEdge?this.Ys/this.$s.length:this.xi.minBarSpacing},t.prototype.Br=function(){var t=this.se();this.rr>t&&(this.rr=t,this.Gs=!0);var i=this.re();null!==i&&this.rr<i&&(this.rr=i,this.Gs=!0)},t.prototype.re=function(){var t=this.yr(),i=this.Ks;return null===t||null===i?null:t-i-1+(this.xi.fixLeftEdge?this.Ys/this.er:Math.min(2,this.$s.length))},t.prototype.se=function(){return this.xi.fixRightEdge?0:this.Ys/this.er-Math.min(2,this.$s.length)},t.prototype.Ur=function(){this.nr={Pr:this.Pr(),Fr:this.Fr()}},t.prototype.qr=function(){this.nr=null},t.prototype.Ir=function(t,i){var n=this,e=this.Zs.get(i);return void 0===e&&(e=new Tt((function(t){return n.ee(t,i)})),this.Zs.set(i,e)),e.os(t)},t.prototype.ee=function(t,i){var n,e,s=this.xi.timeVisible;return e=i<20&&s?this.xi.secondsVisible?4:3:i<40&&s?3:i<50||i<60?2:i<70?1:0,void 0!==this.xi.tickMarkFormatter?this.xi.tickMarkFormatter(null!==(n=t.Ss)&&void 0!==n?n:t.Cs,e,this.Gn.locale):function(t,i,n){var e={};switch(i){case 0:e.year="numeric";break;case 1:e.month="short";break;case 2:e.day="numeric";break;case 3:e.hour12=!1,e.hour="2-digit",e.minute="2-digit";break;case 4:e.hour12=!1,e.hour="2-digit",e.minute="2-digit",e.second="2-digit"}var s=void 0===t.Ss?new Date(1e3*t.Cs):new Date(Date.UTC(t.Ss.year,t.Ss.month-1,t.Ss.day));return new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()).toLocaleString(n,e)}(t,e,this.Gn.locale)},t.prototype.ne=function(t){var i=this.Js;this.Js=t,Lt(i.Us(),this.Js.Us())||this.Qs.hn(),Lt(i.qs(),this.Js.qs())||this.tr.hn(),this.ie()},t.prototype.ie=function(){this.hr=null},t.prototype.lr=function(){this.ie(),this.Zs.clear()},t.prototype.ur=function(){var t=this.Gn.dateFormat;this.xi.timeVisible?this.Qr=new At({fs:t,cs:this.xi.secondsVisible?"%h:%m:%s":"%h:%m",vs:"   ",_s:this.Gn.locale}):this.Qr=new Pt(t,this.Gn.locale)},t.prototype.cr=function(){if(this.xi.fixLeftEdge){var t=this.yr();if(null!==t){var i=d(this.Mr()).hs()-t;if(i<0){var n=this.rr-i-1;this.dr(n)}this.Tr()}}},t.prototype.vr=function(){this.Br(),this.Tr()},t}();function zt(t){return!M(t)&&!b(t)}function Jt(t){return M(t)}var Dt="'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Nt(t,i,n){return void 0!==n?n+=" ":n="",void 0===i&&(i=Dt),""+n+t+"px "+i}var Ot=function(){function t(t){this.ue={Dt:1,Ct:4,zt:NaN,xt:"",ae:"",et:"",Bt:0,Et:0,Lt:0,Tt:0,Ot:0},this.L=t}return t.prototype.I=function(){var t=this.ue,i=this.oe(),n=this.le();return t.zt===i&&t.ae===n||(t.zt=i,t.ae=n,t.xt=Nt(i,n),t.Tt=Math.floor(i/3.5),t.Bt=t.Tt,t.Et=Math.max(Math.ceil(i/2-t.Ct/2),0),t.Lt=Math.ceil(i/2+t.Ct/2),t.Ot=Math.round(i/10)),t.et=this.fe(),this.ue},t.prototype.fe=function(){return this.L.I().layout.textColor},t.prototype.oe=function(){return this.L.I().layout.fontSize},t.prototype.le=function(){return this.L.I().layout.fontFamily},t}();function Rt(t){return"left"===t||"right"===t}var Yt=function(){function t(t){this.ce=new Map,this.ve=!1,this._e=[],this.de=t}return t.prototype.we=function(t,i){var n=function(t,i){return void 0===t?i:{Me:Math.max(t.Me,i.Me),fh:t.fh||i.fh}}(this.ce.get(t),i);this.ce.set(t,n)},t.prototype.be=function(){return this.de},t.prototype.me=function(t){var i=this.ce.get(t);return void 0===i?{Me:this.de}:{Me:Math.max(this.de,i.Me),fh:i.fh}},t.prototype.ge=function(){this._e=[{pe:0}]},t.prototype.ye=function(t){this._e=[{pe:1,J:t}]},t.prototype.ke=function(){this._e=[{pe:4}]},t.prototype._r=function(t){this._e.push({pe:2,J:t})},t.prototype.dr=function(t){this._e.push({pe:3,J:t})},t.prototype.xe=function(){return this._e},t.prototype.vn=function(t){var i=this;this.ve=this.ve||t.ve,this._e=this._e.concat(t._e);for(var n=0,e=t._e;n<e.length;n++){var s=e[n];this.Ne(s)}this.de=Math.max(this.de,t.de),t.ce.forEach((function(t,n){i.we(n,t)}))},t.prototype.Ne=function(t){switch(t.pe){case 0:this.ge();break;case 1:this.ye(t.J);break;case 2:this._r(t.J);break;case 3:this.dr(t.J);break;case 4:this.ke()}},t}(),Ut=function(){function t(t){this.Se=t}return t.prototype.format=function(t){var i="";return t<0&&(i="-",t=-t),t<995?i+this.Ce(t):t<999995?i+this.Ce(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),i+this.Ce(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this.Ce(t/1e9)+"B")},t.prototype.Ce=function(t){var i=Math.pow(10,this.Se);return((t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.Se).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(function(t,i){return i}))},t}();function Ht(t,i,n,e){if(0!==i.length){var s=i[e.from].g,r=i[e.from].p;t.moveTo(s,r);for(var h=e.from+1;h<e.to;++h){var o=i[h];if(1===n){var u=i[h-1].p,l=o.g;t.lineTo(l,u)}t.lineTo(o.g,o.p)}}}var Qt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.v=null,i}return c(i,t),i.prototype._=function(t){this.v=t},i.prototype.u=function(t){if(null!==this.v&&0!==this.v.m.length&&null!==this.v.M){if(t.lineCap="butt",t.lineJoin="round",t.strokeStyle=this.v.S,t.lineWidth=this.v.rt,u(t,this.v.ut),t.lineWidth=1,t.beginPath(),1===this.v.m.length){var i=this.v.m[0],n=this.v.De/2;t.moveTo(i.g-n,this.v.Te),t.lineTo(i.g-n,i.p),t.lineTo(i.g+n,i.p),t.lineTo(i.g+n,this.v.Te)}else t.moveTo(this.v.m[this.v.M.from].g,this.v.Te),t.lineTo(this.v.m[this.v.M.from].g,this.v.m[this.v.M.from].p),Ht(t,this.v.m,this.v.Be,this.v.M),this.v.M.to>this.v.M.from&&(t.lineTo(this.v.m[this.v.M.to-1].g,this.v.Te),t.lineTo(this.v.m[this.v.M.from].g,this.v.Te));t.closePath();var e=t.createLinearGradient(0,0,0,this.v.Te);e.addColorStop(0,this.v.Ee),e.addColorStop(1,this.v.Le),t.fillStyle=e,t.fill()}},i}(k),qt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.v=null,i}return c(i,t),i.prototype._=function(t){this.v=t},i.prototype.u=function(t){if(null!==this.v&&0!==this.v.m.length&&null!==this.v.M){if(t.lineCap="butt",t.lineWidth=this.v.rt,u(t,this.v.ut),t.strokeStyle=this.v.S,t.lineJoin="round",t.beginPath(),1===this.v.m.length){var i=this.v.m[0];t.moveTo(i.g-this.v.De/2,i.p),t.lineTo(i.g+this.v.De/2,i.p)}else Ht(t,this.v.m,this.v.Be,this.v.M);t.stroke()}},i}(k);function Wt(t,i,n,e,s){void 0===e&&(e=0),void 0===s&&(s=t.length);for(var r=s-e;0<r;){var h=r>>1,o=e+h;n(t[o],i)?(e=o+1,r-=h+1):r=h}return e}function Zt(t,i,n,e,s){void 0===e&&(e=0),void 0===s&&(s=t.length);for(var r=s-e;0<r;){var h=r>>1,o=e+h;n(i,t[o])?r=h:(e=o+1,r-=h+1)}return e}function $t(t,i){return t.P<i}function Xt(t,i){return t<i.P}function jt(t,i,n){var e=i.hs(),s=i.ss(),r=Wt(t,e,$t),h=Zt(t,s,Xt);if(!n)return{from:r,to:h};var o=r,u=h;return r>0&&r<t.length&&t[r].P>=e&&(o=r-1),h>0&&h<t.length&&t[h-1].P<=s&&(u=h+1),{from:o,to:u}}var Gt=function(){function t(t,i,n){this.Ae=!0,this.Ve=!0,this.Oe=!0,this.ze=[],this.Pe=null,this.Fe=t,this.Ie=i,this.We=n}return t.prototype.V=function(t){this.Ae=!0,"data"===t&&(this.Ve=!0),"options"===t&&(this.Oe=!0)},t.prototype.Re=function(){this.Ve&&(this.je(),this.Ve=!1),this.Ae&&(this.Ue(),this.Ae=!1),this.Oe&&(this.qe(),this.Oe=!1)},t.prototype.He=function(){this.Pe=null},t.prototype.Ue=function(){var t=this.Fe.Z(),i=this.Ie.U();if(this.He(),!i.Qt()&&!t.Qt()){var n=i.Mr();if(null!==n&&0!==this.Fe.qi().Ye()){var e=this.Fe.Y();null!==e&&(this.Pe=jt(this.ze,n,this.We),this.Ke(t,i,e.J))}}},t}(),Kt=function(t){function i(i,n){return t.call(this,i,n,!0)||this}return c(i,t),i.prototype.Ke=function(t,i,n){i.Lr(this.ze,P(this.Pe)),t.Nh(this.ze,n,P(this.Pe))},i.prototype.$e=function(t,i){return{P:t,F:i,g:NaN,p:NaN}},i.prototype.qe=function(){},i.prototype.je=function(){var t=this,i=this.Fe.Xe();this.ze=this.Fe.qi().Ze().map((function(n){var e=n.J[3];return t.Je(n.Ps,e,i)}))},i}(Gt),ti=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e.ot=new S,e.Ge=new Qt,e.Qe=new qt,e.ot.i([e.Ge,e.Qe]),e}return c(i,t),i.prototype.W=function(t,i){if(!this.Fe.H())return null;var n=this.Fe.I();this.Re();var e={Be:n.lineType,m:this.ze,S:n.lineColor,ut:n.lineStyle,rt:n.lineWidth,Ee:n.topColor,Le:n.bottomColor,Te:t,M:this.Pe,De:this.Ie.U().Pr()};return this.Ge._(e),this.Qe._(e),this.ot},i.prototype.Je=function(t,i){return this.$e(t,i)},i}(Kt),ii=function(){function t(){this.tt=null,this.tu=0,this.iu=0}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,e){if(null!==this.tt&&0!==this.tt.qi.length&&null!==this.tt.M){this.tu=this.nu(i),this.tu>=2&&Math.max(1,Math.floor(i))%2!=this.tu%2&&this.tu--,this.iu=this.tt.hu?Math.min(this.tu,Math.floor(i)):this.tu;for(var s=null,r=this.iu<=this.tu&&this.tt.Pr>=Math.floor(1.5*i),h=this.tt.M.from;h<this.tt.M.to;++h){var o=this.tt.qi[h];s!==o.et&&(t.fillStyle=o.et,s=o.et);var u=Math.floor(.5*this.iu),l=Math.round(o.g*i),a=l-u,c=this.iu,f=a+c-1,p=Math.min(o.Th,o.Bh),v=Math.max(o.Th,o.Bh),y=Math.round(p*i)-u,d=Math.round(v*i)+u,g=Math.max(d-y,this.iu);t.fillRect(a,y,c,g);var m=Math.ceil(1.5*this.tu);if(r){if(this.tt.su){var M=l-m,w=Math.max(y,Math.round(o.Dh*i)-u),b=w+c-1;b>y+g-1&&(w=(b=y+g-1)-c+1),t.fillRect(M,w,a-M,b-w+1)}var _=l+m,x=Math.max(y,Math.round(o.Eh*i)-u),C=x+c-1;C>y+g-1&&(x=(C=y+g-1)-c+1),t.fillRect(f+1,x,_-f,C-x+1)}}}},t.prototype.nu=function(t){var i=Math.floor(t);return Math.max(i,Math.floor(function(t,i){return Math.floor(.3*t*i)}(d(this.tt).Pr,t)))},t}(),ni=function(t){function i(i,n){return t.call(this,i,n,!1)||this}return c(i,t),i.prototype.Ke=function(t,i,n){i.Lr(this.ze,P(this.Pe)),t.Ch(this.ze,n,P(this.Pe))},i.prototype.ru=function(t,i,n){return{P:t,open:i.J[0],high:i.J[1],low:i.J[2],close:i.J[3],g:NaN,Dh:NaN,Th:NaN,Bh:NaN,Eh:NaN}},i.prototype.je=function(){var t=this,i=this.Fe.Xe();this.ze=this.Fe.qi().Ze().map((function(n){return t.Je(n.Ps,n,i)}))},i}(Gt),ei=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ot=new ii,i}return c(i,t),i.prototype.W=function(t,i){if(!this.Fe.H())return null;var n=this.Fe.I();this.Re();var e={qi:this.ze,Pr:this.Ie.U().Pr(),su:n.openVisible,hu:n.thinBars,M:this.Pe};return this.ot._(e),this.ot},i.prototype.qe=function(){var t=this;this.ze.forEach((function(i){i.et=t.Fe.Xe().uu(i.P).eu}))},i.prototype.Je=function(t,i,n){return f(f({},this.ru(t,i,n)),{et:n.uu(t).eu})},i}(ni),si=function(){function t(){this.tt=null,this.tu=0}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,e){if(null!==this.tt&&0!==this.tt.qi.length&&null!==this.tt.M){this.tu=function(t,i){if(t>=2.5&&t<=4)return Math.floor(3*i);var n=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),e=Math.floor(t*n*i),s=Math.floor(t*i),r=Math.min(e,s);return Math.max(Math.floor(i),r)}(this.tt.Pr,i),this.tu>=2&&Math.floor(i)%2!=this.tu%2&&this.tu--;var s=this.tt.qi;this.tt.au&&this.ou(t,s,this.tt.M,i),this.tt.lu&&this.fu(t,s,this.tt.M,this.tt.Pr,i);var r=this.cu(i);(!this.tt.lu||this.tu>2*r)&&this.vu(t,s,this.tt.M,i)}},t.prototype.ou=function(t,i,n,e){if(null!==this.tt){var s="",r=Math.min(Math.floor(e),Math.floor(this.tt.Pr*e));r=Math.max(Math.floor(e),Math.min(r,this.tu));for(var h=Math.floor(.5*r),o=null,u=n.from;u<n.to;u++){var l=i[u];l._u!==s&&(t.fillStyle=l._u,s=l._u);var a=Math.round(Math.min(l.Dh,l.Eh)*e),c=Math.round(Math.max(l.Dh,l.Eh)*e),f=Math.round(l.Th*e),p=Math.round(l.Bh*e),v=Math.round(e*l.g)-h,y=v+r-1;null!==o&&(v=Math.max(o+1,v),v=Math.min(v,y));var d=y-v+1;t.fillRect(v,f,d,a-f),t.fillRect(v,c+1,d,p-c),o=y}}},t.prototype.cu=function(t){var i=Math.floor(1*t);this.tu<=2*i&&(i=Math.floor(.5*(this.tu-1)));var n=Math.max(Math.floor(t),i);return this.tu<=2*n?Math.max(Math.floor(t),Math.floor(1*t)):n},t.prototype.fu=function(t,i,n,e,s){if(null!==this.tt)for(var r="",h=this.cu(s),o=null,u=n.from;u<n.to;u++){var l=i[u];l.$!==r&&(t.fillStyle=l.$,r=l.$);var a=Math.round(l.g*s)-Math.floor(.5*this.tu),c=a+this.tu-1,f=Math.round(Math.min(l.Dh,l.Eh)*s),p=Math.round(Math.max(l.Dh,l.Eh)*s);if(null!==o&&(a=Math.max(o+1,a),a=Math.min(a,c)),this.tt.Pr*s>2*h)O(t,a,f,c-a+1,p-f+1,h);else{var v=c-a+1;t.fillRect(a,f,v,p-f+1)}o=c}},t.prototype.vu=function(t,i,n,e){if(null!==this.tt)for(var s="",r=this.cu(e),h=n.from;h<n.to;h++){var o=i[h],u=Math.round(Math.min(o.Dh,o.Eh)*e),l=Math.round(Math.max(o.Dh,o.Eh)*e),a=Math.round(o.g*e)-Math.floor(.5*this.tu),c=a+this.tu-1;if(o.et!==s){var f=o.et;t.fillStyle=f,s=f}this.tt.lu&&(a+=r,u+=r,c-=r,l-=r),u>l||t.fillRect(a,u,c-a+1,l-u+1)}},t}(),ri=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ot=new si,i}return c(i,t),i.prototype.W=function(t,i){if(!this.Fe.H())return null;var n=this.Fe.I();this.Re();var e={qi:this.ze,Pr:this.Ie.U().Pr(),au:n.wickVisible,lu:n.borderVisible,M:this.Pe};return this.ot._(e),this.ot},i.prototype.qe=function(){var t=this;this.ze.forEach((function(i){var n=t.Fe.Xe().uu(i.P);i.et=n.eu,i._u=n.du,i.$=n.wu}))},i.prototype.Je=function(t,i,n){var e=n.uu(t);return f(f({},this.ru(t,i,n)),{et:e.eu,_u:e.du,$:e.wu})},i}(ni),hi=function(){function t(){this.tt=null,this.Mu=[]}return t.prototype._=function(t){this.tt=t,this.Mu=[]},t.prototype.h=function(t,i,n,e){if(null!==this.tt&&0!==this.tt.m.length&&null!==this.tt.M){this.Mu.length||this.bu(i);for(var s=Math.max(1,Math.floor(i)),r=Math.round(this.tt.mu*i)-Math.floor(s/2),h=r+s,o=this.tt.M.from;o<this.tt.M.to;o++){var u=this.tt.m[o],l=this.Mu[o-this.tt.M.from],a=Math.round(u.p*i);t.fillStyle=u.et;var c=void 0,f=void 0;a<=r?(c=a,f=h):(c=r,f=a-Math.floor(s/2)+s),t.fillRect(l.hs,c,l.ss-l.hs+1,f-c)}}},t.prototype.bu=function(t){if(null!==this.tt&&0!==this.tt.m.length&&null!==this.tt.M){var i=Math.ceil(this.tt.Pr*t)<=1?0:Math.max(1,Math.floor(t)),n=Math.round(this.tt.Pr*t)-i;this.Mu=new Array(this.tt.M.to-this.tt.M.from);for(var e=this.tt.M.from;e<this.tt.M.to;e++){var s,r=this.tt.m[e],h=Math.round(r.g*t),o=void 0,u=void 0;n%2?(o=h-(s=(n-1)/2),u=h+s):(o=h-(s=n/2),u=h+s-1),this.Mu[e-this.tt.M.from]={hs:o,ss:u,gu:h,pu:r.g*t,P:r.P}}for(e=this.tt.M.from+1;e<this.tt.M.to;e++){var l=this.Mu[e-this.tt.M.from],a=this.Mu[e-this.tt.M.from-1];l.P===a.P+1&&l.hs-a.ss!==i+1&&(a.gu>a.pu?a.ss=l.hs-i-1:l.hs=a.ss+i+1)}var c=Math.ceil(this.tt.Pr*t);for(e=this.tt.M.from;e<this.tt.M.to;e++){(l=this.Mu[e-this.tt.M.from]).ss<l.hs&&(l.ss=l.hs);var f=l.ss-l.hs+1;c=Math.min(f,c)}if(i>0&&c<4)for(e=this.tt.M.from;e<this.tt.M.to;e++)(f=(l=this.Mu[e-this.tt.M.from]).ss-l.hs+1)>c&&(l.gu>l.pu?l.ss-=1:l.hs+=1)}else this.Mu=[]},t}();function oi(t){return{m:[],Pr:t,mu:NaN,M:null}}function ui(t,i,n){return{P:t,F:i,g:NaN,p:NaN,et:n}}var li=function(t){function i(i,n){var e=t.call(this,i,n,!1)||this;return e.C=new S,e.yu=oi(0),e.ot=new hi,e}return c(i,t),i.prototype.W=function(t,i){return this.Fe.H()?(this.Re(),this.C):null},i.prototype.je=function(){var t=this.Ie.U().Pr();this.yu=oi(t);for(var i=0,n=0,e=this.Fe.I().color,s=0,r=this.Fe.qi().Ze();s<r.length;s++){var h=r[s],o=h.J[3],u=void 0!==h.et?h.et:e,l=ui(h.Ps,o,u);++i<this.yu.m.length?this.yu.m[i]=l:this.yu.m.push(l),this.ze[n++]={P:h.Ps,g:0}}this.ot._(this.yu),this.C.i([this.ot])},i.prototype.qe=function(){},i.prototype.He=function(){t.prototype.He.call(this),this.yu.M=null},i.prototype.Ke=function(t,i,n){if(null!==this.Pe){var e=i.Pr(),s=d(i.Mr()),r=t.X(this.Fe.I().base,n);i.Lr(this.yu.m),t.Nh(this.yu.m,n),this.yu.mu=r,this.yu.M=jt(this.yu.m,s,!1),this.yu.Pr=e,this.ot._(this.yu)}},i}(Gt),ai=function(t){function i(i,n){var e=t.call(this,i,n)||this;return e.Qe=new qt,e}return c(i,t),i.prototype.W=function(t,i){if(!this.Fe.H())return null;var n=this.Fe.I();this.Re();var e={m:this.ze,S:n.color,ut:n.lineStyle,Be:n.lineType,rt:n.lineWidth,M:this.Pe,De:this.Ie.U().Pr()};return this.Qe._(e),this.Qe},i.prototype.Je=function(t,i){return this.$e(t,i)},i}(Kt),ci=/[2-9]/g,fi=function(){function t(t){void 0===t&&(t=50),this.ys=new Map,this.ku=0,this.xu=Array.from(new Array(t))}return t.prototype.Nu=function(){this.ys.clear(),this.xu.fill(void 0)},t.prototype.Vt=function(t,i,n){var e=n||ci,s=String(i).replace(e,"0"),r=this.ys.get(s);if(void 0===r){if(0===(r=t.measureText(s).width)&&0!==i.length)return 0;var h=this.xu[this.ku];void 0!==h&&this.ys.delete(h),this.xu[this.ku]=s,this.ku=(this.ku+1)%this.xu.length,this.ys.set(s,r)}return r},t}(),pi=function(){function t(t){this.Su=null,this.ue=null,this.Cu="right",this.Ys=0,this.Du=t}return t.prototype.Tu=function(t,i,n,e){this.Su=t,this.ue=i,this.Ys=n,this.Cu=e},t.prototype.h=function(t,i){null!==this.ue&&null!==this.Su&&this.Su.h(t,this.ue,this.Du,this.Ys,this.Cu,i)},t}(),vi=function(){function t(t,i,n){this.Bu=t,this.Du=new fi(50),this.Eu=i,this.L=n,this.oe=-1,this.ot=new pi(this.Du)}return t.prototype.W=function(t,i){var n=this.L.Lu(this.Eu);if(null===n)return null;var e=n.Au(this.Eu)?n.Ci():this.Eu.Z();if(null===e)return null;var s=n.Vu(e);if("overlay"===s)return null;var r=this.L.Ou();return r.zt!==this.oe&&(this.oe=r.zt,this.Du.Nu()),this.ot.Tu(this.Bu.Xt(),r,i,s),this.ot},t}(),yi=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,e){if(null!==this.tt&&!1!==this.tt.H){var s=Math.round(this.tt.p*i);if(!(s<0||s>Math.ceil(this.tt.wt*i))){var r=Math.ceil(this.tt.dt*i);t.lineCap="butt",t.strokeStyle=this.tt.et,t.lineWidth=Math.floor(this.tt.rt*i),u(t,this.tt.ut),l(t,s,0,r)}}},t}(),di=function(){function t(t){this.zu={dt:0,wt:0,p:0,et:"rgba(0, 0, 0, 0)",rt:1,ut:0,H:!1},this.Pu=new yi,this.B=!0,this.Fe=t,this.Ie=t.ct(),this.Pu._(this.zu)}return t.prototype.V=function(){this.B=!0},t.prototype.W=function(t,i){return this.Fe.H()?(this.B&&(this.Fu(t,i),this.B=!1),this.Pu):null},t}(),gi=function(t){function i(i){return t.call(this,i)||this}return c(i,t),i.prototype.Fu=function(t,i){this.zu.H=!1;var n=this.Fe.Z(),e=n.eh().eh;if(2===e||3===e){var s=this.Fe.I();if(s.baseLineVisible&&this.Fe.H()){var r=this.Fe.Y();null!==r&&(this.zu.H=!0,this.zu.p=n.X(r.J,r.J),this.zu.dt=i,this.zu.wt=t,this.zu.et=s.baseLineColor,this.zu.rt=s.baseLineWidth,this.zu.ut=s.baseLineStyle)}}},i}(di);function mi(t,i){return ot(Math.min(Math.max(t,12),30)*i)}function Mi(t,i){switch(t){case"arrowDown":case"arrowUp":return mi(i,1);case"circle":return mi(i,.8);case"square":return mi(i,.7)}}function wi(t){return ht(mi(t,1))}function bi(t){return Math.max(mi(t,.1),3)}function _i(t,i,n,e,s){var r=Mi("square",n),h=(r-1)/2,o=t-h,u=i-h;return e>=o&&e<=o+r&&s>=u&&s<=u+r}function xi(t,i,n,e,s){var r=(Mi("arrowUp",s)-1)/2,h=(ot(s/2)-1)/2;i.beginPath(),t?(i.moveTo(n-r,e),i.lineTo(n,e-r),i.lineTo(n+r,e),i.lineTo(n+h,e),i.lineTo(n+h,e+r),i.lineTo(n-h,e+r),i.lineTo(n-h,e)):(i.moveTo(n-r,e),i.lineTo(n,e+r),i.lineTo(n+r,e),i.lineTo(n+h,e),i.lineTo(n+h,e-r),i.lineTo(n-h,e-r),i.lineTo(n-h,e)),i.fill()}var Ci=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.tt=null,i.Du=new fi,i.oe=-1,i.le="",i.Iu="",i}return c(i,t),i.prototype._=function(t){this.tt=t},i.prototype.Tu=function(t,i){this.oe===t&&this.le===i||(this.oe=t,this.le=i,this.Iu=Nt(t,i),this.Du.Nu())},i.prototype.Wu=function(t,i){if(null===this.tt||null===this.tt.M)return null;for(var n=this.tt.M.from;n<this.tt.M.to;n++){var e=this.tt.m[n];if(Si(e,t,i))return{Ru:e.ju,Uu:e.Uu}}return null},i.prototype.u=function(t,i,n){if(null!==this.tt&&null!==this.tt.M){t.textBaseline="middle",t.font=this.Iu;for(var e=this.tt.M.from;e<this.tt.M.to;e++){var s=this.tt.m[e];void 0!==s.At&&(s.At.dt=this.Du.Vt(t,s.At.qu),s.At.wt=this.oe),Pi(s,t)}}},i}(k);function Pi(t,i){i.fillStyle=t.et,void 0!==t.At&&function(t,i,n,e){t.fillText(i,n,e)}(i,t.At.qu,t.g-t.At.dt/2,t.At.p),function(t,i){if(0!==t.Ye){switch(t.Hu){case"arrowDown":return void xi(!1,i,t.g,t.p,t.Ye);case"arrowUp":return void xi(!0,i,t.g,t.p,t.Ye);case"circle":return void function(t,i,n,e){var s=(Mi("circle",e)-1)/2;t.beginPath(),t.arc(i,n,s,0,2*Math.PI,!1),t.fill()}(i,t.g,t.p,t.Ye);case"square":return void function(t,i,n,e){var s=Mi("square",e),r=(s-1)/2,h=i-r,o=n-r;t.fillRect(h,o,s,s)}(i,t.g,t.p,t.Ye)}t.Hu}}(t,i)}function Si(t,i,n){return!(void 0===t.At||!function(t,i,n,e,s,r){var h=e/2;return s>=t&&s<=t+n&&r>=i-h&&r<=i+h}(t.g,t.At.p,t.At.dt,t.At.wt,i,n))||function(t,i,n){if(0===t.Ye)return!1;switch(t.Hu){case"arrowDown":case"arrowUp":return function(t,i,n,e,s,r){return _i(i,n,e,s,r)}(0,t.g,t.p,t.Ye,i,n);case"circle":return function(t,i,n,e,s){var r=2+Mi("circle",n)/2,h=t-e,o=i-s;return Math.sqrt(h*h+o*o)<=r}(t.g,t.p,t.Ye,i,n);case"square":return _i(t.g,t.p,t.Ye,i,n)}t.Hu}(t,i,n)}function ki(t,i,n,e,s,r,h,o,u){var l=M(n)?n:n.close,a=M(n)?n:n.high,c=M(n)?n:n.low,f=M(i.size)?Math.max(i.size,0):1,p=wi(o.Pr())*f,v=p/2;switch(t.Ye=p,i.position){case"inBar":return t.p=h.X(l,u),void(void 0!==t.At&&(t.At.p=t.p+v+r+.6*s));case"aboveBar":return t.p=h.X(a,u)-v-e.Yu,void 0!==t.At&&(t.At.p=t.p-v-.6*s,e.Yu+=1.2*s),void(e.Yu+=p+r);case"belowBar":return t.p=h.X(c,u)+v+e.Ku,void 0!==t.At&&(t.At.p=t.p+v+r+.6*s,e.Ku+=1.2*s),void(e.Ku+=p+r)}i.position}var Ai=function(){function t(t,i){this.B=!0,this.$u=!0,this.Xu=!0,this.Zu=null,this.ot=new Ci,this.Ju=t,this.hi=i,this.tt={m:[],M:null}}return t.prototype.V=function(t){this.B=!0,this.Xu=!0,"data"===t&&(this.$u=!0)},t.prototype.W=function(t,i,n){if(!this.Ju.H())return null;this.B&&this.Re();var e=this.hi.I().layout;return this.ot.Tu(e.fontSize,e.fontFamily),this.ot._(this.tt),this.ot},t.prototype.Gu=function(){if(this.Xu){if(this.Ju.Qu().length>0){var t=this.hi.U().Pr(),i=bi(t),n=1.5*wi(t)+2*i;this.Zu={above:n,below:n}}else this.Zu=null;this.Xu=!1}return this.Zu},t.prototype.Re=function(){var t=this.Ju.Z(),i=this.hi.U(),n=this.Ju.Qu();this.$u&&(this.tt.m=n.map((function(t){return{P:t.time,g:0,p:0,Ye:0,Hu:t.shape,et:t.color,ju:t.ju,Uu:t.id,At:void 0}})),this.$u=!1);var e=this.hi.I().layout;this.tt.M=null;var s=i.Mr();if(null!==s){var r=this.Ju.Y();if(null!==r&&0!==this.tt.m.length){var h=NaN,o=bi(i.Pr()),u={Yu:o,Ku:o};this.tt.M=jt(this.tt.m,s,!0);for(var l=this.tt.M.from;l<this.tt.M.to;l++){var a=n[l];a.time!==h&&(u.Yu=o,u.Ku=o,h=a.time);var c=this.tt.m[l];c.g=i.G(a.time),void 0!==a.text&&a.text.length>0&&(c.At={qu:a.text,p:0,dt:0,wt:0});var f=this.Ju.ta(a.time);null!==f&&ki(c,a,f,u,e.fontSize,o,t,i,r.J)}this.B=!1}}},t}(),Ti=function(t){function i(i){return t.call(this,i)||this}return c(i,t),i.prototype.Fu=function(t,i){var n=this.zu;n.H=!1;var e=this.Fe.I();if(e.priceLineVisible&&this.Fe.H()){var s=this.Fe.ia(0===e.priceLineSource);s.na||(n.H=!0,n.p=s.Pt,n.et=this.Fe.ha(s.et),n.dt=i,n.wt=t,n.rt=e.priceLineWidth,n.ut=e.priceLineStyle)}},i}(di),Ei=function(t){function i(i){var n=t.call(this)||this;return n.lt=i,n}return c(i,t),i.prototype.Zt=function(t,i,n){if(t.H=!1,i.H=!1,this.lt.H()){var e=this.lt.I(),s=e.lastValueVisible,r=""!==this.lt.sa(),h=0===e.seriesLastValueMode,o=this.lt.ia(!1);if(!o.na){s&&(t.At=this.ra(o,s,h),t.H=0!==t.At.length),(r||h)&&(i.At=this.ea(o,s,r,h),i.H=i.At.length>0);var u=this.lt.ha(o.et),l=N(u);n.gt=l.gt,n.et=l.yt,n.Pt=o.Pt,i.$=this.lt.ct().I().layout.backgroundColor,t.$=u}}},i.prototype.ea=function(t,i,n,e){var s="",r=this.lt.sa();return n&&0!==r.length&&(s+=r+" "),i&&e&&(s+=this.lt.Z().oh()?t.ua:t.aa),s.trim()},i.prototype.ra=function(t,i,n){return i?n?this.lt.Z().oh()?t.aa:t.ua:t.At:""},i}(Q),Li=function(){function t(t,i){this.On=t,this.oa=i||null}return t.prototype.yh=function(){return this.On},t.prototype.rs=function(){return this.oa},t.prototype.wn=function(){return null===this.On?null:{priceRange:this.On.wn(),margins:this.oa||void 0}},t.Mn=function(i){return null===i?null:new t(nt.Mn(i.priceRange),i.margins)},t}(),Bi=function(t){function i(i,n){var e=t.call(this,i)||this;return e.la=n,e}return c(i,t),i.prototype.Fu=function(t,i){var n=this.zu;if(n.H=!1,this.Fe.H()){var e=this.la.fa();if(null!==e){var s=this.la.I();n.H=!0,n.p=e,n.et=s.color,n.dt=i,n.wt=t,n.rt=s.lineWidth,n.ut=s.lineStyle}}},i}(di),Vi=function(t){function i(i,n){var e=t.call(this)||this;return e.Ju=i,e.la=n,e}return c(i,t),i.prototype.Zt=function(t,i,n){t.H=!1,i.H=!1;var e=this.la.I(),s=e.axisLabelVisible,r=""!==e.title;if(s&&this.Ju.H()){var h=this.la.fa();if(null!==h){r&&(i.At=e.title,i.H=!0),i.$=this.Ju.ct().I().layout.backgroundColor,t.At=this.Ju.Z().$h(e.price),t.H=!0;var o=N(e.color);n.gt=o.gt,n.et=o.yt,n.Pt=h}}},i}(Q),Ii=function(){function t(t,i){this.Ju=t,this.xi=i,this.ca=new Bi(t,this),this.Bu=new Vi(t,this),this.va=new vi(this.Bu,t,t.ct())}return t.prototype.hh=function(t){m(this.xi,t),this.V(),this.Ju.ct().zr()},t.prototype.I=function(){return this.xi},t.prototype.ci=function(){return[this.ca,this.va]},t.prototype._a=function(){return this.Bu},t.prototype.V=function(){this.ca.V(),this.Bu.V()},t.prototype.fa=function(){var t=this.Ju,i=t.Z();if(t.ct().U().Qt()||i.Qt())return null;var n=t.Y();return null===n?null:i.X(this.xi.price,n.J)},t}(),Fi=function(t){function i(i){var n=t.call(this)||this;return n.hi=i,n}return c(i,t),i.prototype.ct=function(){return this.hi},i}(X),zi={eu:"",wu:"",du:""},Ji=function(){function t(t){this.Ju=t}return t.prototype.uu=function(t,i){var n=this.Ju.da(),e=this.Ju.I();switch(n){case"Line":return this.wa(e);case"Area":return this.Ma(e);case"Bar":return this.ba(e,t,i);case"Candlestick":return this.ma(e,t,i);case"Histogram":return this.ga(e,t,i)}throw new Error("Unknown chart style")},t.prototype.ba=function(t,i,n){var e=f({},zi),s=t.upColor,r=t.downColor,h=s,o=r,u=d(this.pa(i,n)),l=g(u.J[0])<=g(u.J[3]);return e.eu=l?s:r,e.wu=l?h:o,e},t.prototype.ma=function(t,i,n){var e=f({},zi),s=t.upColor,r=t.downColor,h=t.borderUpColor,o=t.borderDownColor,u=t.wickUpColor,l=t.wickDownColor,a=d(this.pa(i,n)),c=g(a.J[0])<=g(a.J[3]);return e.eu=c?s:r,e.wu=c?h:o,e.du=c?u:l,e},t.prototype.Ma=function(t){return f(f({},zi),{eu:t.lineColor})},t.prototype.wa=function(t){return f(f({},zi),{eu:t.color})},t.prototype.ga=function(t,i,n){var e=f({},zi),s=d(this.pa(i,n));return e.eu=void 0!==s.et?s.et:t.color,e},t.prototype.pa=function(t,i){return void 0!==i?i.J:this.Ju.qi().ya(t)},t}(),Di=function(){function t(){this.ka=[],this.xa=new Map,this.Na=new Map}return t.prototype.Sa=function(){this.ka=[],this.xa.clear(),this.Na.clear()},t.prototype.Ca=function(){return this.Ye()>0?this.ka[this.ka.length-1]:null},t.prototype.Da=function(){return this.Ye()>0?this.Ta(0):null},t.prototype.Ui=function(){return this.Ye()>0?this.Ta(this.ka.length-1):null},t.prototype.Ye=function(){return this.ka.length},t.prototype.Qt=function(){return 0===this.Ye()},t.prototype.As=function(t){return null!==this.Ba(t,0)},t.prototype.ya=function(t){return this.Ea(t)},t.prototype.Ea=function(t,i){void 0===i&&(i=0);var n=this.Ba(t,i);return null===n?null:f(f({},this.La(n)),{Ps:this.Ta(n)})},t.prototype.Ze=function(){return this.ka},t.prototype.Aa=function(t,i,n){if(this.Qt())return null;for(var e=null,s=0,r=n;s<r.length;s++){var h=r[s];e=Ni(e,this.Va(t,i,h))}return e},t.prototype.vn=function(t){0!==t.length&&(this.Qt()||t[t.length-1].Ps<this.ka[0].Ps?this.Oa(t):t[0].Ps>this.ka[this.ka.length-1].Ps?this.za(t):1!==t.length||t[0].Ps!==this.ka[this.ka.length-1].Ps?this.Pa(t):this.Fa(t[0]))},t.prototype.Ta=function(t){return this.ka[t].Ps},t.prototype.La=function(t){return this.ka[t]},t.prototype.Ba=function(t,i){var n=this.Ia(t);if(null===n&&0!==i)switch(i){case-1:return this.Wa(t);case 1:return this.Ra(t);default:throw new TypeError("Unknown search mode")}return n},t.prototype.Wa=function(t){var i=this.ja(t);return i>0&&(i-=1),i!==this.ka.length&&this.Ta(i)<t?i:null},t.prototype.Ra=function(t){var i=this.Ua(t);return i!==this.ka.length&&t<this.Ta(i)?i:null},t.prototype.Ia=function(t){var i=this.ja(t);return i===this.ka.length||t<this.ka[i].Ps?null:i},t.prototype.ja=function(t){return Wt(this.ka,t,(function(t,i){return t.Ps<i}))},t.prototype.Ua=function(t){return Zt(this.ka,t,(function(t,i){return i.Ps>t}))},t.prototype.qa=function(t,i,n){for(var e=null,s=t;s<i;s++){var r=this.ka[s].J[n];Number.isNaN(r)||(null===e?e={Ha:r,Ya:r}:(r<e.Ha&&(e.Ha=r),r>e.Ya&&(e.Ya=r)))}return e},t.prototype.Ka=function(t){var i=Math.floor(t.Ps/30);this.xa.forEach((function(t){return t.delete(i)}))},t.prototype.Oa=function(t){v(0!==t.length,"plotRows should not be empty"),this.Na.clear(),this.xa.clear(),this.ka=t.concat(this.ka)},t.prototype.za=function(t){v(0!==t.length,"plotRows should not be empty"),this.Na.clear(),this.xa.clear(),this.ka=this.ka.concat(t)},t.prototype.Fa=function(t){v(!this.Qt(),"plot list should not be empty"),v(this.ka[this.ka.length-1].Ps===t.Ps,"last row index should match new row index"),this.Ka(t),this.Na.delete(t.Ps),this.ka[this.ka.length-1]=t},t.prototype.Pa=function(t){v(0!==t.length,"plot rows should not be empty"),this.Na.clear(),this.xa.clear(),this.ka=function(t,i){for(var n=function(t,i){for(var n=t.length,e=i.length,s=n+e,r=0,h=0;r<n&&h<e;)t[r].Ps<i[h].Ps?r++:t[r].Ps>i[h].Ps?h++:(r++,h++,s--);return s}(t,i),e=new Array(n),s=0,r=0,h=t.length,o=i.length,u=0;s<h&&r<o;)t[s].Ps<i[r].Ps?(e[u]=t[s],s++):t[s].Ps>i[r].Ps?(e[u]=i[r],r++):(e[u]=i[r],s++,r++),u++;for(;s<h;)e[u]=t[s],s++,u++;for(;r<o;)e[u]=i[r],r++,u++;return e}(this.ka,t)},t.prototype.Va=function(t,i,n){if(this.Qt())return null;var e=null,s=d(this.Da()),r=d(this.Ui()),h=Math.max(t,s),o=Math.min(i,r),u=30*Math.ceil(h/30),l=Math.max(u,30*Math.floor(o/30)),a=this.ja(h),c=this.Ua(Math.min(o,u,i));e=Ni(e,this.qa(a,c,n));var f=this.xa.get(n);void 0===f&&(f=new Map,this.xa.set(n,f));for(var p=Math.max(u+1,h);p<l;p+=30){var v=Math.floor(p/30),y=f.get(v);if(void 0===y){var g=this.ja(30*v),m=this.Ua(30*(v+1)-1);y=this.qa(g,m,n),f.set(v,y)}e=Ni(e,y)}return a=this.ja(l),c=this.Ua(o),Ni(e,this.qa(a,c,n))},t}();function Ni(t,i){return null===t?i:null===i?t:{Ha:Math.min(t.Ha,i.Ha),Ya:Math.max(t.Ya,i.Ya)}}var Oi=function(t){function i(i,n,e){var s=t.call(this,i)||this;s.tt=new Di,s.ca=new Ti(s),s.$a=[],s.Xa=new gi(s),s.Za=null,s.Ja=[],s.Ga=[],s.xi=n,s.Qa=e;var r=new Ei(s);return s.bi=[r],s.va=new vi(r,s,i),s.io(),s.no(),s}return c(i,t),i.prototype.rn=function(){},i.prototype.ha=function(t){return this.xi.priceLineColor||t},i.prototype.ia=function(t,i){var n={na:!0},e=this.Z();if(this.ct().U().Qt()||e.Qt()||this.tt.Qt())return n;var s,r,h=this.ct().U().Mr(),o=this.Y();if(null===h||null===o)return n;if(t){var u=this.tt.Ca();if(null===u)return n;s=u,r=u.Ps}else{var l=this.tt.Ea(h.ss(),-1);if(null===l)return n;if(null===(s=this.tt.ya(l.Ps)))return n;r=l.Ps}var a=s.J[3],c=this.Xe().uu(r,{J:s}),f=e.X(a,o.J);return{na:!1,F:i?a:void 0,At:e.ti(a,o.J),ua:e.$h(a),aa:e.Zh(a,o.J),et:c.eu,Pt:f,Ps:r}},i.prototype.Xe=function(){return null!==this.Za||(this.Za=new Ji(this)),this.Za},i.prototype.I=function(){return this.xi},i.prototype.hh=function(t){var i=t.priceScaleId;void 0!==i&&i!==this.xi.priceScaleId&&this.ct().ho(this,i),m(this.xi,t),null!==this.ei&&void 0!==t.scaleMargins&&this.ei.hh({scaleMargins:t.scaleMargins}),void 0!==t.priceFormat&&this.io(),this.ct().so(this),this.ct().ro(),this.Bi.V("options")},i.prototype.eo=function(){this.tt.Sa(),this.no()},i.prototype.uo=function(t,i){i&&this.tt.Sa(),this.tt.vn(t),this.ao(),this.Bi.V("data"),this.Ni.V("data");var n=this.ct().Lu(this);this.ct().oo(n),this.ct().so(this),this.ct().ro(),this.ct().zr()},i.prototype.lo=function(t){this.Ja=t.map((function(t){return f({},t)})),this.ao();var i=this.ct().Lu(this);this.Ni.V("data"),this.ct().oo(i),this.ct().so(this),this.ct().ro(),this.ct().zr()},i.prototype.Qu=function(){return this.Ga},i.prototype.fo=function(t){var i=new Ii(this,t);return this.$a.push(i),this.ct().so(this),i},i.prototype.co=function(t){var i=this.$a.indexOf(t);-1!==i&&this.$a.splice(i,1),this.ct().so(this)},i.prototype.da=function(){return this.Qa},i.prototype.Y=function(){var t=this.vo();return null===t?null:{J:t.J[3],Fh:t.P}},i.prototype.vo=function(){var t=this.ct().U().Mr();if(null===t)return null;var i=t.hs();return this.tt.Ea(i,1)},i.prototype.qi=function(){return this.tt},i.prototype.ta=function(t){var i=this.tt.ya(t);return null===i?null:"Bar"===this.Qa||"Candlestick"===this.Qa?{open:i.J[0],high:i.J[1],low:i.J[2],close:i.J[3]}:i.J[3]},i.prototype.ci=function(){var t=[];this._o()||t.push(this.Xa);for(var i=0,n=this.$a;i<n.length;i++){var e=n[i];t.push.apply(t,e.ci())}return t.push(this.Bi,this.ca,this.va,this.Ni),t},i.prototype.fi=function(t,i){if(i!==this.ei&&!this._o())return[];for(var n=p([],this.bi),e=0,s=this.$a;e<s.length;e++){var r=s[e];n.push(r._a())}return n},i.prototype.ns=function(t,i){var n=this;if(void 0!==this.xi.autoscaleInfoProvider){var e=this.xi.autoscaleInfoProvider((function(){var e=n.do(t,i);return null===e?null:e.wn()}));return Li.Mn(e)}return this.do(t,i)},i.prototype.Qh=function(){return this.xi.priceFormat.minMove},i.prototype.Yh=function(){return this.Xn},i.prototype.Wi=function(){this.Bi.V(),this.Ni.V();for(var t=0,i=this.bi;t<i.length;t++)i[t].V();for(var n=0,e=this.$a;n<e.length;n++)e[n].V();this.ca.V(),this.Xa.V()},i.prototype.Z=function(){return d(this.ei)},i.prototype.q=function(t){if("Line"!==this.Qa&&"Area"!==this.Qa||!this.xi.crosshairMarkerVisible)return null;var i=this.tt.ya(t);return null===i?null:{F:i.J[3],N:this.wo(),$:this.Mo(),K:this.bo(t)}},i.prototype.sa=function(){return this.xi.title},i.prototype.H=function(){return this.xi.visible},i.prototype._o=function(){return!Rt(this.Z().nh())},i.prototype.do=function(t,i){if(!w(t)||!w(i)||this.tt.Qt())return null;var n="Line"===this.Qa||"Area"===this.Qa||"Histogram"===this.Qa?[3]:[2,1],e=this.tt.Aa(t,i,n),s=null!==e?new nt(e.Ha,e.Ya):null;if("Histogram"===this.da()){var r=this.xi.base,h=new nt(r,r);s=null!==s?s.vn(h):h}return new Li(s,this.Ni.Gu())},i.prototype.wo=function(){switch(this.Qa){case"Line":case"Area":return this.xi.crosshairMarkerRadius}return 0},i.prototype.Mo=function(){switch(this.Qa){case"Line":case"Area":var t=this.xi.crosshairMarkerBorderColor;if(0!==t.length)return t}return this.ct().I().layout.backgroundColor},i.prototype.bo=function(t){switch(this.Qa){case"Line":case"Area":var i=this.xi.crosshairMarkerBackgroundColor;if(0!==i.length)return i}return this.Xe().uu(t).eu},i.prototype.io=function(){switch(this.xi.priceFormat.type){case"custom":this.Xn={format:this.xi.priceFormat.formatter};break;case"volume":this.Xn=new Ut(this.xi.priceFormat.precision);break;case"percent":this.Xn=new tt(this.xi.priceFormat.precision);break;default:var t=Math.pow(10,this.xi.priceFormat.precision);this.Xn=new K(t,this.xi.priceFormat.minMove*t)}null!==this.ei&&this.ei.sh()},i.prototype.ao=function(){var t=this,i=this.ct().U();if(i.Qt()||0===this.tt.Ye())this.Ga=[];else{var n=d(this.tt.Da());this.Ga=this.Ja.map((function(e,s){var r=d(i.wr(e.time,!0)),h=r<n?1:-1;return{time:d(t.tt.Ea(r,h)).Ps,position:e.position,shape:e.shape,color:e.color,id:e.id,ju:s,text:e.text,size:e.size}}))}},i.prototype.no=function(){switch(this.Ni=new Ai(this,this.ct()),this.Qa){case"Bar":this.Bi=new ei(this,this.ct());break;case"Candlestick":this.Bi=new ri(this,this.ct());break;case"Line":this.Bi=new ai(this,this.ct());break;case"Area":this.Bi=new ti(this,this.ct());break;case"Histogram":this.Bi=new li(this,this.ct());break;default:throw Error("Unknown chart style assigned: "+this.Qa)}},i}(Fi),Ri=function(){function t(t){this.xi=t}return t.prototype.mo=function(t,i,n){var e=t;if(0===this.xi.mode)return e;var s=n.Ci(),r=s.Y();if(null===r)return e;var h=s.X(t,r),o=n.Ah().filter((function(t){return t instanceof Oi})).reduce((function(t,e){if(n.Au(e)||!e.H())return t;var s=e.Z(),r=e.qi();if(s.Qt()||!r.As(i))return t;var h=r.ya(i);if(null===h)return t;var o=g(e.Y());return t.concat([s.X(h.J[3],o.J)])}),[]);if(0===o.length)return e;o.sort((function(t,i){return Math.abs(t-h)-Math.abs(i-h)}));var u=o[0];return s.Di(u,r)},t}(),Yi=function(){function t(){this.tt=null}return t.prototype._=function(t){this.tt=t},t.prototype.h=function(t,i,n,e){var s=this;if(null!==this.tt){var r=Math.max(1,Math.floor(i));t.lineWidth=r;var h=Math.ceil(this.tt.st*i),o=Math.ceil(this.tt.ht*i);!function(t,i){t.save(),t.lineWidth%2&&t.translate(.5,.5),i(),t.restore()}(t,(function(){var n=d(s.tt);if(n.po){t.strokeStyle=n.yo,u(t,n.ko),t.beginPath();for(var e=0,l=n.xo;e<l.length;e++){var a=l[e],c=Math.round(a.Dn*i);t.moveTo(c,-r),t.lineTo(c,h+r)}t.stroke()}if(n.No){t.strokeStyle=n.So,u(t,n.Co),t.beginPath();for(var f=0,p=n.Do;f<p.length;f++){var v=p[f],y=Math.round(v.Dn*i);t.moveTo(-r,y),t.lineTo(o+r,y)}t.stroke()}}))}},t}(),Ui=function(){function t(t){this.ot=new Yi,this.B=!0,this._i=t}return t.prototype.V=function(){this.B=!0},t.prototype.W=function(t,i){if(this.B){var n=this._i.ct().I().grid,e={st:t,ht:i,No:n.horzLines.visible,po:n.vertLines.visible,So:n.horzLines.color,yo:n.vertLines.color,Co:n.horzLines.style,ko:n.vertLines.style,Do:this._i.Ci().Ln(),xo:this._i.ct().U().Ln()||[]};this.ot._(e),this.B=!1}return this.ot},t}(),Hi=function(){function t(t){this.Bi=new Ui(t)}return t.prototype.To=function(){return this.Bi},t}(),Qi=function(){function t(t,i){this.qn=[],this.Bo=new Map,this.An=0,this.Ys=0,this.Eo=1e3,this.Hn=null,this.Lo=new it,this.Ao=t,this.hi=i,this.Vo=new Hi(this);var n=i.I();this.Oo=this.zo("left",n.leftPriceScale),this.Po=this.zo("right",n.rightPriceScale),this.Oo.Mh().Zi(this.Fo.bind(this,this.Oo),this),this.Po.Mh().Zi(this.Fo.bind(this,this.Oo),this),this.Io(n)}return t.prototype.Io=function(t){if(t.leftPriceScale&&this.Oo.hh(t.leftPriceScale),t.rightPriceScale&&this.Po.hh(t.rightPriceScale),t.localization&&(this.Oo.sh(),this.Po.sh()),t.overlayPriceScales)for(var i=0,n=Array.from(this.Bo.values());i<n.length;i++){var e=d(n[i][0].Z());e.hh(t.overlayPriceScales),t.localization&&e.sh()}},t.prototype.Wo=function(t){switch(t){case"left":return this.Oo;case"right":return this.Po}return this.Bo.has(t)?y(this.Bo.get(t))[0].Z():null},t.prototype.rn=function(){this.ct().Ro().nn(this),this.Oo.Mh().nn(this),this.Po.Mh().nn(this),this.qn.forEach((function(t){t.rn&&t.rn()})),this.Lo.hn()},t.prototype.jo=function(){return this.Eo},t.prototype.Uo=function(t){this.Eo=t},t.prototype.ct=function(){return this.hi},t.prototype.dt=function(){return this.Ys},t.prototype.wt=function(){return this.An},t.prototype.Cr=function(t){this.Ys=t,this.qo()},t.prototype.bh=function(t){var i=this;this.An=t,this.Oo.bh(t),this.Po.bh(t),this.qn.forEach((function(n){if(i.Au(n)){var e=n.Z();null!==e&&e.bh(t)}})),this.qo()},t.prototype.Ah=function(){return this.qn},t.prototype.Au=function(t){var i=t.Z();return null===i||this.Oo!==i&&this.Po!==i},t.prototype.Oh=function(t,i,n){var e=void 0!==n?n:this.Yo().Ho+1;this.Ko(t,i,e)},t.prototype.Ph=function(t){var i=this.qn.indexOf(t);v(-1!==i,"removeDataSource: invalid data source"),this.qn.splice(i,1);var n=d(t.Z()).nh();if(this.Bo.has(n)){var e=y(this.Bo.get(n)),s=e.indexOf(t);-1!==s&&(e.splice(s,1),0===e.length&&this.Bo.delete(n))}var r=t.Z();r&&r.Ah().indexOf(t)>=0&&r.Ph(t),null!==r&&(r.zh(),this.$o(r)),this.Hn=null},t.prototype.Vu=function(t){return t===this.Oo?"left":t===this.Po?"right":"overlay"},t.prototype.Xo=function(){return this.Oo},t.prototype.Zo=function(){return this.Po},t.prototype.Jo=function(t,i){t.Wh(i)},t.prototype.Go=function(t,i){t.Rh(i),this.qo()},t.prototype.Qo=function(t){t.jh()},t.prototype.tl=function(t,i){t.Uh(i)},t.prototype.il=function(t,i){t.qh(i),this.qo()},t.prototype.nl=function(t){t.Hh()},t.prototype.qo=function(){this.qn.forEach((function(t){t.Wi()}))},t.prototype.Ci=function(){var t=null;return this.hi.I().rightPriceScale.visible&&0!==this.Po.Ah().length?t=this.Po:this.hi.I().leftPriceScale.visible&&0!==this.Oo.Ah().length?t=this.Oo:0!==this.qn.length&&(t=this.qn[0].Z()),null===t&&(t=this.Po),t},t.prototype.$o=function(t){null!==t&&t.ah()&&this.hl(t)},t.prototype.sl=function(t){var i=this.Ao.Mr();t.rh({fh:!0}),null!==i&&t.Gh(i),this.qo()},t.prototype.rl=function(){this.hl(this.Oo),this.hl(this.Po)},t.prototype.el=function(){var t=this;this.$o(this.Oo),this.$o(this.Po),this.qn.forEach((function(i){t.Au(i)&&t.$o(i.Z())})),this.qo(),this.hi.zr()},t.prototype.Vh=function(){return null===this.Hn&&(this.Hn=mt(this.qn)),this.Hn},t.prototype.ul=function(){return this.Lo},t.prototype.al=function(){return this.Vo},t.prototype.hl=function(t){var i=t.Jh();if(i&&i.length>0&&!this.Ao.Qt()){var n=this.Ao.Mr();null!==n&&t.Gh(n)}t.Wi()},t.prototype.Yo=function(){var t=this.Vh();if(0===t.length)return{ol:0,Ho:0};for(var i=0,n=0,e=0;e<t.length;e++){var s=t[e].ai();null!==s&&(s<i&&(i=s),s>n&&(n=s))}return{ol:i,Ho:n}},t.prototype.Ko=function(t,i,n){var e=this.Wo(i);if(null===e&&(e=this.zo(i,this.hi.I().overlayPriceScales)),this.qn.push(t),!Rt(i)){var s=this.Bo.get(i)||[];s.push(t),this.Bo.set(i,s)}e.Oh(t),t.li(e),t.oi(n),this.$o(e),this.Hn=null},t.prototype.Fo=function(t,i,n){i.eh!==n.eh&&this.hl(t)},t.prototype.zo=function(t,i){var n=f({visible:!0,autoScale:!0},x(i)),e=new _t(t,n,this.hi.I().layout,this.hi.I().localization);return e.bh(this.wt()),e},t}(),qi=function(t){function i(i){var n=t.call(this)||this;return n.ll=new Map,n.tt=i,n}return c(i,t),i.prototype.u=function(t){},i.prototype.l=function(t){if(this.tt.H){t.save();for(var i=0,n=0,e=this.tt.fl;n<e.length;n++)if(0!==(u=e[n]).At.length){t.font=u.xt;var s=this.cl(t,u.At);s>this.tt.dt?u.jr=this.tt.dt/s:u.jr=1,i+=u.vl*u.jr}var r=0;switch(this.tt._l){case"top":r=0;break;case"center":r=Math.max((this.tt.wt-i)/2,0);break;case"bottom":r=Math.max(this.tt.wt-i,0)}t.fillStyle=this.tt.et;for(var h=0,o=this.tt.fl;h<o.length;h++){var u=o[h];t.save();var l=0;switch(this.tt.dl){case"left":t.textAlign="left",l=u.vl/2;break;case"center":t.textAlign="center",l=this.tt.dt/2;break;case"right":t.textAlign="right",l=this.tt.dt-1-u.vl/2}t.translate(l,r),t.textBaseline="top",t.font=u.xt,t.scale(u.jr,u.jr),t.fillText(u.At,0,u.wl),t.restore(),r+=u.vl*u.jr}t.restore()}},i.prototype.cl=function(t,i){var n=this.Ml(t.font),e=n.get(i);return void 0===e&&(e=t.measureText(i).width,n.set(i,e)),e},i.prototype.Ml=function(t){var i=this.ll.get(t);return void 0===i&&(i=new Map,this.ll.set(t,i)),i},i}(k),Wi=function(){function t(t){this.B=!0,this.at={H:!1,et:"",wt:0,dt:0,fl:[],_l:"center",dl:"center"},this.ot=new qi(this.at),this.lt=t}return t.prototype.V=function(){this.B=!0},t.prototype.W=function(t,i){return this.B&&(this.R(t,i),this.B=!1),this.ot},t.prototype.R=function(t,i){var n=this.lt.I(),e=this.at;e.H=n.visible,e.H&&(e.et=n.color,e.dt=i,e.wt=t,e.dl=n.horzAlign,e._l=n.vertAlign,e.fl=[{At:n.text,xt:Nt(n.fontSize,n.fontFamily,n.fontStyle),vl:1.2*n.fontSize,wl:0,jr:0}])},t}(),Zi=function(t){function i(i,n){var e=t.call(this)||this;return e.xi=n,e.Bi=new Wi(e),e}return c(i,t),i.prototype.ci=function(){return[this.Bi]},i.prototype.I=function(){return this.xi},i.prototype.Wi=function(){this.Bi.V()},i}(X),$i=function(){function t(t,i){this.bl=[],this.ml=[],this.Ys=0,this.gl=null,this.pl=null,this.yl=new it,this.kl=new it,this.xl=t,this.xi=i,this.Nl=new Ot(this),this.Ao=new Ft(this,i.timeScale,this.xi.localization),this.A=new j(this,i.crosshair),this.Sl=new Ri(i.crosshair),this.Cl=new Zi(this,i.watermark),this.Dl(),this.bl[0].Uo(2e3)}return t.prototype.Tl=function(){this.Bl(new Yt(3))},t.prototype.zr=function(){this.Bl(new Yt(2))},t.prototype.so=function(t){var i=this.El(t);this.Bl(i)},t.prototype.Ll=function(){return this.pl},t.prototype.Al=function(t){var i=this.pl;this.pl=t,null!==i&&this.so(i.Vl),null!==t&&this.so(t.Vl)},t.prototype.I=function(){return this.xi},t.prototype.hh=function(t){m(this.xi,t),this.bl.forEach((function(i){return i.Io(t)})),void 0!==t.timeScale&&this.Ao.hh(t.timeScale),void 0!==t.localization&&this.Ao.ar(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.yl.hn(),this.Tl()},t.prototype.Ol=function(t,i){var n=this.zl(t);null!==n&&(n.Z.hh(i),this.yl.hn())},t.prototype.zl=function(t){for(var i=0,n=this.bl;i<n.length;i++){var e=n[i],s=e.Wo(t);if(null!==s)return{ft:e,Z:s}}return null},t.prototype.U=function(){return this.Ao},t.prototype.Pl=function(){return this.bl},t.prototype.Fl=function(){return this.Cl},t.prototype.Il=function(){return this.A},t.prototype.Wl=function(){return this.kl},t.prototype.Rl=function(t,i){t.bh(i),this.Or()},t.prototype.Cr=function(t){this.Ys=t,this.Ao.Cr(this.Ys),this.bl.forEach((function(i){return i.Cr(t)})),this.Or()},t.prototype.Dl=function(t){var i=new Qi(this.Ao,this);void 0!==t?this.bl.splice(t,0,i):this.bl.push(i);var n=void 0===t?this.bl.length-1:t,e=new Yt(3);return e.we(n,{Me:0,fh:!0}),this.Bl(e),i},t.prototype.Jo=function(t,i,n){t.Jo(i,n)},t.prototype.Go=function(t,i,n){t.Go(i,n),this.ro(),this.Bl(this.jl(t,2))},t.prototype.Qo=function(t,i){t.Qo(i),this.Bl(this.jl(t,2))},t.prototype.tl=function(t,i,n){i.ah()||t.tl(i,n)},t.prototype.il=function(t,i,n){i.ah()||(t.il(i,n),this.ro(),this.Bl(this.jl(t,2)))},t.prototype.nl=function(t,i){i.ah()||(t.nl(i),this.Bl(this.jl(t,2)))},t.prototype.sl=function(t,i){t.sl(i),this.Bl(this.jl(t,2))},t.prototype.Ul=function(t){this.Ao.Wh(t)},t.prototype.ql=function(t,i){var n=this.U();if(!n.Qt()&&0!==i){var e=n.dt();t=Math.max(1,Math.min(t,e)),n.jr(t,i),this.Or()}},t.prototype.Hl=function(t){this.Yl(0),this.Kl(t),this.$l()},t.prototype.Xl=function(t){this.Ao.Rh(t),this.Or()},t.prototype.Zl=function(){this.Ao.jh(),this.zr()},t.prototype.Yl=function(t){this.gl=t,this.Ao.Uh(t)},t.prototype.Kl=function(t){var i=!1;return null!==this.gl&&Math.abs(t-this.gl)>20&&(this.gl=null,i=!0),this.Ao.qh(t),this.Or(),i},t.prototype.$l=function(){this.Ao.Hh(),this.zr(),this.gl=null},t.prototype.O=function(){return this.ml},t.prototype.Jl=function(t,i,n){this.A.Ei(t,i);var e=NaN,s=this.Ao.Ar(t),r=this.Ao.Mr();null!==r&&(s=Math.min(Math.max(r.hs(),s),r.ss()));var h=n.Ci(),o=h.Y();null!==o&&(e=h.Di(i,o)),e=this.Sl.mo(e,s,n),this.A.Oi(s,e,n),this.Gl(),this.kl.hn(this.A.j(),{x:t,y:i})},t.prototype.Ql=function(){this.Il().Pi(),this.Gl(),this.kl.hn(null,null)},t.prototype.ro=function(){var t=this.A.ft();if(null!==t){var i=this.A.Ai(),n=this.A.Vi();this.Jl(i,n,t)}this.A.Wi()},t.prototype.tf=function(t,i){var n=this.Ao.si(0);void 0!==i&&this.Ao.V(i);var e=this.Ao.si(0),s=this.Ao.Er(),r=this.Ao.Mr();if(null!==r&&null!==n&&null!==e){var h=r.As(s),o=n.Cs>e.Cs,u=null!==t&&t>s&&!o,l=h&&this.Ao.I().shiftVisibleRangeOnNewBar;if(u&&!l&&null!==t){var a=t-s;this.Ao.dr(this.Ao.Fr()-a)}}this.Ao.Rr(t)},t.prototype.oo=function(t){null!==t&&t.el()},t.prototype.Lu=function(t){var i=this.bl.find((function(i){return i.Vh().includes(t)}));return void 0===i?null:i},t.prototype.Or=function(){this.Cl.Wi(),this.bl.forEach((function(t){return t.el()})),this.ro()},t.prototype.rn=function(){this.bl.forEach((function(t){return t.rn()})),this.bl.length=0,this.xi.localization.priceFormatter=void 0,this.xi.localization.timeFormatter=void 0},t.prototype.if=function(){return this.Nl},t.prototype.Ou=function(){return this.Nl.I()},t.prototype.Ro=function(){return this.yl},t.prototype.nf=function(t,i){var n=this.bl[0],e=this.hf(i,t,n);return this.ml.push(e),1===this.ml.length?this.Tl():this.zr(),e},t.prototype.sf=function(t){var i=this.Lu(t),n=this.ml.indexOf(t);v(-1!==n,"Series not found"),this.ml.splice(n,1),d(i).Ph(t),t.rn&&t.rn()},t.prototype.ho=function(t,i){var n=d(this.Lu(t));n.Ph(t);var e=this.zl(i);if(null===e){var s=t.ai();n.Oh(t,i,s)}else s=e.ft===n?t.ai():void 0,e.ft.Oh(t,i,s)},t.prototype.Jr=function(){var t=new Yt(2);t.ge(),this.Bl(t)},t.prototype.rf=function(t){var i=new Yt(2);i.ye(t),this.Bl(i)},t.prototype.ke=function(){var t=new Yt(2);t.ke(),this.Bl(t)},t.prototype._r=function(t){var i=new Yt(2);i._r(t),this.Bl(i)},t.prototype.dr=function(t){var i=new Yt(2);i.dr(t),this.Bl(i)},t.prototype.ef=function(){return this.xi.rightPriceScale.visible?"right":"left"},t.prototype.jl=function(t,i){var n=new Yt(i);if(null!==t){var e=this.bl.indexOf(t);n.we(e,{Me:i})}return n},t.prototype.El=function(t,i){return void 0===i&&(i=2),this.jl(this.Lu(t),i)},t.prototype.Bl=function(t){this.xl&&this.xl(t),this.bl.forEach((function(t){return t.al().To().V()}))},t.prototype.Gl=function(){this.Bl(new Yt(1))},t.prototype.hf=function(t,i,n){var e=new Oi(this,t,i),s=void 0!==t.priceScaleId?t.priceScaleId:this.ef();return n.Oh(e,s),Rt(s)||e.hh(t),e},t}(),Xi=function(){function t(t,i){this.ht=t,this.st=i}return t.prototype.an=function(t){return this.ht===t.ht&&this.st===t.st},t}();function ji(t){return t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.devicePixelRatio||1}function Gi(t){var i=d(t.getContext("2d"));return i.setTransform(1,0,0,1,0,0),i}function Ki(t,i){var n=t.createElement("canvas"),e=ji(n);return n.style.width=i.ht+"px",n.style.height=i.st+"px",n.width=i.ht*e,n.height=i.st*e,n}function tn(t,i){var n=d(t.ownerDocument).createElement("canvas");t.appendChild(n);var s,r=(void 0===s&&(s=e),new o(n,s));return r.resizeCanvas({width:i.ht,height:i.st}),r}var nn="undefined"!=typeof window,en=function(){if(!nn)return!1;var t=!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints||!!nn&&("ontouchstart"in window||Boolean(window.DocumentTouch&&document instanceof window.DocumentTouch));return"onorientationchange"in window&&t}(),sn=function(){if(!nn)return!1;var t=/Android/i.test(navigator.userAgent),i=/iPhone|iPad|iPod|AppleWebKit.+Mobile/i.test(navigator.userAgent);return t||i}(),rn=function(){function t(t,i,n){this.uf=0,this.af=null,this.lf=null,this.ff=!1,this.cf=null,this.vf=!1,this._f=!1,this.df=null,this.wf=null,this.Mf=null,this.bf=null,this.mf=0,this.gf=!1,this.pf=!1,this.yf=!1,this.kf=t,this.xf=i,this.xi=n,this.Nf()}return t.prototype.rn=function(){null!==this.df&&(this.df(),this.df=null),null!==this.wf&&(this.wf(),this.wf=null),null!==this.Mf&&(this.Mf(),this.Mf=null),this.Sf(),this.Cf()},t.prototype.Df=function(t){var i=this;this.wf&&this.wf();var n=this.Tf.bind(this);this.wf=function(){i.kf.removeEventListener("mousemove",n)},this.kf.addEventListener("mousemove",n),un(t)&&this.Tf(t);var e=this.Bf(t);this.Ef(e,this.xf.Lf)},t.prototype.Cf=function(){null!==this.af&&clearTimeout(this.af),this.uf=0,this.af=null},t.prototype.Tf=function(t){if(!this.yf||un(t)){var i=this.Bf(t);this.Ef(i,this.xf.Af)}},t.prototype.Vf=function(t){if((!("button"in t)||0===t.button)&&null===this.bf){var i=un(t);if(!this.pf||!i){this.gf=!0;var n=this.Bf(t),e=g(this.cf),s=Math.abs(e.g-n.Of),r=Math.abs(e.p-n.zf),h=s+r>5;if(h||!i){if(h&&!this.vf&&i){var o=.5*s,u=r>=o&&!this.xi.Pf,l=o>r&&!this.xi.Ff;u||l||(this.pf=!0)}h&&(this.vf=!0,this._f=!0,i&&this.Sf()),this.pf||(this.Ef(n,this.xf.If),i&&ln(t))}}}},t.prototype.Wf=function(t){if(!("button"in t)||0===t.button){var i=this.Bf(t);this.Sf(),this.cf=null,this.yf=!1,this.Mf&&(this.Mf(),this.Mf=null),un(t)&&this.Rf(t),this.Ef(i,this.xf.jf),++this.uf,this.af&&this.uf>1?(this.Ef(i,this.xf.Uf),this.Cf()):this._f||this.Ef(i,this.xf.qf),un(t)&&(ln(t),this.Rf(t),0===t.touches.length&&(this.ff=!1))}},t.prototype.Sf=function(){null!==this.lf&&(clearTimeout(this.lf),this.lf=null)},t.prototype.Hf=function(t){if(!("button"in t)||0===t.button){var i=this.Bf(t);this._f=!1,this.vf=!1,this.pf=!1,un(t)&&this.Df(t),this.cf={g:i.Of,p:i.zf},this.Mf&&(this.Mf(),this.Mf=null);var n=this.Vf.bind(this),e=this.Wf.bind(this),s=this.kf.ownerDocument.documentElement;this.Mf=function(){s.removeEventListener("touchmove",n),s.removeEventListener("touchend",e),s.removeEventListener("mousemove",n),s.removeEventListener("mouseup",e)},s.addEventListener("touchmove",n,{passive:!1}),s.addEventListener("touchend",e,{passive:!1}),this.Sf(),un(t)&&1===t.touches.length?this.lf=setTimeout(this.Yf.bind(this,t),240):(s.addEventListener("mousemove",n),s.addEventListener("mouseup",e)),this.yf=!0,this.Ef(i,this.xf.Kf),this.af||(this.uf=0,this.af=setTimeout(this.Cf.bind(this),500))}},t.prototype.Nf=function(){var t=this;this.kf.addEventListener("mouseenter",this.Df.bind(this)),this.kf.addEventListener("touchcancel",this.Sf.bind(this));var i=this.kf.ownerDocument,n=function(i){t.xf.$f&&(i.composed&&t.kf.contains(i.composedPath()[0])||i.target&&t.kf.contains(i.target)||t.xf.$f())};this.df=function(){i.removeEventListener("mousedown",n),i.removeEventListener("touchstart",n)},i.addEventListener("mousedown",n),i.addEventListener("touchstart",n,{passive:!0}),this.kf.addEventListener("mouseleave",this.Rf.bind(this)),this.kf.addEventListener("touchstart",this.Hf.bind(this),{passive:!0}),en||this.kf.addEventListener("mousedown",this.Hf.bind(this)),this.Xf(),this.kf.addEventListener("touchmove",(function(){}),{passive:!1})},t.prototype.Xf=function(){var t=this;void 0===this.xf.Zf&&void 0===this.xf.Jf&&void 0===this.xf.Gf||(this.kf.addEventListener("touchstart",(function(i){return t.Qf(i.touches)}),{passive:!0}),this.kf.addEventListener("touchmove",(function(i){if(2===i.touches.length&&null!==t.bf&&void 0!==t.xf.Jf){var n=on(i.touches[0],i.touches[1])/t.mf;t.xf.Jf(t.bf,n),ln(i)}}),{passive:!1}),this.kf.addEventListener("touchend",(function(i){t.Qf(i.touches)})))},t.prototype.Qf=function(t){1===t.length&&(this.gf=!1),2!==t.length||this.gf||this.ff?this.tc():this.ic(t)},t.prototype.ic=function(t){var i=hn(this.kf);this.bf={g:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,p:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.mf=on(t[0],t[1]),void 0!==this.xf.Zf&&this.xf.Zf(),this.Sf()},t.prototype.tc=function(){null!==this.bf&&(this.bf=null,void 0!==this.xf.Gf&&this.xf.Gf())},t.prototype.Rf=function(t){this.wf&&this.wf();var i=this.Bf(t);this.Ef(i,this.xf.nc)},t.prototype.Yf=function(t){var i=this.Bf(t);this.Ef(i,this.xf.hc),this._f=!0,this.ff=!0},t.prototype.Ef=function(t,i){i&&i.call(this.xf,t)},t.prototype.Bf=function(t){var i;i="touches"in t&&t.touches.length?t.touches[0]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0]:t;var n=hn(this.kf);return{sc:i.clientX,rc:i.clientY,Of:i.pageX,zf:i.pageY,ec:i.screenX,uc:i.screenY,ac:i.clientX-n.left,oc:i.clientY-n.top,lc:t.ctrlKey,fc:t.altKey,cc:t.shiftKey,vc:t.metaKey,pe:t.type.startsWith("mouse")?"mouse":"touch",_c:t.view}},t}();function hn(t){return t.getBoundingClientRect()||{left:0,top:0}}function on(t,i){var n=t.clientX-i.clientX,e=t.clientY-i.clientY;return Math.sqrt(n*n+e*e)}function un(t){return Boolean(t.touches)}function ln(t){t.cancelable&&t.preventDefault()}var an=function(){function t(t,i,n,e){this.Du=new fi(200),this.oe=0,this.dc="",this.Iu="",this.xu=[],this.wc=new Map,this.oe=t,this.dc=i,this.Iu=Nt(t,n,e)}return t.prototype.rn=function(){this.Du.Nu(),this.xu=[],this.wc.clear()},t.prototype.Mc=function(t,i,n,e,s){var r=this.bc(t,i);if("left"!==s){var h=ji(t.canvas);n-=Math.floor(r.mc*h)}e-=Math.floor(r.wt/2),t.drawImage(r.gc,n,e,r.dt,r.wt)},t.prototype.bc=function(t,i){var n,e=this;if(this.wc.has(i))n=y(this.wc.get(i));else{if(this.xu.length>=200){var s=y(this.xu.shift());this.wc.delete(s)}var r=ji(t.canvas),h=Math.ceil(this.oe/4.5),o=Math.round(this.oe/10),u=Math.ceil(this.Du.Vt(t,i)),l=ht(Math.round(u+2*h)),a=ht(this.oe+2*h),c=Ki(document,new Xi(l,a));n={At:i,mc:Math.round(Math.max(1,u)),dt:Math.ceil(l*r),wt:Math.ceil(a*r),gc:c},0!==u&&(this.xu.push(n.At),this.wc.set(n.At,n)),R(t=Gi(n.gc),r,(function(){t.font=e.Iu,t.fillStyle=e.dc,t.fillText(i,0,a-h-o)}))}return n},t}(),cn=function(){function t(t,i,n,e){var s=this;this.Jt=null,this.yc=null,this.kc=null,this.xc=!1,this.Nc=new fi(50),this.Sc=new an(11,"#000"),this.dc=null,this.Iu=null,this.Cc=0,this.Dc=function(){s.Tc(s.Nl.I()),s._i.Bc().ct().zr()},this.Ec=function(){s._i.Bc().ct().zr()},this._i=t,this.xi=i,this.Nl=n,this.Lc="left"===e,this.Ac=document.createElement("div"),this.Ac.style.height="100%",this.Ac.style.overflow="hidden",this.Ac.style.width="25px",this.Ac.style.left="0",this.Ac.style.position="relative",this.Vc=tn(this.Ac,new Xi(16,16)),this.Vc.subscribeCanvasConfigured(this.Dc);var r=this.Vc.canvas;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Oc=tn(this.Ac,new Xi(16,16)),this.Oc.subscribeCanvasConfigured(this.Ec);var h=this.Oc.canvas;h.style.position="absolute",h.style.zIndex="2",h.style.left="0",h.style.top="0";var o={Kf:this.zc.bind(this),If:this.Pc.bind(this),$f:this.Fc.bind(this),jf:this.Ic.bind(this),Uf:this.Wc.bind(this),Lf:this.Rc.bind(this),nc:this.jc.bind(this)};this.Uc=new rn(this.Oc.canvas,o,{Pf:!1,Ff:!0})}return t.prototype.rn=function(){this.Uc.rn(),this.Oc.unsubscribeCanvasConfigured(this.Ec),this.Oc.destroy(),this.Vc.unsubscribeCanvasConfigured(this.Dc),this.Vc.destroy(),null!==this.Jt&&this.Jt.Ih().nn(this),this.Jt=null,null!==this.kc&&(clearTimeout(this.kc),this.kc=null),this.Sc.rn()},t.prototype.qc=function(){return this.Ac},t.prototype.K=function(){return this.xi.backgroundColor},t.prototype.S=function(){return d(this.Jt).I().borderColor},t.prototype.Hc=function(){return this.xi.textColor},t.prototype.zt=function(){return this.xi.fontSize},t.prototype.Yc=function(){return Nt(this.zt(),this.xi.fontFamily)},t.prototype.Kc=function(){var t=this.Nl.I(),i=this.dc!==t.et,n=this.Iu!==t.xt;return(i||n)&&(this.Tc(t),this.dc=t.et),n&&(this.Nc.Nu(),this.Iu=t.xt),t},t.prototype.$c=function(){if(null===this.Jt)return 0;var t=34,i=this.Kc(),n=Gi(this.Vc.canvas),e=this.Jt.Ln();n.font=this.Yc(),e.length>0&&(t=Math.max(this.Nc.Vt(n,e[0].Tn),this.Nc.Vt(n,e[e.length-1].Tn)));for(var s=this.Xc(),r=s.length;r--;){var h=this.Nc.Vt(n,s[r].At());h>t&&(t=h)}var o=Math.ceil(i.Dt+i.Ct+i.Et+i.Lt+t);return o+o%2},t.prototype.Zc=function(t){if(t.ht<0||t.st<0)throw new Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(t));null!==this.yc&&this.yc.an(t)||(this.yc=t,this.Vc.resizeCanvas({width:t.ht,height:t.st}),this.Oc.resizeCanvas({width:t.ht,height:t.st}),this.Ac.style.width=t.ht+"px",this.Ac.style.height=t.st+"px",this.Ac.style.minWidth=t.ht+"px")},t.prototype.Jc=function(){return d(this.yc).ht},t.prototype.li=function(t){this.Jt!==t&&(null!==this.Jt&&this.Jt.Ih().nn(this),this.Jt=t,t.Ih().Zi(this.jn.bind(this),this))},t.prototype.Z=function(){return this.Jt},t.prototype.Nu=function(){var t=this._i.Gc();this._i.Bc().ct().sl(t,d(this.Z()))},t.prototype.Qc=function(t){if(null!==this.yc){if(1!==t){var i=Gi(this.Vc.canvas);this.tv(),this.iv(i,this.Vc.pixelRatio),this.fu(i,this.Vc.pixelRatio),this.nv(i,this.Vc.pixelRatio),this.hv(i,this.Vc.pixelRatio)}var n=Gi(this.Oc.canvas),e=this.yc.ht,s=this.yc.st;R(n,this.Oc.pixelRatio,(function(){n.clearRect(0,0,e,s)})),this.sv(n,this.Oc.pixelRatio)}},t.prototype.rv=function(){return this.Vc.canvas},t.prototype.zc=function(t){if(null!==this.Jt&&!this.Jt.Qt()&&this._i.Bc().I().handleScale.axisPressedMouseMove.price){var i=this._i.Bc().ct(),n=this._i.Gc();this.xc=!0,i.Jo(n,this.Jt,t.oc)}},t.prototype.Pc=function(t){if(null!==this.Jt&&this._i.Bc().I().handleScale.axisPressedMouseMove.price){var i=this._i.Bc().ct(),n=this._i.Gc(),e=this.Jt;i.Go(n,e,t.oc)}},t.prototype.Fc=function(){if(null!==this.Jt&&this._i.Bc().I().handleScale.axisPressedMouseMove.price){var t=this._i.Bc().ct(),i=this._i.Gc(),n=this.Jt;this.xc&&(this.xc=!1,t.Qo(i,n))}},t.prototype.Ic=function(t){if(null!==this.Jt&&this._i.Bc().I().handleScale.axisPressedMouseMove.price){var i=this._i.Bc().ct(),n=this._i.Gc();this.xc=!1,i.Qo(n,this.Jt)}},t.prototype.Wc=function(t){this._i.Bc().I().handleScale.axisDoubleClickReset&&this.Nu()},t.prototype.Rc=function(t){null!==this.Jt&&(!this._i.Bc().ct().I().handleScale.axisPressedMouseMove.price||this.Jt.oh()||this.Jt.lh()||this.ev(1))},t.prototype.jc=function(t){this.ev(0)},t.prototype.Xc=function(){var t=this,i=[],n=null===this.Jt?void 0:this.Jt;return function(e){for(var s=0;s<e.length;++s)for(var r=e[s].fi(t._i.Gc(),n),h=0;h<r.length;h++)i.push(r[h])}(this._i.Gc().Vh()),i},t.prototype.iv=function(t,i){var n=this;if(null!==this.yc){var e=this.yc.ht,s=this.yc.st;R(t,i,(function(){Y(t,0,0,e,s,n.K())}))}},t.prototype.fu=function(t,i){if(null!==this.yc&&null!==this.Jt&&this.Jt.I().borderVisible){t.save(),t.fillStyle=this.S();var n,e=Math.max(1,Math.floor(this.Kc().Dt*i));n=this.Lc?Math.floor(this.yc.ht*i)-e:0,t.fillRect(n,0,e,Math.ceil(this.yc.st*i)),t.restore()}},t.prototype.nv=function(t,i){if(null!==this.yc&&null!==this.Jt){var n=this.Jt.Ln();t.save(),t.strokeStyle=this.S(),t.font=this.Yc(),t.fillStyle=this.S();var e=this.Kc(),s=this.Jt.I().borderVisible&&this.Jt.I().drawTicks,r=this.Lc?Math.floor((this.yc.ht-e.Ct)*i-e.Dt*i):Math.floor(e.Dt*i),h=this.Lc?Math.round(r-e.Et*i):Math.round(r+e.Ct*i+e.Et*i),o=this.Lc?"right":"left",u=Math.max(1,Math.floor(i)),l=Math.floor(.5*i);if(s){var a=Math.round(e.Ct*i);t.beginPath();for(var c=0,f=n;c<f.length;c++){var p=f[c];t.rect(r,Math.round(p.Dn*i)-l,a,u)}t.fill()}t.fillStyle=this.Hc();for(var v=0,y=n;v<y.length;v++)p=y[v],this.Sc.Mc(t,p.Tn,h,Math.round(p.Dn*i),o);t.restore()}},t.prototype.tv=function(){if(null!==this.yc&&null!==this.Jt){var t=this.yc.st/2,i=[],n=this.Jt.Vh().slice(),e=this._i.Gc(),s=this.Kc();this.Jt===e.Ci()&&this._i.Gc().Vh().forEach((function(t){e.Au(t)&&n.push(t)}));var r=this.Jt.Ah()[0],h=this.Jt;n.forEach((function(n){var s=n.fi(e,h);s.forEach((function(t){t.Yt(null),t.Kt()&&i.push(t)})),r===n&&s.length>0&&(t=s[0].Pt())}));var o=i.filter((function(i){return i.Pt()<=t})),u=i.filter((function(i){return i.Pt()>t}));if(o.sort((function(t,i){return i.Pt()-t.Pt()})),o.length&&u.length&&u.push(o[0]),u.sort((function(t,i){return t.Pt()-i.Pt()})),i.forEach((function(t){return t.Yt(t.Pt())})),this.Jt.I().alignLabels){for(var l=1;l<o.length;l++){var a=o[l],c=(p=o[l-1]).wt(s,!1);a.Pt()>(v=p.Ht())-c&&a.Yt(v-c)}for(var f=1;f<u.length;f++){var p,v;a=u[f],c=(p=u[f-1]).wt(s,!0),a.Pt()<(v=p.Ht())+c&&a.Yt(v+c)}}}},t.prototype.hv=function(t,i){var n=this;if(null!==this.yc){t.save();var e=this.yc,s=this.Xc(),r=this.Kc(),h=this.Lc?"right":"left";s.forEach((function(s){if(s.$t()){var o=s.W(d(n.Jt));t.save(),o.h(t,r,n.Nc,e.ht,h,i),t.restore()}})),t.restore()}},t.prototype.sv=function(t,i){var n=this;if(null!==this.yc&&null!==this.Jt){t.save();var e=this.yc,s=this._i.Bc().ct(),r=[],h=this._i.Gc(),o=s.Il().fi(h,this.Jt);o.length&&r.push(o);var u=this.Kc(),l=this.Lc?"right":"left";r.forEach((function(s){s.forEach((function(s){t.save(),s.W(d(n.Jt)).h(t,u,n.Nc,e.ht,l,i),t.restore()}))})),t.restore()}},t.prototype.ev=function(t){this.Ac.style.cursor=1===t?"ns-resize":"default"},t.prototype.jn=function(){var t=this,i=this.$c();if(this.Cc<i){var n=this._i.Bc();null===this.kc&&(this.kc=setTimeout((function(){n&&n.ct().Tl(),t.kc=null}),100))}this.Cc=i},t.prototype.Tc=function(t){this.Sc.rn(),this.Sc=new an(t.zt,t.et,t.ae)},t}(),fn=sn,pn=function(){function t(t,i){var n=this;this.yc=new Xi(0,0),this.uv=null,this.av=null,this.ov=null,this.lv=!1,this.fv=new it,this.cv=0,this.vv=!1,this._v=null,this.dv=!1,this.wv=null,this.Dc=function(){return n.Mv&&n.hi().zr()},this.Ec=function(){return n.Mv&&n.hi().zr()},this.bv=t,this.Mv=i,this.Mv.ul().Zi(this.mv.bind(this),this,!0),this.gv=document.createElement("td"),this.gv.style.padding="0",this.gv.style.position="relative";var e=document.createElement("div");e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this.pv=document.createElement("td"),this.pv.style.padding="0",this.yv=document.createElement("td"),this.yv.style.padding="0",this.gv.appendChild(e),this.Vc=tn(e,new Xi(16,16)),this.Vc.subscribeCanvasConfigured(this.Dc);var s=this.Vc.canvas;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Oc=tn(e,new Xi(16,16)),this.Oc.subscribeCanvasConfigured(this.Ec);var r=this.Oc.canvas;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.kv=document.createElement("tr"),this.kv.appendChild(this.pv),this.kv.appendChild(this.gv),this.kv.appendChild(this.yv),this.xv();var h=this.Bc().I().handleScroll;this.Uc=new rn(this.Oc.canvas,this,{Pf:!h.vertTouchDrag,Ff:!h.horzTouchDrag})}return t.prototype.rn=function(){null!==this.uv&&this.uv.rn(),null!==this.av&&this.av.rn(),this.Oc.unsubscribeCanvasConfigured(this.Ec),this.Oc.destroy(),this.Vc.unsubscribeCanvasConfigured(this.Dc),this.Vc.destroy(),null!==this.Mv&&this.Mv.ul().nn(this),this.Uc.rn()},t.prototype.Gc=function(){return d(this.Mv)},t.prototype.Nv=function(i){null!==this.Mv&&this.Mv.ul().nn(this),this.Mv=i,null!==this.Mv&&this.Mv.ul().Zi(t.prototype.mv.bind(this),this,!0),this.xv()},t.prototype.Bc=function(){return this.bv},t.prototype.qc=function(){return this.kv},t.prototype.xv=function(){if(null!==this.Mv&&(this.Sv(),0!==this.hi().O().length)){if(null!==this.uv){var t=this.Mv.Xo();this.uv.li(d(t))}if(null!==this.av){var i=this.Mv.Zo();this.av.li(d(i))}}},t.prototype.jo=function(){return null!==this.Mv?this.Mv.jo():0},t.prototype.Uo=function(t){this.Mv&&this.Mv.Uo(t)},t.prototype.Lf=function(t){if(this.Mv){var i=t.ac,n=t.oc;en||this.Cv(i,n)}},t.prototype.Kf=function(t){if(this.vv=!1,this.dv=null!==this._v,this.Mv){if(document.activeElement!==document.body&&document.activeElement!==document.documentElement)d(document.activeElement).blur();else{var i=document.getSelection();null!==i&&i.removeAllRanges()}var n=this.hi();if(!this.Mv.Ci().Qt()&&!n.U().Qt()){if(null!==this._v){var e=n.Il();this.wv={x:e.Mt(),y:e.bt()},this._v={x:t.ac,y:t.oc}}en||this.Cv(t.ac,t.oc)}}},t.prototype.Af=function(t){if(this.Mv){var i=t.ac,n=t.oc;if(this.Dv()&&this.Tv(),!en){this.Cv(i,n);var e=this.Wu(i,n);this.hi().Al(e&&{Vl:e.Vl,Bv:e.Bv}),null!==e&&void 0!==e._c.Ev&&e._c.Ev(i,n)}}},t.prototype.qf=function(t){if(null!==this.Mv){var i=t.ac,n=t.oc,e=this.Wu(i,n);if(null!==e&&void 0!==e._c.Lv&&e._c.Lv(i,n),this.fv.sn()){var s=this.hi().Il().j();this.fv.hn(s,{x:i,y:n})}this.Av()}},t.prototype.If=function(t){if(null!==this.Mv){var i=this.hi(),n=t.ac,e=t.oc;if(null!==this._v){this.dv=!1;var s=d(this.wv),r=s.x+(n-this._v.x),h=s.y+(e-this._v.y);this.Cv(r,h)}else this.Dv()||this.Cv(n,e);if(!i.U().Qt()){var o=this.bv.I().handleScroll;if(o.pressedMouseMove&&"touch"!==t.pe||(o.horzTouchDrag||o.vertTouchDrag)&&"mouse"!==t.pe){var u=this.Mv.Ci();null!==this.ov||this.Vv()||(this.ov={x:t.sc,y:t.rc}),null===this.ov||this.ov.x===t.sc&&this.ov.y===t.rc||this.lv||(u.Qt()||i.tl(this.Mv,u,t.oc),i.Yl(t.ac),this.lv=!0),this.lv&&(u.Qt()||i.il(this.Mv,u,t.oc),i.Kl(t.ac))}}}},t.prototype.jf=function(t){if(null!==this.Mv){this.vv=!1;var i=this.hi();if(this.lv){var n=this.Mv.Ci();i.nl(this.Mv,n),i.$l(),this.ov=null,this.lv=!1}}},t.prototype.hc=function(t){if(this.vv=!0,null===this._v&&fn){var i={x:t.ac,y:t.oc};this.Ov(i,i)}},t.prototype.nc=function(t){null!==this.Mv&&(this.Mv.ct().Al(null),sn||this.Tv())},t.prototype.zv=function(){return this.fv},t.prototype.Zf=function(){this.cv=1},t.prototype.Jf=function(t,i){if(this.bv.I().handleScale.pinch){var n=5*(i-this.cv);this.cv=i,this.hi().ql(t.g,n)}},t.prototype.Wu=function(t,i){var n=this.Mv;if(null===n)return null;for(var e=0,s=n.Vh();e<s.length;e++){var r=s[e],h=this.Pv(r.ci(n),t,i);if(null!==h)return{Vl:r,_c:h._c,Bv:h.Bv}}return null},t.prototype.Fv=function(t,i){d("left"===i?this.uv:this.av).Zc(new Xi(t,this.yc.st))},t.prototype.Iv=function(){return this.yc},t.prototype.Zc=function(t){if(t.ht<0||t.st<0)throw new Error("Try to set invalid size to PaneWidget "+JSON.stringify(t));this.yc.an(t)||(this.yc=t,this.Vc.resizeCanvas({width:t.ht,height:t.st}),this.Oc.resizeCanvas({width:t.ht,height:t.st}),this.gv.style.width=t.ht+"px",this.gv.style.height=t.st+"px")},t.prototype.Wv=function(){var t=d(this.Mv);t.$o(t.Xo()),t.$o(t.Zo());for(var i=0,n=t.Ah();i<n.length;i++){var e=n[i];if(t.Au(e)){var s=e.Z();null!==s&&t.$o(s),e.Wi()}}},t.prototype.rv=function(){return this.Vc.canvas},t.prototype.Qc=function(t){if(0!==t&&null!==this.Mv){if(t>1&&this.Wv(),null!==this.uv&&this.uv.Qc(t),null!==this.av&&this.av.Qc(t),1!==t){var i=Gi(this.Vc.canvas);i.save(),this.iv(i,this.Rv(),this.Vc.pixelRatio),this.Mv&&(this.jv(i,this.Vc.pixelRatio),this.Uv(i,this.Vc.pixelRatio),this.qv(i,this.Vc.pixelRatio)),i.restore()}var n=Gi(this.Oc.canvas);n.clearRect(0,0,Math.ceil(this.yc.ht*this.Oc.pixelRatio),Math.ceil(this.yc.st*this.Oc.pixelRatio)),this.Hv(n,this.Oc.pixelRatio)}},t.prototype.Yv=function(){return this.uv},t.prototype.Kv=function(){return this.av},t.prototype.Rv=function(){return this.bv.I().layout.backgroundColor},t.prototype.mv=function(){null!==this.Mv&&this.Mv.ul().nn(this),this.Mv=null},t.prototype.iv=function(t,i,n){var e=this;R(t,n,(function(){Y(t,0,0,e.yc.ht,e.yc.st,i)}))},t.prototype.jv=function(t,i){var n=d(this.Mv),e=n.al().To().W(n.wt(),n.dt());null!==e&&(t.save(),e.h(t,i,!1),t.restore())},t.prototype.Uv=function(t,i){var n=this.hi().Fl();this.$v(n,t,i),this.Xv(n,t,i)},t.prototype.Hv=function(t,i){this.Xv(this.hi().Il(),t,i)},t.prototype.qv=function(t,i){for(var n=d(this.Mv).Vh(),e=0,s=n;e<s.length;e++){var r=s[e];this.$v(r,t,i)}for(var h=0,o=n;h<o.length;h++)r=o[h],this.Xv(r,t,i)},t.prototype.Xv=function(t,i,n){for(var e=d(this.Mv),s=t.ci(e),r=e.wt(),h=e.dt(),o=e.ct().Ll(),u=null!==o&&o.Vl===t,l=null!==o&&u&&void 0!==o.Bv?o.Bv.Ru:void 0,a=0,c=s;a<c.length;a++){var f=c[a].W(r,h);null!==f&&(i.save(),f.h(i,n,u,l),i.restore())}},t.prototype.$v=function(t,i,n){for(var e=d(this.Mv),s=t.ci(e),r=e.wt(),h=e.dt(),o=e.ct().Ll(),u=null!==o&&o.Vl===t,l=null!==o&&u&&void 0!==o.Bv?o.Bv.Ru:void 0,a=0,c=s;a<c.length;a++){var f=c[a].W(r,h);null!==f&&void 0!==f.o&&(i.save(),f.o(i,n,u,l),i.restore())}},t.prototype.Pv=function(t,i,n){for(var e=0,s=t;e<s.length;e++){var r=s[e],h=r.W(this.yc.st,this.yc.ht);if(null!==h&&h.Wu){var o=h.Wu(i,n);if(null!==o)return{_c:r,Bv:o}}}return null},t.prototype.Sv=function(){if(null!==this.Mv){var t=this.bv;t.I().leftPriceScale.visible||null===this.uv||(this.pv.removeChild(this.uv.qc()),this.uv.rn(),this.uv=null),t.I().rightPriceScale.visible||null===this.av||(this.yv.removeChild(this.av.qc()),this.av.rn(),this.av=null);var i=t.ct().if();t.I().leftPriceScale.visible&&null===this.uv&&(this.uv=new cn(this,t.I().layout,i,"left"),this.pv.appendChild(this.uv.qc())),t.I().rightPriceScale.visible&&null===this.av&&(this.av=new cn(this,t.I().layout,i,"right"),this.yv.appendChild(this.av.qc()))}},t.prototype.Dv=function(){return fn&&null===this._v},t.prototype.Vv=function(){return fn&&this.vv||null!==this._v},t.prototype.Zv=function(t){return Math.max(0,Math.min(t,this.yc.ht-1))},t.prototype.Jv=function(t){return Math.max(0,Math.min(t,this.yc.st-1))},t.prototype.Cv=function(t,i){this.hi().Jl(this.Zv(t),this.Jv(i),d(this.Mv))},t.prototype.Tv=function(){this.hi().Ql()},t.prototype.Av=function(){this.dv&&(this._v=null,this.Tv())},t.prototype.Ov=function(t,i){this._v=t,this.dv=!1,this.Cv(i.x,i.y);var n=this.hi().Il();this.wv={x:n.Mt(),y:n.bt()}},t.prototype.hi=function(){return this.bv.ct()},t}(),vn=function(){function t(t,i,n,e){var s=this;this.B=!0,this.yc=new Xi(0,0),this.Dc=function(){return s.Qc(3)},this.Lc="left"===t,this.Nl=n.if,this.xi=i,this.Gv=e,this.Ac=document.createElement("div"),this.Ac.style.width="25px",this.Ac.style.height="100%",this.Ac.style.overflow="hidden",this.Vc=tn(this.Ac,new Xi(16,16)),this.Vc.subscribeCanvasConfigured(this.Dc)}return t.prototype.rn=function(){this.Vc.unsubscribeCanvasConfigured(this.Dc),this.Vc.destroy()},t.prototype.qc=function(){return this.Ac},t.prototype.Iv=function(){return this.yc},t.prototype.Zc=function(t){if(t.ht<0||t.st<0)throw new Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(t));this.yc.an(t)||(this.yc=t,this.Vc.resizeCanvas({width:t.ht,height:t.st}),this.Ac.style.width=t.ht+"px",this.Ac.style.minWidth=t.ht+"px",this.Ac.style.height=t.st+"px",this.B=!0)},t.prototype.Qc=function(t){if((!(t<3)||this.B)&&0!==this.yc.ht&&0!==this.yc.st){this.B=!1;var i=Gi(this.Vc.canvas);this.iv(i,this.Vc.pixelRatio),this.fu(i,this.Vc.pixelRatio)}},t.prototype.rv=function(){return this.Vc.canvas},t.prototype.fu=function(t,i){if(this.Gv()){var n=this.yc.ht;t.save(),t.fillStyle=this.xi.timeScale.borderColor;var e=Math.floor(this.Nl.I().Dt*i),s=this.Lc?Math.round(n*i)-e:0;t.fillRect(s,0,e,e),t.restore()}},t.prototype.iv=function(t,i){var n=this;R(t,i,(function(){Y(t,0,0,n.yc.ht,n.yc.st,n.xi.layout.backgroundColor)}))},t}();function yn(t,i){return t.Fs>i.Fs?t:i}var dn=function(){function t(t){var i=this;this.Qv=null,this.t_=null,this.ue=null,this.i_=!1,this.yc=new Xi(0,0),this.Dc=function(){return i.bv.ct().zr()},this.Ec=function(){return i.bv.ct().zr()},this.bv=t,this.xi=t.I().layout,this.n_=document.createElement("tr"),this.h_=document.createElement("td"),this.h_.style.padding="0",this.s_=document.createElement("td"),this.s_.style.padding="0",this.Ac=document.createElement("td"),this.Ac.style.height="25px",this.Ac.style.padding="0",this.r_=document.createElement("div"),this.r_.style.width="100%",this.r_.style.height="100%",this.r_.style.position="relative",this.r_.style.overflow="hidden",this.Ac.appendChild(this.r_),this.Vc=tn(this.r_,new Xi(16,16)),this.Vc.subscribeCanvasConfigured(this.Dc);var n=this.Vc.canvas;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Oc=tn(this.r_,new Xi(16,16)),this.Oc.subscribeCanvasConfigured(this.Ec);var e=this.Oc.canvas;e.style.position="absolute",e.style.zIndex="2",e.style.left="0",e.style.top="0",this.n_.appendChild(this.h_),this.n_.appendChild(this.Ac),this.n_.appendChild(this.s_),this.e_(),this.bv.ct().Ro().Zi(this.e_.bind(this),this),this.Uc=new rn(this.Oc.canvas,this,{Pf:!0,Ff:!1})}return t.prototype.rn=function(){this.Uc.rn(),null!==this.Qv&&this.Qv.rn(),null!==this.t_&&this.t_.rn(),this.Oc.unsubscribeCanvasConfigured(this.Ec),this.Oc.destroy(),this.Vc.unsubscribeCanvasConfigured(this.Dc),this.Vc.destroy()},t.prototype.qc=function(){return this.n_},t.prototype.u_=function(){return this.Qv},t.prototype.a_=function(){return this.t_},t.prototype.Kf=function(t){if(!this.i_){this.i_=!0;var i=this.bv.ct();!i.U().Qt()&&this.bv.I().handleScale.axisPressedMouseMove.time&&i.Ul(t.ac)}},t.prototype.$f=function(){var t=this.bv.ct();!t.U().Qt()&&this.i_&&(this.i_=!1,this.bv.I().handleScale.axisPressedMouseMove.time&&t.Zl())},t.prototype.If=function(t){var i=this.bv.ct();!i.U().Qt()&&this.bv.I().handleScale.axisPressedMouseMove.time&&i.Xl(t.ac)},t.prototype.jf=function(t){this.i_=!1;var i=this.bv.ct();i.U().Qt()&&!this.bv.I().handleScale.axisPressedMouseMove.time||i.Zl()},t.prototype.Uf=function(){this.bv.I().handleScale.axisDoubleClickReset&&this.bv.ct().ke()},t.prototype.Lf=function(t){this.bv.ct().I().handleScale.axisPressedMouseMove.time&&this.ev(1)},t.prototype.nc=function(t){this.ev(0)},t.prototype.Iv=function(){return this.yc},t.prototype.o_=function(t,i,n){this.yc&&this.yc.an(t)||(this.yc=t,this.Vc.resizeCanvas({width:t.ht,height:t.st}),this.Oc.resizeCanvas({width:t.ht,height:t.st}),this.Ac.style.width=t.ht+"px",this.Ac.style.height=t.st+"px"),null!==this.Qv&&this.Qv.Zc(new Xi(i,t.st)),null!==this.t_&&this.t_.Zc(new Xi(n,t.st))},t.prototype.l_=function(){var t=this.f_();return Math.ceil(t.Dt+t.Ct+t.zt+t.Tt+t.Bt)},t.prototype.V=function(){this.bv.ct().U().Ln()},t.prototype.rv=function(){return this.Vc.canvas},t.prototype.Qc=function(t){if(0!==t){if(1!==t){var i=Gi(this.Vc.canvas);this.iv(i,this.Vc.pixelRatio),this.fu(i,this.Vc.pixelRatio),this.nv(i,this.Vc.pixelRatio),null!==this.Qv&&this.Qv.Qc(t),null!==this.t_&&this.t_.Qc(t)}var n=Gi(this.Oc.canvas),e=this.Oc.pixelRatio;n.clearRect(0,0,Math.ceil(this.yc.ht*e),Math.ceil(this.yc.st*e)),this.c_([this.bv.ct().Il()],n,e)}},t.prototype.iv=function(t,i){var n=this;R(t,i,(function(){Y(t,0,0,n.yc.ht,n.yc.st,n.Rv())}))},t.prototype.fu=function(t,i){if(this.bv.I().timeScale.borderVisible){t.save(),t.fillStyle=this.v_();var n=Math.max(1,Math.floor(this.f_().Dt*i));t.fillRect(0,0,Math.ceil(this.yc.ht*i),n),t.restore()}},t.prototype.nv=function(t,i){var n=this,e=this.bv.ct().U().Ln();if(e&&0!==e.length){var s=e.reduce(yn,e[0]).Fs;s>30&&s<40&&(s=30),t.save(),t.strokeStyle=this.v_();var r=this.f_(),h=r.Dt+r.Ct+r.Tt+r.zt-r.Ot;t.textAlign="center",t.fillStyle=this.v_();var o=Math.floor(this.f_().Dt*i),u=Math.max(1,Math.floor(i)),l=Math.floor(.5*i);if(this.bv.ct().U().I().borderVisible){t.beginPath();for(var a=Math.round(r.Ct*i),c=e.length;c--;){var f=Math.round(e[c].Dn*i);t.rect(f-l,o,u,a)}t.fill()}t.fillStyle=this.fe(),R(t,i,(function(){t.font=n.__();for(var i=0,r=e;i<r.length;i++)(l=r[i]).Fs<s&&t.fillText(l.Tn,l.Dn,h);t.font=n.d_();for(var o=0,u=e;o<u.length;o++){var l;(l=u[o]).Fs>=s&&t.fillText(l.Tn,l.Dn,h)}}))}},t.prototype.c_=function(t,i,n){for(var e=this.f_(),s=0,r=t;s<r.length;s++)for(var h=0,o=r[s].vi();h<o.length;h++){var u=o[h];i.save(),u.W().h(i,e,n),i.restore()}},t.prototype.Rv=function(){return this.xi.backgroundColor},t.prototype.v_=function(){return this.bv.I().timeScale.borderColor},t.prototype.fe=function(){return this.xi.textColor},t.prototype.oe=function(){return this.xi.fontSize},t.prototype.__=function(){return Nt(this.oe(),this.xi.fontFamily)},t.prototype.d_=function(){return Nt(this.oe(),this.xi.fontFamily,"bold")},t.prototype.f_=function(){null===this.ue&&(this.ue={Dt:1,Ot:NaN,Tt:NaN,Bt:NaN,ni:NaN,Ct:3,zt:NaN,xt:"",ii:new fi});var t=this.ue,i=this.__();if(t.xt!==i){var n=this.oe();t.zt=n,t.xt=i,t.Tt=Math.ceil(n/2.5),t.Bt=t.Tt,t.ni=Math.ceil(n/2),t.Ot=Math.round(this.oe()/5),t.ii.Nu()}return this.ue},t.prototype.ev=function(t){this.Ac.style.cursor=1===t?"ew-resize":"default"},t.prototype.e_=function(){var t=this.bv.ct(),i=t.I();i.leftPriceScale.visible||null===this.Qv||(this.h_.removeChild(this.Qv.qc()),this.Qv.rn(),this.Qv=null),i.rightPriceScale.visible||null===this.t_||(this.s_.removeChild(this.t_.qc()),this.t_.rn(),this.t_=null);var n={if:this.bv.ct().if()};if(i.leftPriceScale.visible&&null===this.Qv){var e=function(){return i.leftPriceScale.borderVisible&&t.U().I().borderVisible};this.Qv=new vn("left",this.bv.I(),n,e),this.h_.appendChild(this.Qv.qc())}i.rightPriceScale.visible&&null===this.t_&&(e=function(){return i.rightPriceScale.borderVisible&&t.U().I().borderVisible},this.t_=new vn("right",this.bv.I(),n,e),this.s_.appendChild(this.t_.qc()))},t}(),gn=function(){function t(t,i){var n;this.w_=[],this.M_=0,this.An=0,this.Ys=0,this.b_=0,this.m_=0,this.g_=null,this.p_=!1,this.fv=new it,this.kl=new it,this.xi=i,this.n_=document.createElement("div"),this.n_.classList.add("tv-lightweight-charts"),this.n_.style.overflow="hidden",this.n_.style.width="100%",this.n_.style.height="100%",(n=this.n_).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.y_=document.createElement("table"),this.y_.setAttribute("cellspacing","0"),this.n_.appendChild(this.y_),this.k_=this.x_.bind(this),this.n_.addEventListener("wheel",this.k_,{passive:!1}),this.hi=new $i(this.xl.bind(this),this.xi),this.ct().Wl().Zi(this.N_.bind(this),this),this.S_=new dn(this),this.y_.appendChild(this.S_.qc());var e=this.xi.width,s=this.xi.height;if(0===e||0===s){var r=t.getBoundingClientRect();0===e&&(e=Math.floor(r.width),e-=e%2),0===s&&(s=Math.floor(r.height),s-=s%2)}this.C_(e,s),this.D_(),t.appendChild(this.n_),this.T_(),this.hi.U().Xr().Zi(this.hi.Tl.bind(this.hi),this),this.hi.Ro().Zi(this.hi.Tl.bind(this.hi),this)}return t.prototype.ct=function(){return this.hi},t.prototype.I=function(){return this.xi},t.prototype.B_=function(){return this.w_},t.prototype.rn=function(){this.n_.removeEventListener("wheel",this.k_),0!==this.M_&&window.cancelAnimationFrame(this.M_),this.hi.Wl().nn(this),this.hi.U().Xr().nn(this),this.hi.Ro().nn(this),this.hi.rn();for(var t=0,i=this.w_;t<i.length;t++){var n=i[t];this.y_.removeChild(n.qc()),n.zv().nn(this),n.rn()}this.w_=[],d(this.S_).rn(),null!==this.n_.parentElement&&this.n_.parentElement.removeChild(this.n_),this.kl.rn(),this.fv.rn()},t.prototype.C_=function(t,i,n){if(void 0===n&&(n=!1),this.An!==i||this.Ys!==t){this.An=i,this.Ys=t;var e=i+"px",s=t+"px";d(this.n_).style.height=e,d(this.n_).style.width=s,this.y_.style.height=e,this.y_.style.width=s,n?this.E_(new Yt(3)):this.hi.Tl()}},t.prototype.Qc=function(t){void 0===t&&(t=new Yt(3));for(var i=0;i<this.w_.length;i++)this.w_[i].Qc(t.me(i).Me);this.S_.Qc(t.be())},t.prototype.hh=function(t){this.hi.hh(t),this.T_();var i=t.width||this.Ys,n=t.height||this.An;this.C_(i,n)},t.prototype.zv=function(){return this.fv},t.prototype.Wl=function(){return this.kl},t.prototype.L_=function(){var t=this;null!==this.g_&&(this.E_(this.g_),this.g_=null);var i=this.w_[0],n=Ki(document,new Xi(this.Ys,this.An)),e=Gi(n),s=ji(n);return R(e,s,(function(){var n=0,s=0,r=function(i){for(var r=0;r<t.w_.length;r++){var h=t.w_[r],o=h.Iv().st,u=d("left"===i?h.Yv():h.Kv()),l=u.rv();e.drawImage(l,n,s,u.Jc(),o),s+=o}};t.A_()&&(r("left"),n=d(i.Yv()).Jc()),s=0;for(var h=0;h<t.w_.length;h++){var o=t.w_[h],u=o.Iv(),l=o.rv();e.drawImage(l,n,s,u.ht,u.st),s+=u.st}n+=i.Iv().ht,t.V_()&&(s=0,r("right"));var a=function(i){var r=d("left"===i?t.S_.u_():t.S_.a_()),h=r.Iv(),o=r.rv();e.drawImage(o,n,s,h.ht,h.st)};if(t.xi.timeScale.visible){n=0,t.A_()&&(a("left"),n=d(i.Yv()).Jc());var c=t.S_.Iv();l=t.S_.rv(),e.drawImage(l,n,s,c.ht,c.st),t.V_()&&(n+=i.Iv().ht,a("right"),e.restore())}})),n},t.prototype.O_=function(t){return"none"===t||"left"===t&&!this.A_()||"right"===t&&!this.V_()||0===this.w_.length?0:d("left"===t?this.w_[0].Yv():this.w_[0].Kv()).Jc()},t.prototype.z_=function(){for(var t=0,i=0,n=0,e=0,s=this.w_;e<s.length;e++){var r=s[e];this.A_()&&(i=Math.max(i,d(r.Yv()).$c())),this.V_()&&(n=Math.max(n,d(r.Kv()).$c())),t+=r.jo()}var h=this.Ys,o=this.An,u=Math.max(h-i-n,0),l=this.xi.timeScale.visible?this.S_.l_():0;l%2&&(l+=1);for(var a=0+l,c=o<a?0:o-a,f=c/t,p=0,v=0;v<this.w_.length;++v){(r=this.w_[v]).Nv(this.hi.Pl()[v]);var y,g;g=v===this.w_.length-1?c-p:Math.round(r.jo()*f),p+=y=Math.max(g,2),r.Zc(new Xi(u,y)),this.A_()&&r.Fv(i,"left"),this.V_()&&r.Fv(n,"right"),r.Gc()&&this.hi.Rl(r.Gc(),y)}this.S_.o_(new Xi(u,l),i,n),this.hi.Cr(u),this.b_!==i&&(this.b_=i),this.m_!==n&&(this.m_=n)},t.prototype.x_=function(t){var i=t.deltaX/100,n=-t.deltaY/100;if(0!==i&&this.xi.handleScroll.mouseWheel||0!==n&&this.xi.handleScale.mouseWheel){switch(t.cancelable&&t.preventDefault(),t.deltaMode){case t.DOM_DELTA_PAGE:i*=120,n*=120;break;case t.DOM_DELTA_LINE:i*=32,n*=32}if(0!==n&&this.xi.handleScale.mouseWheel){var e=Math.sign(n)*Math.min(1,Math.abs(n)),s=t.clientX-this.n_.getBoundingClientRect().left;this.ct().ql(s,e)}0!==i&&this.xi.handleScroll.mouseWheel&&this.ct().Hl(-80*i)}},t.prototype.E_=function(t){var i=t.be();if(3===i&&this.P_(),3===i||2===i){for(var n=this.hi.Pl(),e=0;e<n.length;e++)t.me(e).fh&&n[e].rl();for(var s=t.xe(),r=0,h=s;r<h.length;r++){var o=h[r];this.Ne(o)}s.length>0&&(this.hi.Or(),this.hi.ro(),this.hi.zr()),this.S_.V()}this.Qc(t)},t.prototype.Ne=function(t){var i=this.hi.U();switch(t.pe){case 0:i.Jr();break;case 1:i.Gr(t.J);break;case 2:i._r(t.J);break;case 3:i.dr(t.J);break;case 4:i.Wr()}},t.prototype.xl=function(t){var i=this;null!==this.g_?this.g_.vn(t):this.g_=t,this.p_||(this.p_=!0,this.M_=window.requestAnimationFrame((function(){i.p_=!1,i.M_=0,null!==i.g_&&(i.E_(i.g_),i.g_=null)})))},t.prototype.P_=function(){this.D_()},t.prototype.D_=function(){for(var t=this.hi.Pl(),i=t.length,n=this.w_.length,e=i;e<n;e++){var s=y(this.w_.pop());this.y_.removeChild(s.qc()),s.zv().nn(this),s.rn()}for(e=n;e<i;e++)(s=new pn(this,t[e])).zv().Zi(this.F_.bind(this),this),this.w_.push(s),this.y_.insertBefore(s.qc(),this.S_.qc());for(e=0;e<i;e++){var r=t[e];(s=this.w_[e]).Gc()!==r?s.Nv(r):s.xv()}this.T_(),this.z_()},t.prototype.I_=function(t,i){var n,e=new Map;if(null!==t&&this.hi.O().forEach((function(i){var n=i.ta(t);null!==n&&e.set(i,n)})),null!==t){var s=this.hi.U().si(t);null!==s&&(n=s)}var r=this.ct().Ll(),h=null!==r&&r.Vl instanceof Oi?r.Vl:void 0,o=null!==r&&void 0!==r.Bv?r.Bv.Uu:void 0;return{P:n,W_:i||void 0,R_:h,j_:e,U_:o}},t.prototype.F_=function(t,i){var n=this;this.fv.hn((function(){return n.I_(t,i)}))},t.prototype.N_=function(t,i){var n=this;this.kl.hn((function(){return n.I_(t,i)}))},t.prototype.T_=function(){var t=this.xi.timeScale.visible?"":"none";this.S_.qc().style.display=t},t.prototype.A_=function(){return this.xi.leftPriceScale.visible},t.prototype.V_=function(){return this.xi.rightPriceScale.visible},t}();function mn(t,i,n){var e=n.value,s={Ps:i,P:t,J:[e,e,e,e]};return"color"in n&&void 0!==n.color&&(s.et=n.color),s}function Mn(t,i,n){return{Ps:i,P:t,J:[n.open,n.high,n.low,n.close]}}function wn(t){return void 0!==t.J}function bn(t){return function(i,n,e){return void 0===(s=e).open&&void 0===s.value?{P:i,Ps:n}:t(i,n,e);var s}}var _n={Candlestick:bn(Mn),Bar:bn(Mn),Area:bn(mn),Histogram:bn(mn),Line:bn(mn)};function xn(t){return _n[t]}function Cn(t){return 60*t*60*1e3}function Pn(t){return 60*t*1e3}var Sn=[{q_:1,Fs:20},{q_:(1,1e3),Fs:19},{q_:Pn(1),Fs:20},{q_:Pn(5),Fs:21},{q_:Pn(30),Fs:22},{q_:Cn(1),Fs:30},{q_:Cn(3),Fs:31},{q_:Cn(6),Fs:32},{q_:Cn(12),Fs:33}];function kn(t,i){if(null!==i){var n=new Date(1e3*i),e=new Date(1e3*t);if(e.getUTCFullYear()!==n.getUTCFullYear())return 70;if(e.getUTCMonth()!==n.getUTCMonth())return 60;if(e.getUTCDate()!==n.getUTCDate())return 50;for(var s=Sn.length-1;s>=0;--s)if(Math.floor(n.getTime()/Sn[s].q_)!==Math.floor(e.getTime()/Sn[s].q_))return Sn[s].Fs}return 20}function An(t){if(!zt(t))throw new Error("time must be of type BusinessDay");var i=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{Cs:Math.round(i.getTime()/1e3),Ss:t}}function Tn(t){if(!Jt(t))throw new Error("time must be of type isUTCTimestamp");return{Cs:t}}function En(t){return 0===t.length?null:zt(t[0].time)?An:Tn}function Ln(t){return Jt(t)?Tn(t):zt(t)?An(t):An(Bn(t))}function Bn(t){var i=new Date(t);if(isNaN(i.getTime()))throw new Error("Invalid date string="+t+", expected format=yyyy-mm-dd");return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function Vn(t){b(t.time)&&(t.time=Bn(t.time))}function In(t){return{Ps:0,H_:new Map,Fh:t}}var Fn=function(){function t(){this.Y_=new Map,this.K_=new Map,this.X_=new Map,this.Z_=[]}return t.prototype.rn=function(){this.Y_.clear(),this.K_.clear(),this.X_.clear(),this.Z_=[]},t.prototype.J_=function(t,i){var n=this;this.X_.has(t)&&this.Y_.forEach((function(i){return i.H_.delete(t)}));var e=[];if(0!==i.length){!function(t){t.forEach(Vn)}(i);var s=d(En(i)),r=xn(t.da());e=i.map((function(i){var e=s(i.time),h=n.Y_.get(e.Cs);void 0===h&&(h=In(e),n.Y_.set(e.Cs,h));var o=r(e,h.Ps,i);return h.H_.set(t,o),o}))}return this.G_(),this.Q_(t,e),this.td(t)},t.prototype.sf=function(t){return this.J_(t,[])},t.prototype.nd=function(t,i){Vn(i);var n=d(En([i]))(i.time),e=this.X_.get(t);if(void 0!==e&&n.Cs<e.Cs)throw new Error("Cannot update oldest data, last time="+e.Cs+", new time="+n.Cs);var s=this.Y_.get(n.Cs),r=void 0===s;void 0===s&&(s=In(n),this.Y_.set(n.Cs,s));var h=xn(t.da())(n,s.Ps,i);s.H_.set(t,h);var o=this.hd(t,h);if(!r){var u=new Map;return null!==o&&u.set(t,o),{sd:u,U:{Er:this.rd()}}}return this.td(t)},t.prototype.hd=function(t,i){var n=this.K_.get(t);void 0===n&&(n=[],this.K_.set(t,n));var e=0!==n.length?n[n.length-1]:null,s=null;return null===e||i.P.Cs>e.P.Cs?wn(i)&&(n.push(i),s={Tl:!1,ed:[i]}):wn(i)?(n[n.length-1]=i,s={Tl:!1,ed:[i]}):(n.splice(-1,1),s={Tl:!0,ed:n}),this.X_.set(t,i.P),s},t.prototype.Q_=function(t,i){0!==i.length?(this.K_.set(t,i.filter(wn)),this.X_.set(t,i[i.length-1].P)):(this.K_.delete(t),this.X_.delete(t))},t.prototype.G_=function(){var t=new Map;this.Y_.forEach((function(i,n){i.H_.size>0&&t.set(n,i)})),this.Y_=t},t.prototype.ud=function(t){for(var i=-1,n=0;n<this.Z_.length&&n<t.length;++n){var e=this.Z_[n],s=t[n];if(e.P.Cs!==s.P.Cs){i=n;break}s.zs=e.zs}if(-1===i&&this.Z_.length!==t.length&&(i=Math.min(this.Z_.length,t.length)),-1===i)return-1;var r=function(i){var n=y(h.Y_.get(t[i].P.Cs));n.Ps=i,n.H_.forEach((function(t){t.Ps=i}))},h=this;for(n=i;n<t.length;++n)r(n);return function(t,i){void 0===i&&(i=0);for(var n=0===i||0===t.length?null:t[i-1].P.Cs,e=0,s=i;s<t.length;++s){var r=t[s];r.zs=kn(r.P.Cs,n),e+=r.P.Cs-(n||r.P.Cs),n=r.P.Cs}if(0===i&&t.length>1){var h=Math.ceil(e/(t.length-1)),o=t[0].P.Cs-h;t[0].zs=kn(t[0].P.Cs,o)}}(t,i),this.Z_=t,i},t.prototype.rd=function(){if(0===this.K_.size)return null;var t=0;return this.K_.forEach((function(i){0!==i.length&&(t=Math.max(t,i[i.length-1].Ps))})),t},t.prototype.td=function(t){var i=Array.from(this.Y_.values()).map((function(t){return{zs:0,P:t.Fh}}));i.sort((function(t,i){return t.P.Cs-i.P.Cs}));var n=this.ud(i),e={sd:new Map,U:{Er:this.rd()}};if(-1!==n)this.K_.forEach((function(t,i){e.sd.set(i,{ed:t,Tl:!0})})),this.K_.has(t)||e.sd.set(t,{ed:[],Tl:!0}),e.U.ad=this.Z_;else{var s=this.K_.get(t);e.sd.set(t,{ed:s||[],Tl:!0})}return e},t}(),zn={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,axisLabelVisible:!0,title:""},Jn=function(){function t(t){this.la=t}return t.prototype.applyOptions=function(t){this.la.hh(t)},t.prototype.options=function(){return this.la.I()},t.prototype.od=function(){return this.la},t}();function Dn(t){var i=t.overlay,n=function(t,i){var n={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.indexOf(e)<0&&(n[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(e=Object.getOwnPropertySymbols(t);s<e.length;s++)i.indexOf(e[s])<0&&Object.prototype.propertyIsEnumerable.call(t,e[s])&&(n[e[s]]=t[e[s]])}return n}(t,["overlay"]);return i&&(n.priceScaleId=""),n}var Nn=function(){function t(t,i,n){this.Fe=t,this.ld=i,this.fd=n}return t.prototype.priceFormatter=function(){return this.Fe.Yh()},t.prototype.priceToCoordinate=function(t){var i=this.Fe.Y();return null===i?null:this.Fe.Z().X(t,i.J)},t.prototype.coordinateToPrice=function(t){var i=this.Fe.Y();return null===i?null:this.Fe.Z().Di(t,i.J)},t.prototype.barsInLogicalRange=function(t){if(null===t)return null;var i=new It(new Et(t.from,t.to)).Us(),n=this.Fe.qi();if(n.Qt())return null;var e=n.Ea(i.hs(),1),s=n.Ea(i.ss(),-1),r=d(n.Da()),h=d(n.Ui());if(null!==e&&null!==s&&e.Ps>s.Ps)return{barsBefore:t.from-r,barsAfter:h-t.to};var o={barsBefore:null===e||e.Ps===r?t.from-r:e.Ps-r,barsAfter:null===s||s.Ps===h?h-t.to:h-s.Ps};return null!==e&&null!==s&&(o.from=e.P.Ss||e.P.Cs,o.to=s.P.Ss||s.P.Cs),o},t.prototype.setData=function(t){this.Fe.da(),this.ld.vd(this.Fe,t)},t.prototype.update=function(t){this.Fe.da(),this.ld.uo(this.Fe,t)},t.prototype.setMarkers=function(t){var i=t.map((function(t){return f(f({},t),{time:Ln(t.time)})}));this.Fe.lo(i)},t.prototype.applyOptions=function(t){var i=Dn(t);this.Fe.hh(i)},t.prototype.options=function(){return x(this.Fe.I())},t.prototype.priceScale=function(){return this.fd.priceScale(this.Fe.Z().nh())},t.prototype.createPriceLine=function(t){var i=m(x(zn),t),n=this.Fe.fo(i);return new Jn(n)},t.prototype.removePriceLine=function(t){this.Fe.co(t.od())},t.prototype.seriesType=function(){return this.Fe.da()},t}(),On=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return c(i,t),i.prototype.applyOptions=function(i){xt(i),t.prototype.applyOptions.call(this,i)},i}(Nn),Rn={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,drawTicks:!0,scaleMargins:{bottom:.1,top:.2}},Yn={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Dt,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},Un={width:0,height:0,layout:{backgroundColor:"#FFFFFF",textColor:"#191919",fontSize:11,fontFamily:Dt},crosshair:{vertLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},horzLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},mode:1},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:f({},Rn),leftPriceScale:f(f({},Rn),{visible:!1}),rightPriceScale:f(f({},Rn),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0},watermark:Yn,localization:{locale:nn?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0}},Hn={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Qn={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},qn={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:""},Wn={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:""},Zn={color:"#26a69a",base:0},$n={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},Xn=function(){function t(t,i){this._d=t,this.dd=i}return t.prototype.applyOptions=function(t){this._d.ct().Ol(this.dd,t)},t.prototype.options=function(){return this.Jt().I()},t.prototype.width=function(){return Rt(this.dd)?this._d.O_("left"===this.dd?"left":"right"):0},t.prototype.Jt=function(){return d(this._d.ct().zl(this.dd)).Z},t}(),jn=function(){function t(t){this.wd=new it,this.tr=new it,this.hi=t,this.Ao().Kr().Zi(this.Md.bind(this)),this.Ao().$r().Zi(this.bd.bind(this))}return t.prototype.rn=function(){this.Ao().Kr().nn(this),this.Ao().$r().nn(this),this.wd.rn()},t.prototype.scrollPosition=function(){return this.Ao().Fr()},t.prototype.scrollToPosition=function(t,i){i?this.Ao().Yr(t,1e3):this.hi.dr(t)},t.prototype.scrollToRealTime=function(){this.Ao().Hr()},t.prototype.getVisibleRange=function(){var t,i,n=this.Ao().gr();return null===n?null:{from:null!==(t=n.from.Ss)&&void 0!==t?t:n.from.Cs,to:null!==(i=n.to.Ss)&&void 0!==i?i:n.to.Cs}},t.prototype.setVisibleRange=function(t){var i={from:Ln(t.from),to:Ln(t.to)},n=this.Ao().Nr(i);this.hi.rf(n)},t.prototype.getVisibleLogicalRange=function(){var t=this.Ao().mr();return null===t?null:{from:t.hs(),to:t.ss()}},t.prototype.setVisibleLogicalRange=function(t){v(t.from<=t.to,"The from index cannot be after the to index."),this.hi.rf(t)},t.prototype.resetTimeScale=function(){this.hi.ke()},t.prototype.fitContent=function(){this.hi.Jr()},t.prototype.logicalToCoordinate=function(t){var i=this.hi.U();return i.Qt()?null:i.G(t)},t.prototype.coordinateToLogical=function(t){var i=this.hi.U();return i.Qt()?null:i.Ar(t)},t.prototype.timeToCoordinate=function(t){var i=Ln(t),n=this.hi.U(),e=n.wr(i,!1);return null===e?null:n.G(e)},t.prototype.coordinateToTime=function(t){var i,n=this.hi.U(),e=n.Ar(t),s=n.si(e);return null===s?null:null!==(i=s.Ss)&&void 0!==i?i:s.Cs},t.prototype.subscribeVisibleTimeRangeChange=function(t){this.wd.Zi(t)},t.prototype.unsubscribeVisibleTimeRangeChange=function(t){this.wd.tn(t)},t.prototype.subscribeVisibleLogicalRangeChange=function(t){this.tr.Zi(t)},t.prototype.unsubscribeVisibleLogicalRangeChange=function(t){this.tr.tn(t)},t.prototype.applyOptions=function(t){this.Ao().hh(t)},t.prototype.options=function(){return x(this.Ao().I())},t.prototype.Ao=function(){return this.hi.U()},t.prototype.Md=function(){this.wd.sn()&&this.wd.hn(this.getVisibleRange())},t.prototype.bd=function(){this.tr.sn()&&this.tr.hn(this.getVisibleLogicalRange())},t}();function Gn(t){if(void 0!==t&&"custom"!==t.type){var i=t;void 0!==i.minMove&&void 0===i.precision&&(i.precision=function(t){if(t>=1)return 0;for(var i=0;i<8;i++){var n=Math.round(t);if(Math.abs(n-t)<1e-8)return i;t*=10}return i}(i.minMove))}}function Kn(t){return function(t){if(_(t.handleScale)){var i=t.handleScale;t.handleScale={axisDoubleClickReset:i,axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(void 0!==t.handleScale&&_(t.handleScale.axisPressedMouseMove)){var n=t.handleScale.axisPressedMouseMove;t.handleScale.axisPressedMouseMove={time:n,price:n}}var e=t.handleScroll;_(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(t),function(t){if(t.priceScale){t.leftPriceScale=t.leftPriceScale||{},t.rightPriceScale=t.rightPriceScale||{};var i=t.priceScale.position;delete t.priceScale.position,t.leftPriceScale=m(t.leftPriceScale,t.priceScale),t.rightPriceScale=m(t.rightPriceScale,t.priceScale),"left"===i&&(t.leftPriceScale.visible=!0,t.rightPriceScale.visible=!1),"right"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!0),"none"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!1),t.overlayPriceScales=t.overlayPriceScales||{},void 0!==t.priceScale.invertScale&&(t.overlayPriceScales.invertScale=t.priceScale.invertScale),void 0!==t.priceScale.scaleMargins&&(t.overlayPriceScales.scaleMargins=t.priceScale.scaleMargins)}}(t),t}var te=function(){function t(t,i){var n=this;this.md=new Fn,this.gd=new Map,this.pd=new Map,this.yd=new it,this.kd=new it;var e=void 0===i?x(Un):m(x(Un),Kn(i));this._d=new gn(t,e),this._d.zv().Zi((function(t){n.yd.sn()&&n.yd.hn(n.xd(t()))}),this),this._d.Wl().Zi((function(t){n.kd.sn()&&n.kd.hn(n.xd(t()))}),this);var s=this._d.ct();this.Nd=new jn(s)}return t.prototype.remove=function(){this._d.zv().nn(this),this._d.Wl().nn(this),this.Nd.rn(),this._d.rn(),this.gd.clear(),this.pd.clear(),this.yd.rn(),this.kd.rn(),this.md.rn()},t.prototype.resize=function(t,i,n){this._d.C_(t,i,n)},t.prototype.addAreaSeries=function(t){void 0===t&&(t={}),Gn((t=Dn(t)).priceFormat);var i=m(x($n),Wn,t),n=this._d.ct().nf("Area",i),e=new Nn(n,this,this);return this.gd.set(e,n),this.pd.set(n,e),e},t.prototype.addBarSeries=function(t){void 0===t&&(t={}),Gn((t=Dn(t)).priceFormat);var i=m(x($n),Qn,t),n=this._d.ct().nf("Bar",i),e=new Nn(n,this,this);return this.gd.set(e,n),this.pd.set(n,e),e},t.prototype.addCandlestickSeries=function(t){void 0===t&&(t={}),xt(t=Dn(t)),Gn(t.priceFormat);var i=m(x($n),Hn,t),n=this._d.ct().nf("Candlestick",i),e=new On(n,this,this);return this.gd.set(e,n),this.pd.set(n,e),e},t.prototype.addHistogramSeries=function(t){void 0===t&&(t={}),Gn((t=Dn(t)).priceFormat);var i=m(x($n),Zn,t),n=this._d.ct().nf("Histogram",i),e=new Nn(n,this,this);return this.gd.set(e,n),this.pd.set(n,e),e},t.prototype.addLineSeries=function(t){void 0===t&&(t={}),Gn((t=Dn(t)).priceFormat);var i=m(x($n),qn,t),n=this._d.ct().nf("Line",i),e=new Nn(n,this,this);return this.gd.set(e,n),this.pd.set(n,e),e},t.prototype.removeSeries=function(t){var i=y(this.gd.get(t)),n=this.md.sf(i);this._d.ct().sf(i),this.Sd(n),this.gd.delete(t),this.pd.delete(i)},t.prototype.vd=function(t,i){this.Sd(this.md.J_(t,i))},t.prototype.uo=function(t,i){this.Sd(this.md.nd(t,i))},t.prototype.subscribeClick=function(t){this.yd.Zi(t)},t.prototype.unsubscribeClick=function(t){this.yd.tn(t)},t.prototype.subscribeCrosshairMove=function(t){this.kd.Zi(t)},t.prototype.unsubscribeCrosshairMove=function(t){this.kd.tn(t)},t.prototype.priceScale=function(t){return void 0===t&&(t=this._d.ct().ef()),new Xn(this._d,t)},t.prototype.timeScale=function(){return this.Nd},t.prototype.applyOptions=function(t){this._d.hh(Kn(t))},t.prototype.options=function(){return this._d.I()},t.prototype.takeScreenshot=function(){return this._d.L_()},t.prototype.Sd=function(t){var i=this._d.ct();i.tf(t.U.Er,t.U.ad),t.sd.forEach((function(t,i){return i.uo(t.ed,t.Tl)})),i.Or()},t.prototype.Cd=function(t){return y(this.pd.get(t))},t.prototype.xd=function(t){var i=this,n=new Map;t.j_.forEach((function(t,e){n.set(i.Cd(e),t)}));var e=void 0===t.R_?void 0:this.Cd(t.R_);return{time:t.P&&(t.P.Ss||t.P.Cs),point:t.W_,hoveredSeries:e,hoveredMarkerId:t.U_,seriesPrices:n}},t}();function ie(t,i){var n;if(b(t)){var e=document.getElementById(t);v(null!==e,"Cannot find element in DOM with id="+t),n=e}else n=t;return new te(n,i)}}}]);
//# sourceMappingURL=6.a4d165b6.chunk.js.map