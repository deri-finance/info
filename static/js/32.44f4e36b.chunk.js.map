{"version":3,"sources":["pages/Retired/Retired.js"],"names":["inject","observer","lang","wallet","poolManager","useState","curTabPool","curOpen","poolTitle","setPoolTitle","nowPool","setNowPool","setStakedAmmList","setStakedLpList","getStakedPools","a","filterPools","ammPools","lpPools","Promise","all","map","item","params","chainId","address","detail","account","apiProxy","request","isStaked","arr","filter","p","ammArr","type","lpArr","useEffect","isConnected","load","retiredPools","pools","className","rel","target","href","index","pool"],"mappings":"6PAuGeA,sBAAO,SAAU,cAAjBA,CAAgCC,aAhG/C,YAAsD,IAAnCC,EAAkC,EAAlCA,KAAkC,IAA5BC,cAA4B,MAAnB,GAAmB,EAAfC,EAAe,EAAfA,YAAe,EACfC,mBAAS,OADM,mBAC5CC,EAD4C,aAErBD,oBAAS,IAFY,mBAE5CE,EAF4C,aAGjBF,mBAASH,EAAK,qBAHG,mBAG5CM,EAH4C,KAGjCC,EAHiC,OAIrBJ,mBAAS,IAJY,mBAI5CK,EAJ4C,KAInCC,EAJmC,OAKTN,oBAAS,GALA,gCAMTA,mBAAS,KANA,mBAM7BO,GAN6B,aAOXP,mBAAS,IAPE,mBAO9BQ,GAP8B,WAU7CC,EAAc,uCAAG,kCAAAC,EAAA,6DACjBC,EADiB,sBACCZ,EAAYa,UADb,YAC0Bb,EAAYc,UADtC,SAELC,QAAQC,IAAIJ,EAAYK,IAAZ,uCAAgB,WAAOC,GAAP,eAAAP,EAAA,6DACtCQ,EAAS,CAACD,EAAKE,QAASF,EAAKG,QAAStB,EAAOuB,OAAOC,SADd,SAE1BC,IAASC,QAAQ,mBAAoBN,GAFX,kBAGlCO,SAHkC,yCAIjCR,GAJiC,iCAMjC,GANiC,2CAAhB,wDAFP,OAWrBS,GATIA,EAFiB,QAWXC,QAAO,SAAAC,GAAC,OAAIA,KAClBC,EAASH,EAAIC,QAAO,SAAAC,GAAC,MAAe,OAAXA,EAAEE,QAC3BC,EAAQL,EAAIC,QAAO,SAAAC,GAAC,MAAe,OAAXA,EAAEE,QAC9BvB,EAAiBsB,GACjBrB,EAAgBuB,GAfK,2CAAH,qDAuCpB,OApBAC,qBAAU,WACJlC,EAAOmC,eACTxB,MAED,CAACX,EAAOuB,OAAQtB,EAAaE,IAEhC+B,qBAAU,WAEN5B,EADEF,EACWL,EAAK,mBAELA,EAAK,sBAEnB,CAACK,IACJ8B,qBAAU,WACRjC,EAAYmC,SACX,IAEHF,qBAAU,WACR1B,EAAWP,EAAYoC,gBACtB,CAACpC,EAAYqC,QAEd,qBAAKC,UAAU,WAAf,SACE,qBAAKA,UAAU,YAAf,SACE,sBAAKA,UAAU,OAAf,UACE,qBAAKA,UAAU,mBAAf,SACE,sBAAKA,UAAU,aAAf,UACE,qBAAKA,UAAU,kBAAf,SACGlC,IAEH,sBAAKkC,UAAU,yBAAf,WACInC,GAAW,qCACX,qBAAKmC,UAAU,gBAAf,SACGxC,EAAK,wBAER,qBAAKwC,UAAU,gBAAf,SACGxC,EAAK,2BAGTK,GAAW,qCACV,qBAAKmC,UAAU,gBAAf,SACGxC,EAAK,6BAER,qBAAKwC,UAAU,gBAAf,SACGxC,EAAK,wCAOhB,sBAAKwC,UAAU,qBAAf,UACE,qBAAKA,UAAU,eAAf,SACE,wDAA0B,mBAAGC,IAAI,aAAaC,OAAO,SAASC,KAAK,mDAAzC,qBAA1B,MAAoI,mBAAGF,IAAI,aAAaC,OAAO,SAASC,KAAK,mDAAzC,uCAApI,sFACd,uBADc,+CACuC,mBAAGF,IAAI,aAAaC,OAAO,SAASC,KAAK,uCAAzC,kBADvC,wDAIF,qBAAKH,UAAU,YAAf,SACGhC,EAAQW,KAAI,SAACC,EAAMwB,GAAP,OAAiB,cAAC,IAAD,CAAM3C,OAAQA,EAAQD,KAAMA,EAAM6C,KAAMzB,GAAWwB,QAEnF,qBAAKJ,WAAS","file":"static/js/32.44f4e36b.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\"\r\nimport { inject, observer } from 'mobx-react';\r\nimport Card from \"../../pages/Pool/Card\"\r\nimport apiProxy from '../../model/ApiProxy'\r\nimport selectIcon from '../../assets/img/arrow-down.svg'\r\nimport '../../pages/Pool/pool.less'\r\nimport './retired.less'\r\nfunction Retired({ lang, wallet = {}, poolManager }) {\r\n  const [curTabPool, setCurTabPool] = useState('amm');\r\n  const [curOpen, setCurOpen] = useState(false);\r\n  const [poolTitle, setPoolTitle] = useState(lang['deri-pool-title'])\r\n  const [nowPool, setNowPool] = useState([]);\r\n  const [checkedStaked, setCheckedStaked] = useState(false)\r\n  const [stakedAmmList, setStakedAmmList] = useState([])\r\n  const [stakedLpList, setStakedLpList] = useState([])\r\n\r\n\r\n  const getStakedPools = async () => {\r\n    let filterPools = [...poolManager.ammPools, ...poolManager.lpPools];\r\n    let arr = await Promise.all(filterPools.map(async (item) => {\r\n      let params = [item.chainId, item.address, wallet.detail.account]\r\n      let res = await apiProxy.request('getUserStakeInfo', params)\r\n      if (res.isStaked) {\r\n        return item\r\n      } else {\r\n        return false\r\n      }\r\n    }))\r\n    arr = arr.filter(p => p)\r\n    let ammArr = arr.filter(p => p.type !== 'lp')\r\n    let lpArr = arr.filter(p => p.type === 'lp')\r\n    setStakedAmmList(ammArr)\r\n    setStakedLpList(lpArr)\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    if (wallet.isConnected()) {\r\n      getStakedPools()\r\n    }\r\n  }, [wallet.detail, poolManager, curTabPool])\r\n\r\n  useEffect(() => {\r\n    if (curOpen) {\r\n      setPoolTitle(lang['open-pool-title'])\r\n    } else {\r\n      setPoolTitle(lang['deri-pool-title'])\r\n    }\r\n  }, [curOpen])\r\n  useEffect(() => {\r\n    poolManager.load()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    setNowPool(poolManager.retiredPools)\r\n  }, [poolManager.pools])\r\n  return (\r\n    <div className='pool-box'>\r\n      <div className='pool-info'>\r\n        <div className='left'>\r\n          <div className='left-header-info'>\r\n            <div className='pool-title'>\r\n              <div className='pool-title-text'>\r\n                {poolTitle}\r\n              </div>\r\n              <div className='pool-title-select-text'>\r\n                {!curOpen && <>\r\n                  <div className='pool-test-des'>\r\n                    {lang['pool-title-des-one']}\r\n                  </div>\r\n                  <div className='pool-test-des'>\r\n                    {lang['pool-title-des-two']}\r\n                  </div>\r\n                </>}\r\n                {curOpen && <>\r\n                  <div className='pool-test-des'>\r\n                    {lang['open-pool-title-des-one']}\r\n                  </div>\r\n                  <div className='pool-test-des'>\r\n                    {lang['open-pool-title-des-two']}\r\n                  </div>\r\n                </>}\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n          <div className='pool-card-claim-bg'>\r\n            <div className='retired-hint'>\r\n              <div>Several V2 markets ( <a rel=\"noreferrer\" target=\"_blank\" href=\"https://app.deri.finance/#/trade/options/retired\">Options</a> , <a rel=\"noreferrer\" target=\"_blank\" href=\"https://app.deri.finance/#/trade/futures/retired\">Fut Main &amp; Fut Inno-BUSD </a> pools) are no longer supported, please close position and remove your collaterals.\r\n<br></br> For V1 and Premining markets, please visit <a rel=\"noreferrer\" target=\"_blank\" href='https://v2app.deri.finance/#/retired'>here</a>  to close position and remove your collaterals.</div>\r\n            </div>\r\n\r\n            <div className='pool-card'>\r\n              {nowPool.map((item, index) => <Card wallet={wallet} lang={lang} pool={item} key={index} />)}\r\n            </div>\r\n            <div className></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default inject('wallet', 'poolManager')(observer(Retired))"],"sourceRoot":""}